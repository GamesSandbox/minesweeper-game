/*! For license information please see game-library.a8319da869ebef9f4805.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[function(r,n,i){"use strict";i.r(n),i.d(n,"utils",(function(){return o})),i.d(n,"AccessibilityManager",(function(){return Jt})),i.d(n,"accessibleTarget",(function(){return $t})),i.d(n,"InteractionData",(function(){return ne})),i.d(n,"InteractionEvent",(function(){return ie})),i.d(n,"InteractionManager",(function(){return he})),i.d(n,"InteractionTrackingData",(function(){return oe})),i.d(n,"interactiveTarget",(function(){return se})),i.d(n,"Application",(function(){return un})),i.d(n,"AbstractBatchRenderer",(function(){return Jr})),i.d(n,"AbstractRenderer",(function(){return Vr})),i.d(n,"Attribute",(function(){return Fe})),i.d(n,"BaseRenderTexture",(function(){return Oe})),i.d(n,"BaseTexture",(function(){return ye})),i.d(n,"BatchDrawCall",(function(){return Zr})),i.d(n,"BatchGeometry",(function(){return en})),i.d(n,"BatchPluginFactory",(function(){return an})),i.d(n,"BatchRenderer",(function(){return sn})),i.d(n,"BatchShaderGenerator",(function(){return tn})),i.d(n,"BatchTextureArray",(function(){return $r})),i.d(n,"Buffer",(function(){return Ne})),i.d(n,"Filter",(function(){return Tr})),i.d(n,"FilterState",(function(){return Ye})),i.d(n,"Framebuffer",(function(){return Ae})),i.d(n,"GLFramebuffer",(function(){return Je})),i.d(n,"GLProgram",(function(){return Br})),i.d(n,"GLTexture",(function(){return Xr})),i.d(n,"Geometry",(function(){return Xe})),i.d(n,"IGLUniformData",(function(){return Fr})),i.d(n,"MaskData",(function(){return or})),i.d(n,"ObjectRenderer",(function(){return Ke})),i.d(n,"Program",(function(){return _r})),i.d(n,"Quad",(function(){return ze})),i.d(n,"QuadUv",(function(){return He})),i.d(n,"RenderTexture",(function(){return Le})),i.d(n,"RenderTexturePool",(function(){return De})),i.d(n,"Renderer",(function(){return Yr})),i.d(n,"Shader",(function(){return br})),i.d(n,"SpriteMaskFilter",(function(){return Ir})),i.d(n,"State",(function(){return xr})),i.d(n,"System",(function(){return we})),i.d(n,"Texture",(function(){return Me})),i.d(n,"TextureMatrix",(function(){return Er})),i.d(n,"TextureUvs",(function(){return Re})),i.d(n,"UniformGroup",(function(){return Ve})),i.d(n,"ViewableBuffer",(function(){return Qr})),i.d(n,"autoDetectRenderer",(function(){return autoDetectRenderer})),i.d(n,"checkMaxIfStatementsInShader",(function(){return checkMaxIfStatementsInShader})),i.d(n,"defaultFilterVertex",(function(){return Kr})),i.d(n,"defaultVertex",(function(){return qr})),i.d(n,"resources",(function(){return Ie})),i.d(n,"systems",(function(){return Hr})),i.d(n,"uniformParsers",(function(){return dr})),i.d(n,"Extract",(function(){return ln})),i.d(n,"AppLoaderPlugin",(function(){return Pn})),i.d(n,"Loader",(function(){return wn})),i.d(n,"LoaderResource",(function(){return En})),i.d(n,"TextureLoader",(function(){return In})),i.d(n,"ParticleContainer",(function(){return Rn})),i.d(n,"ParticleRenderer",(function(){return Mn})),i.d(n,"BasePrepare",(function(){return yi})),i.d(n,"CountLimiter",(function(){return pi})),i.d(n,"Prepare",(function(){return mi})),i.d(n,"TimeLimiter",(function(){return gi})),i.d(n,"Spritesheet",(function(){return vi})),i.d(n,"SpritesheetLoader",(function(){return _i})),i.d(n,"TilingSprite",(function(){return xi})),i.d(n,"TilingSpriteRenderer",(function(){return Ei})),i.d(n,"BitmapFont",(function(){return Li})),i.d(n,"BitmapFontData",(function(){return Ci})),i.d(n,"BitmapFontLoader",(function(){return Ni})),i.d(n,"BitmapText",(function(){return Bi})),i.d(n,"Ticker",(function(){return ee})),i.d(n,"TickerPlugin",(function(){return re})),i.d(n,"UPDATE_PRIORITY",(function(){return Qt})),i.d(n,"ALPHA_MODES",(function(){return et})),i.d(n,"BLEND_MODES",(function(){return W})),i.d(n,"BUFFER_BITS",(function(){return H})),i.d(n,"CLEAR_MODES",(function(){return rt})),i.d(n,"DRAW_MODES",(function(){return V})),i.d(n,"ENV",(function(){return j})),i.d(n,"FORMATS",(function(){return Y})),i.d(n,"GC_MODES",(function(){return nt})),i.d(n,"MASK_TYPES",(function(){return ot})),i.d(n,"MIPMAP_MODES",(function(){return tt})),i.d(n,"MSAA_QUALITY",(function(){return at})),i.d(n,"PRECISION",(function(){return it})),i.d(n,"RENDERER_TYPE",(function(){return X})),i.d(n,"SCALE_MODES",(function(){return $})),i.d(n,"TARGETS",(function(){return q})),i.d(n,"TYPES",(function(){return Z})),i.d(n,"WRAP_MODES",(function(){return Q})),i.d(n,"Bounds",(function(){return Yt})),i.d(n,"Container",(function(){return Zt})),i.d(n,"DisplayObject",(function(){return qt})),i.d(n,"TemporaryDisplayObject",(function(){return Kt})),i.d(n,"FillStyle",(function(){return Dn})),i.d(n,"GRAPHICS_CURVES",(function(){return Ln})),i.d(n,"Graphics",(function(){return ri})),i.d(n,"GraphicsData",(function(){return Kn})),i.d(n,"GraphicsGeometry",(function(){return Qn})),i.d(n,"LINE_CAP",(function(){return On})),i.d(n,"LINE_JOIN",(function(){return An})),i.d(n,"LineStyle",(function(){return Jn})),i.d(n,"graphicsUtils",(function(){return qn})),i.d(n,"Circle",(function(){return Ct})),i.d(n,"DEG_TO_RAD",(function(){return Ot})),i.d(n,"Ellipse",(function(){return Mt})),i.d(n,"Matrix",(function(){return Nt})),i.d(n,"ObservablePoint",(function(){return Bt})),i.d(n,"PI_2",(function(){return Pt})),i.d(n,"Point",(function(){return Ft})),i.d(n,"Polygon",(function(){return Lt})),i.d(n,"RAD_TO_DEG",(function(){return At})),i.d(n,"Rectangle",(function(){return Rt})),i.d(n,"RoundedRectangle",(function(){return Dt})),i.d(n,"SHAPES",(function(){return wt})),i.d(n,"Transform",(function(){return Vt})),i.d(n,"groupD8",(function(){return Wt})),i.d(n,"Mesh",(function(){return Ai})),i.d(n,"MeshBatchUvs",(function(){return Ii})),i.d(n,"MeshGeometry",(function(){return Ri})),i.d(n,"MeshMaterial",(function(){return Oi})),i.d(n,"NineSlicePlane",(function(){return vo})),i.d(n,"PlaneGeometry",(function(){return fo})),i.d(n,"RopeGeometry",(function(){return po})),i.d(n,"SimpleMesh",(function(){return go})),i.d(n,"SimplePlane",(function(){return mo})),i.d(n,"SimpleRope",(function(){return yo})),i.d(n,"Runner",(function(){return ce})),i.d(n,"Sprite",(function(){return ai})),i.d(n,"AnimatedSprite",(function(){return _o})),i.d(n,"TEXT_GRADIENT",(function(){return ni})),i.d(n,"Text",(function(){return fi})),i.d(n,"TextMetrics",(function(){return ci})),i.d(n,"TextStyle",(function(){return hi})),i.d(n,"isMobile",(function(){return U})),i.d(n,"settings",(function(){return st})),i.d(n,"VERSION",(function(){return xo})),i.d(n,"filters",(function(){return To})),i.d(n,"useDeprecated",(function(){return useDeprecated}));var o={};i.r(o),i.d(o,"isMobile",(function(){return U})),i.d(o,"EventEmitter",(function(){return ht.a})),i.d(o,"earcut",(function(){return lt.a})),i.d(o,"url",(function(){return ft.a})),i.d(o,"BaseTextureCache",(function(){return Tt})),i.d(o,"CanvasRenderTarget",(function(){return St})),i.d(o,"DATA_URI",(function(){return It})),i.d(o,"ProgramCache",(function(){return bt})),i.d(o,"TextureCache",(function(){return xt})),i.d(o,"clearTextureCache",(function(){return clearTextureCache})),i.d(o,"correctBlendMode",(function(){return correctBlendMode})),i.d(o,"createIndicesForQuads",(function(){return createIndicesForQuads})),i.d(o,"decomposeDataUri",(function(){return decomposeDataUri})),i.d(o,"deprecation",(function(){return deprecation})),i.d(o,"destroyTextureCache",(function(){return destroyTextureCache})),i.d(o,"determineCrossOrigin",(function(){return determineCrossOrigin})),i.d(o,"getBufferType",(function(){return getBufferType})),i.d(o,"getResolutionOfUrl",(function(){return getResolutionOfUrl})),i.d(o,"hex2rgb",(function(){return hex2rgb})),i.d(o,"hex2string",(function(){return hex2string})),i.d(o,"interleaveTypedArrays",(function(){return interleaveTypedArrays})),i.d(o,"isPow2",(function(){return isPow2})),i.d(o,"isWebGLSupported",(function(){return isWebGLSupported})),i.d(o,"log2",(function(){return log2})),i.d(o,"nextPow2",(function(){return nextPow2})),i.d(o,"premultiplyBlendMode",(function(){return mt})),i.d(o,"premultiplyRgba",(function(){return premultiplyRgba})),i.d(o,"premultiplyTint",(function(){return premultiplyTint})),i.d(o,"premultiplyTintToRgba",(function(){return premultiplyTintToRgba})),i.d(o,"removeItems",(function(){return removeItems})),i.d(o,"rgb2hex",(function(){return rgb2hex})),i.d(o,"sayHello",(function(){return sayHello})),i.d(o,"sign",(function(){return sign})),i.d(o,"skipHello",(function(){return skipHello})),i.d(o,"string2hex",(function(){return string2hex})),i.d(o,"trimCanvas",(function(){return trimCanvas})),i.d(o,"uid",(function(){return uid}));var a=i(26),s=i(27),h=i.n(s);window.Promise||(window.Promise=a.Polyfill),Object.assign||(Object.assign=h.a);if(Date.now&&Date.prototype.getTime||(Date.now=function now(){return(new Date).getTime()}),!window.performance||!window.performance.now){var d=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-d}}for(var f=Date.now(),p=["ms","moz","webkit","o"],y=0;y<p.length&&!window.requestAnimationFrame;++y){var g=p[y];window.requestAnimationFrame=window[g+"RequestAnimationFrame"],window.cancelAnimationFrame=window[g+"CancelAnimationFrame"]||window[g+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(r){if("function"!=typeof r)throw new TypeError(r+"is not a function");var n=Date.now(),i=16+f-n;return i<0&&(i=0),f=n,window.setTimeout((function(){f=Date.now(),r(performance.now())}),i)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(r){return clearTimeout(r)}),Math.sign||(Math.sign=function mathSign(r){return 0===(r=Number(r))||isNaN(r)?r:r>0?1:-1}),Number.isInteger||(Number.isInteger=function numberIsInteger(r){return"number"==typeof r&&isFinite(r)&&Math.floor(r)===r}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array);var _=/iPhone/i,b=/iPod/i,x=/iPad/i,T=/\biOS-universal(?:.+)Mac\b/i,S=/\bAndroid(?:.+)Mobile\b/i,E=/Android/i,w=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,P=/Silk/i,O=/Windows Phone/i,R=/\bWindows(?:.+)ARM\b/i,C=/BlackBerry/i,M=/BB10/i,D=/Opera Mini/i,F=/\b(CriOS|Chrome)(?:.+)Mobile/i,N=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(r){return void 0!==r&&"MacIntel"===r.platform&&"number"==typeof r.maxTouchPoints&&r.maxTouchPoints>1&&"undefined"==typeof MSStream};var U=function isMobile(r){var n={userAgent:"",platform:"",maxTouchPoints:0};r||"undefined"==typeof navigator?"string"==typeof r?n.userAgent=r:r&&r.userAgent&&(n={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0}):n={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=n.userAgent,o=i.split("[FBAN");void 0!==o[1]&&(i=o[0]),void 0!==(o=i.split("Twitter"))[1]&&(i=o[0]);var a=function createMatch(r){return function(n){return n.test(r)}}(i),s={apple:{phone:a(_)&&!a(O),ipod:a(b),tablet:!a(_)&&(a(x)||isAppleTabletOnIos13(n))&&!a(O),universal:a(T),device:(a(_)||a(b)||a(x)||a(T)||isAppleTabletOnIos13(n))&&!a(O)},amazon:{phone:a(w),tablet:!a(w)&&a(P),device:a(w)||a(P)},android:{phone:!a(O)&&a(w)||!a(O)&&a(S),tablet:!a(O)&&!a(w)&&!a(S)&&(a(P)||a(E)),device:!a(O)&&(a(w)||a(P)||a(S)||a(E))||a(/\bokhttp\b/i)},windows:{phone:a(O),tablet:a(R),device:a(O)||a(R)},other:{blackberry:a(C),blackberry10:a(M),opera:a(D),firefox:a(N),chrome:a(F),device:a(C)||a(M)||a(D)||a(N)||a(F)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}(window.navigator);var j,X,H,W,V,Y,q,Z,$,Q,tt,et,rt,nt,it,ot,at,st={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function maxRecommendedTextures(r){var n=!0;if(U.tablet||U.phone){var i;if(U.apple.device)if(i=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(i[1],10)<11&&(n=!1);if(U.android.device)if(i=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(i[1],10)<7&&(n=!1)}return n?r:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:U.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:function canUploadSameBuffer(){return!U.apple.device}(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},ut=i(13),ht=i.n(ut),ct=i(14),lt=i.n(ct),dt=i(8),ft=i.n(dt);!function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"}(j||(j={})),function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"}(X||(X={})),function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"}(H||(H={})),function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"}(W||(W={})),function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(V||(V={})),function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Y||(Y={})),function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(q||(q={})),function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.FLOAT=5126]="FLOAT",r[r.HALF_FLOAT=36193]="HALF_FLOAT"}(Z||(Z={})),function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"}($||($={})),function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Q||(Q={})),function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON"}(tt||(tt={})),function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(et||(et={})),function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"}(rt||(rt={})),function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"}(nt||(nt={})),function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"}(it||(it={})),function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"}(ot||(ot={})),function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"}(at||(at={})),st.RETINA_PREFIX=/@([0-9\.]+)x/,st.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var pt,yt=!1;function skipHello(){yt=!0}function sayHello(r){var n;if(!yt){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i=["\n %c %c %c PixiJS 5.3.3 - ✰ "+r+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(n=window.console).log.apply(n,i)}else window.console&&window.console.log("PixiJS 5.3.3 - "+r+" - http://www.pixijs.com/");yt=!0}}function isWebGLSupported(){return void 0===pt&&(pt=function supported(){var r={stencil:!0,failIfMajorPerformanceCaveat:st.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var n=document.createElement("canvas"),i=n.getContext("webgl",r)||n.getContext("experimental-webgl",r),o=!(!i||!i.getContextAttributes().stencil);if(i){var a=i.getExtension("WEBGL_lose_context");a&&a.loseContext()}return i=null,o}catch(r){return!1}}()),pt}function hex2rgb(r,n){return void 0===n&&(n=[]),n[0]=(r>>16&255)/255,n[1]=(r>>8&255)/255,n[2]=(255&r)/255,n}function hex2string(r){var n=r.toString(16);return"#"+(n="000000".substr(0,6-n.length)+n)}function string2hex(r){return"string"==typeof r&&"#"===r[0]&&(r=r.substr(1)),parseInt(r,16)}function rgb2hex(r){return(255*r[0]<<16)+(255*r[1]<<8)+(255*r[2]|0)}var mt=function mapPremultipliedBlendModes(){for(var r=[],n=[],i=0;i<32;i++)r[i]=i,n[i]=i;r[W.NORMAL_NPM]=W.NORMAL,r[W.ADD_NPM]=W.ADD,r[W.SCREEN_NPM]=W.SCREEN,n[W.NORMAL]=W.NORMAL_NPM,n[W.ADD]=W.ADD_NPM,n[W.SCREEN]=W.SCREEN_NPM;var o=[];return o.push(n),o.push(r),o}();function correctBlendMode(r,n){return mt[n?1:0][r]}function premultiplyRgba(r,n,i,o){return i=i||new Float32Array(4),o||void 0===o?(i[0]=r[0]*n,i[1]=r[1]*n,i[2]=r[2]*n):(i[0]=r[0],i[1]=r[1],i[2]=r[2]),i[3]=n,i}function premultiplyTint(r,n){if(1===n)return(255*n<<24)+r;if(0===n)return 0;var i=r>>16&255,o=r>>8&255,a=255&r;return(255*n<<24)+((i=i*n+.5|0)<<16)+((o=o*n+.5|0)<<8)+(a=a*n+.5|0)}function premultiplyTintToRgba(r,n,i,o){return(i=i||new Float32Array(4))[0]=(r>>16&255)/255,i[1]=(r>>8&255)/255,i[2]=(255&r)/255,(o||void 0===o)&&(i[0]*=n,i[1]*=n,i[2]*=n),i[3]=n,i}function createIndicesForQuads(r,n){void 0===n&&(n=null);var i=6*r;if((n=n||new Uint16Array(i)).length!==i)throw new Error("Out buffer length is incorrect, got "+n.length+" and expected "+i);for(var o=0,a=0;o<i;o+=6,a+=4)n[o+0]=a+0,n[o+1]=a+1,n[o+2]=a+2,n[o+3]=a+0,n[o+4]=a+2,n[o+5]=a+3;return n}function getBufferType(r){if(4===r.BYTES_PER_ELEMENT)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===r.BYTES_PER_ELEMENT){if(r instanceof Uint16Array)return"Uint16Array"}else if(1===r.BYTES_PER_ELEMENT&&r instanceof Uint8Array)return"Uint8Array";return null}var gt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function interleaveTypedArrays(r,n){for(var i=0,o=0,a={},s=0;s<r.length;s++)o+=n[s],i+=r[s].length;var h=new ArrayBuffer(4*i),d=null,f=0;for(s=0;s<r.length;s++){var p=n[s],y=r[s],g=getBufferType(y);a[g]||(a[g]=new gt[g](h)),d=a[g];for(var _=0;_<y.length;_++){d[(_/p|0)*o+f+_%p]=y[_]}f+=p}return new Float32Array(h)}function nextPow2(r){return r+=0===r?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)+1}function isPow2(r){return!(r&r-1||!r)}function log2(r){var n=(r>65535?1:0)<<4,i=((r>>>=n)>255?1:0)<<3;return n|=i,n|=i=((r>>>=i)>15?1:0)<<2,(n|=i=((r>>>=i)>3?1:0)<<1)|(r>>>=i)>>1}function removeItems(r,n,i){var o,a=r.length;if(!(n>=a||0===i)){var s=a-(i=n+i>a?a-n:i);for(o=n;o<s;++o)r[o]=r[o+i];r.length=s}}function sign(r){return 0===r?0:r<0?-1:1}var vt=0;function uid(){return++vt}var _t={};function deprecation(r,n,i){if(void 0===i&&(i=3),!_t[n]){var o=(new Error).stack;void 0===o?console.warn("PixiJS Deprecation Warning: ",n+"\nDeprecated since v"+r):(o=o.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",n+"\nDeprecated since v"+r),console.warn(o),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",n+"\nDeprecated since v"+r),console.warn(o))),_t[n]=!0}}var bt={},xt=Object.create(null),Tt=Object.create(null);function destroyTextureCache(){var r;for(r in xt)xt[r].destroy();for(r in Tt)Tt[r].destroy()}function clearTextureCache(){var r;for(r in xt)delete xt[r];for(r in Tt)delete Tt[r]}var St=function(){function CanvasRenderTarget(r,n,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||st.RESOLUTION,this.resize(r,n)}return CanvasRenderTarget.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},CanvasRenderTarget.prototype.resize=function(r,n){this.canvas.width=r*this.resolution,this.canvas.height=n*this.resolution},CanvasRenderTarget.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(CanvasRenderTarget.prototype,"width",{get:function(){return this.canvas.width},set:function(r){this.canvas.width=r},enumerable:!1,configurable:!0}),Object.defineProperty(CanvasRenderTarget.prototype,"height",{get:function(){return this.canvas.height},set:function(r){this.canvas.height=r},enumerable:!1,configurable:!0}),CanvasRenderTarget}();function trimCanvas(r){var n,i,o,a=r.width,s=r.height,h=r.getContext("2d"),d=h.getImageData(0,0,a,s).data,f=d.length,p={top:null,left:null,right:null,bottom:null},y=null;for(n=0;n<f;n+=4)0!==d[n+3]&&(i=n/4%a,o=~~(n/4/a),null===p.top&&(p.top=o),(null===p.left||i<p.left)&&(p.left=i),(null===p.right||p.right<i)&&(p.right=i+1),(null===p.bottom||p.bottom<o)&&(p.bottom=o));return null!==p.top&&(a=p.right-p.left,s=p.bottom-p.top+1,y=h.getImageData(p.left,p.top,a,s)),{height:s,width:a,data:y}}var Et,It=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function decomposeDataUri(r){var n=It.exec(r);if(n)return{mediaType:n[1]?n[1].toLowerCase():void 0,subType:n[2]?n[2].toLowerCase():void 0,charset:n[3]?n[3].toLowerCase():void 0,encoding:n[4]?n[4].toLowerCase():void 0,data:n[5]}}function determineCrossOrigin(r,n){if(void 0===n&&(n=window.location),0===r.indexOf("data:"))return"";n=n||window.location,Et||(Et=document.createElement("a")),Et.href=r;var i=Object(dt.parse)(Et.href),o=!i.port&&""===n.port||i.port===n.port;return i.hostname===n.hostname&&o&&i.protocol===n.protocol?"":"anonymous"}function getResolutionOfUrl(r,n){var i=st.RETINA_PREFIX.exec(r);return i?parseFloat(i[1]):void 0!==n?n:1}var wt,Pt=2*Math.PI,At=180/Math.PI,Ot=Math.PI/180;!function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"}(wt||(wt={}));var Rt=function(){function Rectangle(r,n,i,o){void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),this.x=Number(r),this.y=Number(n),this.width=Number(i),this.height=Number(o),this.type=wt.RECT}return Object.defineProperty(Rectangle.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(Rectangle.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(Rectangle.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(Rectangle.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(Rectangle,"EMPTY",{get:function(){return new Rectangle(0,0,0,0)},enumerable:!1,configurable:!0}),Rectangle.prototype.clone=function(){return new Rectangle(this.x,this.y,this.width,this.height)},Rectangle.prototype.copyFrom=function(r){return this.x=r.x,this.y=r.y,this.width=r.width,this.height=r.height,this},Rectangle.prototype.copyTo=function(r){return r.x=this.x,r.y=this.y,r.width=this.width,r.height=this.height,r},Rectangle.prototype.contains=function(r,n){return!(this.width<=0||this.height<=0)&&(r>=this.x&&r<this.x+this.width&&n>=this.y&&n<this.y+this.height)},Rectangle.prototype.pad=function(r,n){return void 0===r&&(r=0),void 0===n&&(n=r),this.x-=r,this.y-=n,this.width+=2*r,this.height+=2*n,this},Rectangle.prototype.fit=function(r){var n=Math.max(this.x,r.x),i=Math.min(this.x+this.width,r.x+r.width),o=Math.max(this.y,r.y),a=Math.min(this.y+this.height,r.y+r.height);return this.x=n,this.width=Math.max(i-n,0),this.y=o,this.height=Math.max(a-o,0),this},Rectangle.prototype.ceil=function(r,n){void 0===r&&(r=1),void 0===n&&(n=.001);var i=Math.ceil((this.x+this.width-n)*r)/r,o=Math.ceil((this.y+this.height-n)*r)/r;return this.x=Math.floor((this.x+n)*r)/r,this.y=Math.floor((this.y+n)*r)/r,this.width=i-this.x,this.height=o-this.y,this},Rectangle.prototype.enlarge=function(r){var n=Math.min(this.x,r.x),i=Math.max(this.x+this.width,r.x+r.width),o=Math.min(this.y,r.y),a=Math.max(this.y+this.height,r.y+r.height);return this.x=n,this.width=i-n,this.y=o,this.height=a-o,this},Rectangle}(),Ct=function(){function Circle(r,n,i){void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=r,this.y=n,this.radius=i,this.type=wt.CIRC}return Circle.prototype.clone=function(){return new Circle(this.x,this.y,this.radius)},Circle.prototype.contains=function(r,n){if(this.radius<=0)return!1;var i=this.radius*this.radius,o=this.x-r,a=this.y-n;return(o*=o)+(a*=a)<=i},Circle.prototype.getBounds=function(){return new Rt(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},Circle}(),Mt=function(){function Ellipse(r,n,i,o){void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),this.x=r,this.y=n,this.width=i,this.height=o,this.type=wt.ELIP}return Ellipse.prototype.clone=function(){return new Ellipse(this.x,this.y,this.width,this.height)},Ellipse.prototype.contains=function(r,n){if(this.width<=0||this.height<=0)return!1;var i=(r-this.x)/this.width,o=(n-this.y)/this.height;return(i*=i)+(o*=o)<=1},Ellipse.prototype.getBounds=function(){return new Rt(this.x-this.width,this.y-this.height,this.width,this.height)},Ellipse}(),Lt=function(){function Polygon(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];var o=Array.isArray(n[0])?n[0]:n;if("number"!=typeof o[0]){for(var a=[],s=0,h=o.length;s<h;s++)a.push(o[s].x,o[s].y);o=a}this.points=o,this.type=wt.POLY,this.closeStroke=!0}return Polygon.prototype.clone=function(){var r=new Polygon(this.points.slice());return r.closeStroke=this.closeStroke,r},Polygon.prototype.contains=function(r,n){for(var i=!1,o=this.points.length/2,a=0,s=o-1;a<o;s=a++){var h=this.points[2*a],d=this.points[2*a+1],f=this.points[2*s],p=this.points[2*s+1];d>n!=p>n&&r<(n-d)/(p-d)*(f-h)+h&&(i=!i)}return i},Polygon}(),Dt=function(){function RoundedRectangle(r,n,i,o,a){void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=20),this.x=r,this.y=n,this.width=i,this.height=o,this.radius=a,this.type=wt.RREC}return RoundedRectangle.prototype.clone=function(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},RoundedRectangle.prototype.contains=function(r,n){if(this.width<=0||this.height<=0)return!1;if(r>=this.x&&r<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){if(n>=this.y+this.radius&&n<=this.y+this.height-this.radius||r>=this.x+this.radius&&r<=this.x+this.width-this.radius)return!0;var i=r-(this.x+this.radius),o=n-(this.y+this.radius),a=this.radius*this.radius;if(i*i+o*o<=a)return!0;if((i=r-(this.x+this.width-this.radius))*i+o*o<=a)return!0;if(i*i+(o=n-(this.y+this.height-this.radius))*o<=a)return!0;if((i=r-(this.x+this.radius))*i+o*o<=a)return!0}return!1},RoundedRectangle}(),Ft=function(){function Point(r,n){void 0===r&&(r=0),void 0===n&&(n=0),this.x=r,this.y=n}return Point.prototype.clone=function(){return new Point(this.x,this.y)},Point.prototype.copyFrom=function(r){return this.set(r.x,r.y),this},Point.prototype.copyTo=function(r){return r.set(this.x,this.y),r},Point.prototype.equals=function(r){return r.x===this.x&&r.y===this.y},Point.prototype.set=function(r,n){return void 0===r&&(r=0),void 0===n&&(n=r),this.x=r,this.y=n,this},Point}(),Bt=function(){function ObservablePoint(r,n,i,o){void 0===i&&(i=0),void 0===o&&(o=0),this._x=i,this._y=o,this.cb=r,this.scope=n}return ObservablePoint.prototype.clone=function(r,n){return void 0===r&&(r=this.cb),void 0===n&&(n=this.scope),new ObservablePoint(r,n,this._x,this._y)},ObservablePoint.prototype.set=function(r,n){return void 0===r&&(r=0),void 0===n&&(n=r),this._x===r&&this._y===n||(this._x=r,this._y=n,this.cb.call(this.scope)),this},ObservablePoint.prototype.copyFrom=function(r){return this._x===r.x&&this._y===r.y||(this._x=r.x,this._y=r.y,this.cb.call(this.scope)),this},ObservablePoint.prototype.copyTo=function(r){return r.set(this._x,this._y),r},ObservablePoint.prototype.equals=function(r){return r.x===this._x&&r.y===this._y},Object.defineProperty(ObservablePoint.prototype,"x",{get:function(){return this._x},set:function(r){this._x!==r&&(this._x=r,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(ObservablePoint.prototype,"y",{get:function(){return this._y},set:function(r){this._y!==r&&(this._y=r,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),ObservablePoint}(),Nt=function(){function Matrix(r,n,i,o,a,s){void 0===r&&(r=1),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=1),void 0===a&&(a=0),void 0===s&&(s=0),this.array=null,this.a=r,this.b=n,this.c=i,this.d=o,this.tx=a,this.ty=s}return Matrix.prototype.fromArray=function(r){this.a=r[0],this.b=r[1],this.c=r[3],this.d=r[4],this.tx=r[2],this.ty=r[5]},Matrix.prototype.set=function(r,n,i,o,a,s){return this.a=r,this.b=n,this.c=i,this.d=o,this.tx=a,this.ty=s,this},Matrix.prototype.toArray=function(r,n){this.array||(this.array=new Float32Array(9));var i=n||this.array;return r?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},Matrix.prototype.apply=function(r,n){n=n||new Ft;var i=r.x,o=r.y;return n.x=this.a*i+this.c*o+this.tx,n.y=this.b*i+this.d*o+this.ty,n},Matrix.prototype.applyInverse=function(r,n){n=n||new Ft;var i=1/(this.a*this.d+this.c*-this.b),o=r.x,a=r.y;return n.x=this.d*i*o+-this.c*i*a+(this.ty*this.c-this.tx*this.d)*i,n.y=this.a*i*a+-this.b*i*o+(-this.ty*this.a+this.tx*this.b)*i,n},Matrix.prototype.translate=function(r,n){return this.tx+=r,this.ty+=n,this},Matrix.prototype.scale=function(r,n){return this.a*=r,this.d*=n,this.c*=r,this.b*=n,this.tx*=r,this.ty*=n,this},Matrix.prototype.rotate=function(r){var n=Math.cos(r),i=Math.sin(r),o=this.a,a=this.c,s=this.tx;return this.a=o*n-this.b*i,this.b=o*i+this.b*n,this.c=a*n-this.d*i,this.d=a*i+this.d*n,this.tx=s*n-this.ty*i,this.ty=s*i+this.ty*n,this},Matrix.prototype.append=function(r){var n=this.a,i=this.b,o=this.c,a=this.d;return this.a=r.a*n+r.b*o,this.b=r.a*i+r.b*a,this.c=r.c*n+r.d*o,this.d=r.c*i+r.d*a,this.tx=r.tx*n+r.ty*o+this.tx,this.ty=r.tx*i+r.ty*a+this.ty,this},Matrix.prototype.setTransform=function(r,n,i,o,a,s,h,d,f){return this.a=Math.cos(h+f)*a,this.b=Math.sin(h+f)*a,this.c=-Math.sin(h-d)*s,this.d=Math.cos(h-d)*s,this.tx=r-(i*this.a+o*this.c),this.ty=n-(i*this.b+o*this.d),this},Matrix.prototype.prepend=function(r){var n=this.tx;if(1!==r.a||0!==r.b||0!==r.c||1!==r.d){var i=this.a,o=this.c;this.a=i*r.a+this.b*r.c,this.b=i*r.b+this.b*r.d,this.c=o*r.a+this.d*r.c,this.d=o*r.b+this.d*r.d}return this.tx=n*r.a+this.ty*r.c+r.tx,this.ty=n*r.b+this.ty*r.d+r.ty,this},Matrix.prototype.decompose=function(r){var n=this.a,i=this.b,o=this.c,a=this.d,s=-Math.atan2(-o,a),h=Math.atan2(i,n),d=Math.abs(s+h);return d<1e-5||Math.abs(Pt-d)<1e-5?(r.rotation=h,r.skew.x=r.skew.y=0):(r.rotation=0,r.skew.x=s,r.skew.y=h),r.scale.x=Math.sqrt(n*n+i*i),r.scale.y=Math.sqrt(o*o+a*a),r.position.x=this.tx,r.position.y=this.ty,r},Matrix.prototype.invert=function(){var r=this.a,n=this.b,i=this.c,o=this.d,a=this.tx,s=r*o-n*i;return this.a=o/s,this.b=-n/s,this.c=-i/s,this.d=r/s,this.tx=(i*this.ty-o*a)/s,this.ty=-(r*this.ty-n*a)/s,this},Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Matrix.prototype.clone=function(){var r=new Matrix;return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},Matrix.prototype.copyTo=function(r){return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},Matrix.prototype.copyFrom=function(r){return this.a=r.a,this.b=r.b,this.c=r.c,this.d=r.d,this.tx=r.tx,this.ty=r.ty,this},Object.defineProperty(Matrix,"IDENTITY",{get:function(){return new Matrix},enumerable:!1,configurable:!0}),Object.defineProperty(Matrix,"TEMP_MATRIX",{get:function(){return new Matrix},enumerable:!1,configurable:!0}),Matrix}(),kt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ut=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],jt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Gt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Xt=[],zt=[],Ht=Math.sign;!function init(){for(var r=0;r<16;r++){var n=[];Xt.push(n);for(var i=0;i<16;i++)for(var o=Ht(kt[r]*kt[i]+jt[r]*Ut[i]),a=Ht(Ut[r]*kt[i]+Gt[r]*Ut[i]),s=Ht(kt[r]*jt[i]+jt[r]*Gt[i]),h=Ht(Ut[r]*jt[i]+Gt[r]*Gt[i]),d=0;d<16;d++)if(kt[d]===o&&Ut[d]===a&&jt[d]===s&&Gt[d]===h){n.push(d);break}}for(r=0;r<16;r++){var f=new Nt;f.set(kt[r],Ut[r],jt[r],Gt[r],0,0),zt.push(f)}}();var Wt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return kt[r]},uY:function(r){return Ut[r]},vX:function(r){return jt[r]},vY:function(r){return Gt[r]},inv:function(r){return 8&r?15&r:7&-r},add:function(r,n){return Xt[r][n]},sub:function(r,n){return Xt[r][Wt.inv(n)]},rotate180:function(r){return 4^r},isVertical:function(r){return 2==(3&r)},byDirection:function(r,n){return 2*Math.abs(r)<=Math.abs(n)?n>=0?Wt.S:Wt.N:2*Math.abs(n)<=Math.abs(r)?r>0?Wt.E:Wt.W:n>0?r>0?Wt.SE:Wt.SW:r>0?Wt.NE:Wt.NW},matrixAppendRotationInv:function(r,n,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var a=zt[Wt.inv(n)];a.tx=i,a.ty=o,r.append(a)}},Vt=function(){function Transform(){this.worldTransform=new Nt,this.localTransform=new Nt,this.position=new Bt(this.onChange,this,0,0),this.scale=new Bt(this.onChange,this,1,1),this.pivot=new Bt(this.onChange,this,0,0),this.skew=new Bt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return Transform.prototype.onChange=function(){this._localID++},Transform.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},Transform.prototype.updateLocalTransform=function(){var r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)},Transform.prototype.updateTransform=function(r){var n=this.localTransform;if(this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){var i=r.worldTransform,o=this.worldTransform;o.a=n.a*i.a+n.b*i.c,o.b=n.a*i.b+n.b*i.d,o.c=n.c*i.a+n.d*i.c,o.d=n.c*i.b+n.d*i.d,o.tx=n.tx*i.a+n.ty*i.c+i.tx,o.ty=n.tx*i.b+n.ty*i.d+i.ty,this._parentID=r._worldID,this._worldID++}},Transform.prototype.setFromMatrix=function(r){r.decompose(this),this._localID++},Object.defineProperty(Transform.prototype,"rotation",{get:function(){return this._rotation},set:function(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())},enumerable:!1,configurable:!0}),Transform.IDENTITY=new Transform,Transform}();st.SORTABLE_CHILDREN=!1;var Yt=function(){function Bounds(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return Bounds.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},Bounds.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},Bounds.prototype.getRectangle=function(r){return this.minX>this.maxX||this.minY>this.maxY?Rt.EMPTY:((r=r||new Rt(0,0,1,1)).x=this.minX,r.y=this.minY,r.width=this.maxX-this.minX,r.height=this.maxY-this.minY,r)},Bounds.prototype.addPoint=function(r){this.minX=Math.min(this.minX,r.x),this.maxX=Math.max(this.maxX,r.x),this.minY=Math.min(this.minY,r.y),this.maxY=Math.max(this.maxY,r.y)},Bounds.prototype.addQuad=function(r){var n=this.minX,i=this.minY,o=this.maxX,a=this.maxY,s=r[0],h=r[1];n=s<n?s:n,i=h<i?h:i,o=s>o?s:o,a=h>a?h:a,n=(s=r[2])<n?s:n,i=(h=r[3])<i?h:i,o=s>o?s:o,a=h>a?h:a,n=(s=r[4])<n?s:n,i=(h=r[5])<i?h:i,o=s>o?s:o,a=h>a?h:a,n=(s=r[6])<n?s:n,i=(h=r[7])<i?h:i,o=s>o?s:o,a=h>a?h:a,this.minX=n,this.minY=i,this.maxX=o,this.maxY=a},Bounds.prototype.addFrame=function(r,n,i,o,a){this.addFrameMatrix(r.worldTransform,n,i,o,a)},Bounds.prototype.addFrameMatrix=function(r,n,i,o,a){var s=r.a,h=r.b,d=r.c,f=r.d,p=r.tx,y=r.ty,g=this.minX,_=this.minY,b=this.maxX,x=this.maxY,T=s*n+d*i+p,S=h*n+f*i+y;g=T<g?T:g,_=S<_?S:_,b=T>b?T:b,x=S>x?S:x,g=(T=s*o+d*i+p)<g?T:g,_=(S=h*o+f*i+y)<_?S:_,b=T>b?T:b,x=S>x?S:x,g=(T=s*n+d*a+p)<g?T:g,_=(S=h*n+f*a+y)<_?S:_,b=T>b?T:b,x=S>x?S:x,g=(T=s*o+d*a+p)<g?T:g,_=(S=h*o+f*a+y)<_?S:_,b=T>b?T:b,x=S>x?S:x,this.minX=g,this.minY=_,this.maxX=b,this.maxY=x},Bounds.prototype.addVertexData=function(r,n,i){for(var o=this.minX,a=this.minY,s=this.maxX,h=this.maxY,d=n;d<i;d+=2){var f=r[d],p=r[d+1];o=f<o?f:o,a=p<a?p:a,s=f>s?f:s,h=p>h?p:h}this.minX=o,this.minY=a,this.maxX=s,this.maxY=h},Bounds.prototype.addVertices=function(r,n,i,o){this.addVerticesMatrix(r.worldTransform,n,i,o)},Bounds.prototype.addVerticesMatrix=function(r,n,i,o,a,s){void 0===a&&(a=0),void 0===s&&(s=a);for(var h=r.a,d=r.b,f=r.c,p=r.d,y=r.tx,g=r.ty,_=this.minX,b=this.minY,x=this.maxX,T=this.maxY,S=i;S<o;S+=2){var E=n[S],w=n[S+1],P=h*E+f*w+y,O=p*w+d*E+g;_=Math.min(_,P-a),x=Math.max(x,P+a),b=Math.min(b,O-s),T=Math.max(T,O+s)}this.minX=_,this.minY=b,this.maxX=x,this.maxY=T},Bounds.prototype.addBounds=function(r){var n=this.minX,i=this.minY,o=this.maxX,a=this.maxY;this.minX=r.minX<n?r.minX:n,this.minY=r.minY<i?r.minY:i,this.maxX=r.maxX>o?r.maxX:o,this.maxY=r.maxY>a?r.maxY:a},Bounds.prototype.addBoundsMask=function(r,n){var i=r.minX>n.minX?r.minX:n.minX,o=r.minY>n.minY?r.minY:n.minY,a=r.maxX<n.maxX?r.maxX:n.maxX,s=r.maxY<n.maxY?r.maxY:n.maxY;if(i<=a&&o<=s){var h=this.minX,d=this.minY,f=this.maxX,p=this.maxY;this.minX=i<h?i:h,this.minY=o<d?o:d,this.maxX=a>f?a:f,this.maxY=s>p?s:p}},Bounds.prototype.addBoundsMatrix=function(r,n){this.addFrameMatrix(n,r.minX,r.minY,r.maxX,r.maxY)},Bounds.prototype.addBoundsArea=function(r,n){var i=r.minX>n.x?r.minX:n.x,o=r.minY>n.y?r.minY:n.y,a=r.maxX<n.x+n.width?r.maxX:n.x+n.width,s=r.maxY<n.y+n.height?r.maxY:n.y+n.height;if(i<=a&&o<=s){var h=this.minX,d=this.minY,f=this.maxX,p=this.maxY;this.minX=i<h?i:h,this.minY=o<d?o:d,this.maxX=a>f?a:f,this.maxY=s>p?s:p}},Bounds.prototype.pad=function(r,n){void 0===r&&(r=0),void 0===n&&(n=r),this.isEmpty()||(this.minX-=r,this.maxX+=r,this.minY-=n,this.maxY+=n)},Bounds.prototype.addFramePad=function(r,n,i,o,a,s){r-=a,n-=s,i+=a,o+=s,this.minX=this.minX<r?this.minX:r,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<n?this.minY:n,this.maxY=this.maxY>o?this.maxY:o},Bounds}(),extendStatics=function(r,n){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};function __extends(r,n){function __(){this.constructor=r}extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}var qt=function(r){function DisplayObject(){var n=r.call(this)||this;return n.tempDisplayObjectParent=null,n.transform=new Vt,n.alpha=1,n.visible=!0,n.renderable=!0,n.parent=null,n.worldAlpha=1,n._lastSortedIndex=0,n._zIndex=0,n.filterArea=null,n.filters=null,n._enabledFilters=null,n._bounds=new Yt,n._localBounds=null,n._boundsID=0,n._boundsRect=null,n._localBoundsRect=null,n._mask=null,n._destroyed=!1,n.isSprite=!1,n.isMask=!1,n}return __extends(DisplayObject,r),DisplayObject.mixin=function(r){for(var n=Object.keys(r),i=0;i<n.length;++i){var o=n[i];Object.defineProperty(DisplayObject.prototype,o,Object.getOwnPropertyDescriptor(r,o))}},DisplayObject.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},DisplayObject.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},DisplayObject.prototype.getBounds=function(r,n){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new Rt),n=this._boundsRect),this._bounds.getRectangle(n)},DisplayObject.prototype.getLocalBounds=function(r){r||(this._localBoundsRect||(this._localBoundsRect=new Rt),r=this._localBoundsRect),this._localBounds||(this._localBounds=new Yt);var n=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var s=this.getBounds(!1,r);return this.parent=i,this.transform=n,this._bounds=o,this._bounds.updateID+=this._boundsID-a,s},DisplayObject.prototype.toGlobal=function(r,n,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,n)},DisplayObject.prototype.toLocal=function(r,n,i,o){return n&&(r=n.toGlobal(r,i,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(r,i)},DisplayObject.prototype.setParent=function(r){if(!r||!r.addChild)throw new Error("setParent: Argument must be a Container");return r.addChild(this),r},DisplayObject.prototype.setTransform=function(r,n,i,o,a,s,h,d,f){return void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=1),void 0===o&&(o=1),void 0===a&&(a=0),void 0===s&&(s=0),void 0===h&&(h=0),void 0===d&&(d=0),void 0===f&&(f=0),this.position.x=r,this.position.y=n,this.scale.x=i||1,this.scale.y=o||1,this.rotation=a,this.skew.x=s,this.skew.y=h,this.pivot.x=d,this.pivot.y=f,this},DisplayObject.prototype.destroy=function(r){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(DisplayObject.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Kt),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),DisplayObject.prototype.enableTempParent=function(){var r=this.parent;return this.parent=this._tempDisplayObjectParent,r},DisplayObject.prototype.disableTempParent=function(r){this.parent=r},Object.defineProperty(DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(r){this.transform.position.x=r},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(r){this.transform.position.y=r},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"position",{get:function(){return this.transform.position},set:function(r){this.transform.position.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"scale",{get:function(){return this.transform.scale},set:function(r){this.transform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(r){this.transform.pivot.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"skew",{get:function(){return this.transform.skew},set:function(r){this.transform.skew.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(r){this.transform.rotation=r},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"angle",{get:function(){return this.transform.rotation*At},set:function(r){this.transform.rotation=r*Ot},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"zIndex",{get:function(){return this._zIndex},set:function(r){this._zIndex=r,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"worldVisible",{get:function(){var r=this;do{if(!r.visible)return!1;r=r.parent}while(r);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(r){var n;this._mask&&((n=this._mask.maskObject||this._mask).renderable=!0,n.isMask=!1);(this._mask=r,this._mask)&&((n=this._mask.maskObject||this._mask).renderable=!1,n.isMask=!0)},enumerable:!1,configurable:!0}),DisplayObject}(ht.a),Kt=function(r){function TemporaryDisplayObject(){var n=null!==r&&r.apply(this,arguments)||this;return n.sortDirty=null,n}return __extends(TemporaryDisplayObject,r),TemporaryDisplayObject}(qt);function sortChildren(r,n){return r.zIndex===n.zIndex?r._lastSortedIndex-n._lastSortedIndex:r.zIndex-n.zIndex}qt.prototype.displayObjectUpdateTransform=qt.prototype.updateTransform;var Zt=function(r){function Container(){var n=r.call(this)||this;return n.children=[],n.sortableChildren=st.SORTABLE_CHILDREN,n.sortDirty=!1,n}return __extends(Container,r),Container.prototype.onChildrenChange=function(r){},Container.prototype.addChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var o=0;o<n.length;o++)this.addChild(n[o]);else{var a=n[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return n[0]},Container.prototype.addChildAt=function(r,n){if(n<0||n>this.children.length)throw new Error(r+"addChildAt: The index "+n+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(n,0,r),this._boundsID++,this.onChildrenChange(n),r.emit("added",this),this.emit("childAdded",r,this,n),r},Container.prototype.swapChildren=function(r,n){if(r!==n){var i=this.getChildIndex(r),o=this.getChildIndex(n);this.children[i]=n,this.children[o]=r,this.onChildrenChange(i<o?i:o)}},Container.prototype.getChildIndex=function(r){var n=this.children.indexOf(r);if(-1===n)throw new Error("The supplied DisplayObject must be a child of the caller");return n},Container.prototype.setChildIndex=function(r,n){if(n<0||n>=this.children.length)throw new Error("The index "+n+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(r);removeItems(this.children,i,1),this.children.splice(n,0,r),this.onChildrenChange(n)},Container.prototype.getChildAt=function(r){if(r<0||r>=this.children.length)throw new Error("getChildAt: Index ("+r+") does not exist.");return this.children[r]},Container.prototype.removeChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var o=0;o<n.length;o++)this.removeChild(n[o]);else{var a=n[0],s=this.children.indexOf(a);if(-1===s)return null;a.parent=null,a.transform._parentID=-1,removeItems(this.children,s,1),this._boundsID++,this.onChildrenChange(s),a.emit("removed",this),this.emit("childRemoved",a,this,s)}return n[0]},Container.prototype.removeChildAt=function(r){var n=this.getChildAt(r);return n.parent=null,n.transform._parentID=-1,removeItems(this.children,r,1),this._boundsID++,this.onChildrenChange(r),n.emit("removed",this),this.emit("childRemoved",n,this,r),n},Container.prototype.removeChildren=function(r,n){void 0===r&&(r=0),void 0===n&&(n=this.children.length);var i,o=r,a=n-o;if(a>0&&a<=n){i=this.children.splice(o,a);for(var s=0;s<i.length;++s)i[s].parent=null,i[s].transform&&(i[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(s=0;s<i.length;++s)i[s].emit("removed",this),this.emit("childRemoved",i[s],this,s);return i}if(0===a&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},Container.prototype.sortChildren=function(){for(var r=!1,n=0,i=this.children.length;n<i;++n){var o=this.children[n];o._lastSortedIndex=n,r||0===o.zIndex||(r=!0)}r&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1},Container.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var r=0,n=this.children.length;r<n;++r){var i=this.children[r];i.visible&&i.updateTransform()}},Container.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0;r<this.children.length;r++){var n=this.children[r];if(n.visible&&n.renderable)if(n.calculateBounds(),n._mask){var i=n._mask.maskObject||n._mask;i.calculateBounds(),this._bounds.addBoundsMask(n._bounds,i._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID},Container.prototype.getLocalBounds=function(n,i){void 0===i&&(i=!1);var o=r.prototype.getLocalBounds.call(this,n);if(!i)for(var a=0,s=this.children.length;a<s;++a){var h=this.children[a];h.visible&&h.updateTransform()}return o},Container.prototype._calculateBounds=function(){},Container.prototype.render=function(r){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(r);else{this._render(r);for(var n=0,i=this.children.length;n<i;++n)this.children[n].render(r)}},Container.prototype.renderAdvanced=function(r){r.batch.flush();var n=this.filters,i=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<n.length;o++)n[o].enabled&&this._enabledFilters.push(n[o]);this._enabledFilters.length&&r.filter.push(this,this._enabledFilters)}i&&r.mask.push(this,this._mask),this._render(r);o=0;for(var a=this.children.length;o<a;o++)this.children[o].render(r);r.batch.flush(),i&&r.mask.pop(this),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.pop()},Container.prototype._render=function(r){},Container.prototype.destroy=function(n){r.prototype.destroy.call(this),this.sortDirty=!1;var i="boolean"==typeof n?n:n&&n.children,o=this.removeChildren(0,this.children.length);if(i)for(var a=0;a<o.length;++a)o[a].destroy(n)},Object.defineProperty(Container.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var n=this.getLocalBounds().width;this.scale.x=0!==n?r/n:1,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(Container.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var n=this.getLocalBounds().height;this.scale.y=0!==n?r/n:1,this._height=r},enumerable:!1,configurable:!0}),Container}(qt);Zt.prototype.containerUpdateTransform=Zt.prototype.updateTransform;var $t={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};qt.mixin($t);var Qt,Jt=function(){function AccessibilityManager(r){this._hookDiv=null,(U.tablet||U.phone)&&this.createTouchHook();var n=document.createElement("div");n.style.width="100px",n.style.height="100px",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.zIndex=2..toString(),this.div=n,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=r,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(AccessibilityManager.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(AccessibilityManager.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),AccessibilityManager.prototype.createTouchHook=function(){var r=this,n=document.createElement("button");n.style.width="1px",n.style.height="1px",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.style.zIndex=2..toString(),n.style.backgroundColor="#FF0000",n.title="select to enable accessability for this content",n.addEventListener("focus",(function(){r._isMobileAccessibility=!0,r.activate(),r.destroyTouchHook()})),document.body.appendChild(n),this._hookDiv=n},AccessibilityManager.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},AccessibilityManager.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},AccessibilityManager.prototype.deactivate=function(){this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},AccessibilityManager.prototype.updateAccessibleObjects=function(r){if(r.visible&&r.accessibleChildren){r.accessible&&r.interactive&&(r._accessibleActive||this.addChild(r),r.renderId=this.renderId);for(var n=r.children,i=0;i<n.length;i++)this.updateAccessibleObjects(n[i])}},AccessibilityManager.prototype.update=function(){var r=performance.now();if(!(U.android.device&&r<this.androidUpdateCount)&&(this.androidUpdateCount=r+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var n=this.renderer.view.getBoundingClientRect(),i=this.renderer.resolution,o=n.width/this.renderer.width*i,a=n.height/this.renderer.height*i,s=this.div;s.style.left=n.left+"px",s.style.top=n.top+"px",s.style.width=this.renderer.width+"px",s.style.height=this.renderer.height+"px";for(var h=0;h<this.children.length;h++){var d=this.children[h];if(d.renderId!==this.renderId)d._accessibleActive=!1,removeItems(this.children,h,1),this.div.removeChild(d._accessibleDiv),this.pool.push(d._accessibleDiv),d._accessibleDiv=null,h--;else{s=d._accessibleDiv;var f=d.hitArea,p=d.worldTransform;d.hitArea?(s.style.left=(p.tx+f.x*p.a)*o+"px",s.style.top=(p.ty+f.y*p.d)*a+"px",s.style.width=f.width*p.a*o+"px",s.style.height=f.height*p.d*a+"px"):(f=d.getBounds(),this.capHitArea(f),s.style.left=f.x*o+"px",s.style.top=f.y*a+"px",s.style.width=f.width*o+"px",s.style.height=f.height*a+"px",s.title!==d.accessibleTitle&&null!==d.accessibleTitle&&(s.title=d.accessibleTitle),s.getAttribute("aria-label")!==d.accessibleHint&&null!==d.accessibleHint&&s.setAttribute("aria-label",d.accessibleHint)),d.accessibleTitle===s.title&&d.tabIndex===s.tabIndex||(s.title=d.accessibleTitle,s.tabIndex=d.tabIndex,this.debug&&this.updateDebugHTML(s))}}this.renderId++}},AccessibilityManager.prototype.updateDebugHTML=function(r){r.innerHTML="type: "+r.type+"</br> title : "+r.title+"</br> tabIndex: "+r.tabIndex},AccessibilityManager.prototype.capHitArea=function(r){r.x<0&&(r.width+=r.x,r.x=0),r.y<0&&(r.height+=r.y,r.y=0),r.x+r.width>this.renderer.width&&(r.width=this.renderer.width-r.x),r.y+r.height>this.renderer.height&&(r.height=this.renderer.height-r.y)},AccessibilityManager.prototype.addChild=function(r){var n=this.pool.pop();n||((n=document.createElement("button")).style.width="100px",n.style.height="100px",n.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",n.style.position="absolute",n.style.zIndex=2..toString(),n.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?n.setAttribute("aria-live","off"):n.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?n.setAttribute("aria-relevant","additions"):n.setAttribute("aria-relevant","text"),n.addEventListener("click",this._onClick.bind(this)),n.addEventListener("focus",this._onFocus.bind(this)),n.addEventListener("focusout",this._onFocusOut.bind(this))),n.style.pointerEvents=r.accessiblePointerEvents,n.type=r.accessibleType,r.accessibleTitle&&null!==r.accessibleTitle?n.title=r.accessibleTitle:r.accessibleHint&&null!==r.accessibleHint||(n.title="displayObject "+r.tabIndex),r.accessibleHint&&null!==r.accessibleHint&&n.setAttribute("aria-label",r.accessibleHint),this.debug&&this.updateDebugHTML(n),r._accessibleActive=!0,r._accessibleDiv=n,n.displayObject=r,this.children.push(r),this.div.appendChild(r._accessibleDiv),r._accessibleDiv.tabIndex=r.tabIndex},AccessibilityManager.prototype._onClick=function(r){var n=this.renderer.plugins.interaction;n.dispatchEvent(r.target.displayObject,"click",n.eventData),n.dispatchEvent(r.target.displayObject,"pointertap",n.eventData),n.dispatchEvent(r.target.displayObject,"tap",n.eventData)},AccessibilityManager.prototype._onFocus=function(r){r.target.getAttribute("aria-live")||r.target.setAttribute("aria-live","assertive");var n=this.renderer.plugins.interaction;n.dispatchEvent(r.target.displayObject,"mouseover",n.eventData)},AccessibilityManager.prototype._onFocusOut=function(r){r.target.getAttribute("aria-live")||r.target.setAttribute("aria-live","polite");var n=this.renderer.plugins.interaction;n.dispatchEvent(r.target.displayObject,"mouseout",n.eventData)},AccessibilityManager.prototype._onKeyDown=function(r){9===r.keyCode&&this.activate()},AccessibilityManager.prototype._onMouseMove=function(r){0===r.movementX&&0===r.movementY||this.deactivate()},AccessibilityManager.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},AccessibilityManager}();st.TARGET_FPMS=.06,function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"}(Qt||(Qt={}));var te=function(){function TickerListener(r,n,i,o){void 0===n&&(n=null),void 0===i&&(i=0),void 0===o&&(o=!1),this.fn=r,this.context=n,this.priority=i,this.once=o,this.next=null,this.previous=null,this._destroyed=!1}return TickerListener.prototype.match=function(r,n){return void 0===n&&(n=null),this.fn===r&&this.context===n},TickerListener.prototype.emit=function(r){this.fn&&(this.context?this.fn.call(this.context,r):this.fn(r));var n=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),n},TickerListener.prototype.connect=function(r){this.previous=r,r.next&&(r.next.previous=this),this.next=r.next,r.next=this},TickerListener.prototype.destroy=function(r){void 0===r&&(r=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var n=this.next;return this.next=r?null:n,this.previous=null,n},TickerListener}(),ee=function(){function Ticker(){var r=this;this._head=new te(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/st.TARGET_FPMS,this.elapsedMS=1/st.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(n){r._requestId=null,r.started&&(r.update(n),r.started&&null===r._requestId&&r._head.next&&(r._requestId=requestAnimationFrame(r._tick)))}}return Ticker.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},Ticker.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},Ticker.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},Ticker.prototype.add=function(r,n,i){return void 0===i&&(i=Qt.NORMAL),this._addListener(new te(r,n,i))},Ticker.prototype.addOnce=function(r,n,i){return void 0===i&&(i=Qt.NORMAL),this._addListener(new te(r,n,i,!0))},Ticker.prototype._addListener=function(r){var n=this._head.next,i=this._head;if(n){for(;n;){if(r.priority>n.priority){r.connect(i);break}i=n,n=n.next}r.previous||r.connect(i)}else r.connect(i);return this._startIfPossible(),this},Ticker.prototype.remove=function(r,n){for(var i=this._head.next;i;)i=i.match(r,n)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(Ticker.prototype,"count",{get:function(){if(!this._head)return 0;for(var r=0,n=this._head;n=n.next;)r++;return r},enumerable:!1,configurable:!0}),Ticker.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},Ticker.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},Ticker.prototype.destroy=function(){if(!this._protected){this.stop();for(var r=this._head.next;r;)r=r.destroy(!0);this._head.destroy(),this._head=null}},Ticker.prototype.update=function(r){var n;if(void 0===r&&(r=performance.now()),r>this.lastTime){if((n=this.elapsedMS=r-this.lastTime)>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){var i=r-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=r-i%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*st.TARGET_FPMS;for(var o=this._head,a=o.next;a;)a=a.emit(this.deltaTime);o.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=r},Object.defineProperty(Ticker.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(Ticker.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(r){var n=Math.min(this.maxFPS,r),i=Math.min(Math.max(0,n)/1e3,st.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(Ticker.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(r){if(0===r)this._minElapsedMS=0;else{var n=Math.max(this.minFPS,r);this._minElapsedMS=1/(n/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(Ticker,"shared",{get:function(){if(!Ticker._shared){var r=Ticker._shared=new Ticker;r.autoStart=!0,r._protected=!0}return Ticker._shared},enumerable:!1,configurable:!0}),Object.defineProperty(Ticker,"system",{get:function(){if(!Ticker._system){var r=Ticker._system=new Ticker;r.autoStart=!0,r._protected=!0}return Ticker._system},enumerable:!1,configurable:!0}),Ticker}(),re=function(){function TickerPlugin(){}return TickerPlugin.init=function(r){var n=this;r=Object.assign({autoStart:!0,sharedTicker:!1},r),Object.defineProperty(this,"ticker",{set:function(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,Qt.LOW)},get:function(){return this._ticker}}),this.stop=function(){n._ticker.stop()},this.start=function(){n._ticker.start()},this._ticker=null,this.ticker=r.sharedTicker?ee.shared:new ee,r.autoStart&&this.start()},TickerPlugin.destroy=function(){if(this._ticker){var r=this._ticker;this.ticker=null,r.destroy()}},TickerPlugin}(),ne=function(){function InteractionData(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Ft,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(InteractionData.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),InteractionData.prototype.getLocalPosition=function(r,n,i){return r.worldTransform.applyInverse(i||this.global,n)},InteractionData.prototype.copyEvent=function(r){"isPrimary"in r&&r.isPrimary&&(this.isPrimary=!0),this.button="button"in r&&r.button;var n="buttons"in r&&r.buttons;this.buttons=Number.isInteger(n)?n:"which"in r&&r.which,this.width="width"in r&&r.width,this.height="height"in r&&r.height,this.tiltX="tiltX"in r&&r.tiltX,this.tiltY="tiltY"in r&&r.tiltY,this.pointerType="pointerType"in r&&r.pointerType,this.pressure="pressure"in r&&r.pressure,this.rotationAngle="rotationAngle"in r&&r.rotationAngle,this.twist="twist"in r&&r.twist||0,this.tangentialPressure="tangentialPressure"in r&&r.tangentialPressure||0},InteractionData.prototype.reset=function(){this.isPrimary=!1},InteractionData}(),interaction_es_extendStatics=function(r,n){return(interaction_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};var ie=function(){function InteractionEvent(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return InteractionEvent.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},InteractionEvent.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},InteractionEvent}(),oe=function(){function InteractionTrackingData(r){this._pointerId=r,this._flags=InteractionTrackingData.FLAGS.NONE}return InteractionTrackingData.prototype._doSet=function(r,n){this._flags=n?this._flags|r:this._flags&~r},Object.defineProperty(InteractionTrackingData.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"flags",{get:function(){return this._flags},set:function(r){this._flags=r},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"none",{get:function(){return this._flags===InteractionTrackingData.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"over",{get:function(){return 0!=(this._flags&InteractionTrackingData.FLAGS.OVER)},set:function(r){this._doSet(InteractionTrackingData.FLAGS.OVER,r)},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"rightDown",{get:function(){return 0!=(this._flags&InteractionTrackingData.FLAGS.RIGHT_DOWN)},set:function(r){this._doSet(InteractionTrackingData.FLAGS.RIGHT_DOWN,r)},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"leftDown",{get:function(){return 0!=(this._flags&InteractionTrackingData.FLAGS.LEFT_DOWN)},set:function(r){this._doSet(InteractionTrackingData.FLAGS.LEFT_DOWN,r)},enumerable:!1,configurable:!0}),InteractionTrackingData.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),InteractionTrackingData}(),ae=function(){function TreeSearch(){this._tempPoint=new Ft}return TreeSearch.prototype.recursiveFindHit=function(r,n,i,o,a){if(!n||!n.visible)return!1;var s=r.data.global,h=!1,d=a=n.interactive||a,f=!0;if(n.hitArea?(o&&(n.worldTransform.applyInverse(s,this._tempPoint),n.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?h=!0:(o=!1,f=!1)),d=!1):n._mask&&o&&(n._mask.containsPoint&&n._mask.containsPoint(s)||(o=!1)),f&&n.interactiveChildren&&n.children)for(var p=n.children,y=p.length-1;y>=0;y--){var g=p[y],_=this.recursiveFindHit(r,g,i,o,d);if(_){if(!g.parent)continue;d=!1,_&&(r.target&&(o=!1),h=!0)}}return a&&(o&&!r.target&&!n.hitArea&&n.containsPoint&&n.containsPoint(s)&&(h=!0),n.interactive&&(h&&!r.target&&(r.target=n),i&&i(r,n,!!h))),h},TreeSearch.prototype.findHit=function(r,n,i,o){this.recursiveFindHit(r,n,i,o,!1)},TreeSearch}(),se={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(r){r?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};qt.mixin(se);var ue={target:null,data:{global:null}},he=function(r){function InteractionManager(n,i){var o=r.call(this)||this;return i=i||{},o.renderer=n,o.autoPreventDefault=void 0===i.autoPreventDefault||i.autoPreventDefault,o.interactionFrequency=i.interactionFrequency||10,o.mouse=new ne,o.mouse.identifier=1,o.mouse.global.set(-999999),o.activeInteractionData={},o.activeInteractionData[1]=o.mouse,o.interactionDataPool=[],o.eventData=new ie,o.interactionDOMElement=null,o.moveWhenInside=!1,o.eventsAdded=!1,o.tickerAdded=!1,o.mouseOverRenderer=!1,o.supportsTouchEvents="ontouchstart"in window,o.supportsPointerEvents=!!window.PointerEvent,o.onPointerUp=o.onPointerUp.bind(o),o.processPointerUp=o.processPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.processPointerCancel=o.processPointerCancel.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.processPointerDown=o.processPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.processPointerMove=o.processPointerMove.bind(o),o.onPointerOut=o.onPointerOut.bind(o),o.processPointerOverOut=o.processPointerOverOut.bind(o),o.onPointerOver=o.onPointerOver.bind(o),o.cursorStyles={default:"inherit",pointer:"pointer"},o.currentCursorMode=null,o.cursor=null,o.resolution=1,o.delayedEvents=[],o.search=new ae,o._tempDisplayObject=new Kt,o._useSystemTicker=void 0===i.useSystemTicker||i.useSystemTicker,o.setTargetElement(o.renderer.view,o.renderer.resolution),o}return function interaction_es_extends(r,n){function __(){this.constructor=r}interaction_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}(InteractionManager,r),Object.defineProperty(InteractionManager.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(r){this._useSystemTicker=r,r?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionManager.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),InteractionManager.prototype.hitTest=function(r,n){return ue.target=null,ue.data.global=r,n||(n=this.lastObjectRendered),this.processInteractive(ue,n,null,!0),ue.target},InteractionManager.prototype.setTargetElement=function(r,n){void 0===n&&(n=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=r,this.resolution=n,this.addEvents(),this.addTickerListener()},InteractionManager.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(ee.system.add(this.tickerUpdate,this,Qt.INTERACTION),this.tickerAdded=!0)},InteractionManager.prototype.removeTickerListener=function(){this.tickerAdded&&(ee.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},InteractionManager.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var r=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(r.msContentZooming="none",r.msTouchAction="none"):this.supportsPointerEvents&&(r.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},InteractionManager.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var r=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(r.msContentZooming="",r.msTouchAction=""):this.supportsPointerEvents&&(r.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},InteractionManager.prototype.tickerUpdate=function(r){this._deltaTime+=r,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},InteractionManager.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var r in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(r)){var n=this.activeInteractionData[r];if(n.originalEvent&&"touch"!==n.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},InteractionManager.prototype.setCursorMode=function(r){if(r=r||"default",this.currentCursorMode!==r){this.currentCursorMode=r;var n=this.cursorStyles[r];if(n)switch(typeof n){case"string":this.interactionDOMElement.style.cursor=n;break;case"function":n(r);break;case"object":Object.assign(this.interactionDOMElement.style,n)}else"string"!=typeof r||Object.prototype.hasOwnProperty.call(this.cursorStyles,r)||(this.interactionDOMElement.style.cursor=r)}},InteractionManager.prototype.dispatchEvent=function(r,n,i){i.stopPropagationHint&&r!==i.stopsPropagatingAt||(i.currentTarget=r,i.type=n,r.emit(n,i),r[n]&&r[n](i))},InteractionManager.prototype.delayDispatchEvent=function(r,n,i){this.delayedEvents.push({displayObject:r,eventString:n,eventData:i})},InteractionManager.prototype.mapPositionToPoint=function(r,n,i){var o;o=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var a=1/this.resolution;r.x=(n-o.left)*(this.interactionDOMElement.width/o.width)*a,r.y=(i-o.top)*(this.interactionDOMElement.height/o.height)*a},InteractionManager.prototype.processInteractive=function(r,n,i,o){var a=this.search.findHit(r,n,i,o),s=this.delayedEvents;if(!s.length)return a;r.stopPropagationHint=!1;var h=s.length;this.delayedEvents=[];for(var d=0;d<h;d++){var f=s[d],p=f.displayObject,y=f.eventString,g=f.eventData;g.stopsPropagatingAt===p&&(g.stopPropagationHint=!0),this.dispatchEvent(p,y,g)}return a},InteractionManager.prototype.onPointerDown=function(r){if(!this.supportsTouchEvents||"touch"!==r.pointerType){var n=this.normalizeToPointerData(r);if(this.autoPreventDefault&&n[0].isNormalized)(r.cancelable||!("cancelable"in r))&&r.preventDefault();for(var i=n.length,o=0;o<i;o++){var a=n[o],s=this.getInteractionDataForPointerId(a),h=this.configureInteractionEventForDOMEvent(this.eventData,a,s);if(h.data.originalEvent=r,this.processInteractive(h,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",h),"touch"===a.pointerType)this.emit("touchstart",h);else if("mouse"===a.pointerType||"pen"===a.pointerType){var d=2===a.button;this.emit(d?"rightdown":"mousedown",this.eventData)}}}},InteractionManager.prototype.processPointerDown=function(r,n,i){var o=r.data,a=r.data.identifier;if(i)if(n.trackedPointers[a]||(n.trackedPointers[a]=new oe(a)),this.dispatchEvent(n,"pointerdown",r),"touch"===o.pointerType)this.dispatchEvent(n,"touchstart",r);else if("mouse"===o.pointerType||"pen"===o.pointerType){var s=2===o.button;s?n.trackedPointers[a].rightDown=!0:n.trackedPointers[a].leftDown=!0,this.dispatchEvent(n,s?"rightdown":"mousedown",r)}},InteractionManager.prototype.onPointerComplete=function(r,n,i){for(var o=this.normalizeToPointerData(r),a=o.length,s=r.target!==this.interactionDOMElement?"outside":"",h=0;h<a;h++){var d=o[h],f=this.getInteractionDataForPointerId(d),p=this.configureInteractionEventForDOMEvent(this.eventData,d,f);if(p.data.originalEvent=r,this.processInteractive(p,this.lastObjectRendered,i,n||!s),this.emit(n?"pointercancel":"pointerup"+s,p),"mouse"===d.pointerType||"pen"===d.pointerType){var y=2===d.button;this.emit(y?"rightup"+s:"mouseup"+s,p)}else"touch"===d.pointerType&&(this.emit(n?"touchcancel":"touchend"+s,p),this.releaseInteractionDataForPointerId(d.pointerId))}},InteractionManager.prototype.onPointerCancel=function(r){this.supportsTouchEvents&&"touch"===r.pointerType||this.onPointerComplete(r,!0,this.processPointerCancel)},InteractionManager.prototype.processPointerCancel=function(r,n){var i=r.data,o=r.data.identifier;void 0!==n.trackedPointers[o]&&(delete n.trackedPointers[o],this.dispatchEvent(n,"pointercancel",r),"touch"===i.pointerType&&this.dispatchEvent(n,"touchcancel",r))},InteractionManager.prototype.onPointerUp=function(r){this.supportsTouchEvents&&"touch"===r.pointerType||this.onPointerComplete(r,!1,this.processPointerUp)},InteractionManager.prototype.processPointerUp=function(r,n,i){var o=r.data,a=r.data.identifier,s=n.trackedPointers[a],h="touch"===o.pointerType,d="mouse"===o.pointerType||"pen"===o.pointerType,f=!1;if(d){var p=2===o.button,y=oe.FLAGS,g=p?y.RIGHT_DOWN:y.LEFT_DOWN,_=void 0!==s&&s.flags&g;i?(this.dispatchEvent(n,p?"rightup":"mouseup",r),_&&(this.dispatchEvent(n,p?"rightclick":"click",r),f=!0)):_&&this.dispatchEvent(n,p?"rightupoutside":"mouseupoutside",r),s&&(p?s.rightDown=!1:s.leftDown=!1)}i?(this.dispatchEvent(n,"pointerup",r),h&&this.dispatchEvent(n,"touchend",r),s&&(d&&!f||this.dispatchEvent(n,"pointertap",r),h&&(this.dispatchEvent(n,"tap",r),s.over=!1))):s&&(this.dispatchEvent(n,"pointerupoutside",r),h&&this.dispatchEvent(n,"touchendoutside",r)),s&&s.none&&delete n.trackedPointers[a]},InteractionManager.prototype.onPointerMove=function(r){if(!this.supportsTouchEvents||"touch"!==r.pointerType){var n=this.normalizeToPointerData(r);"mouse"!==n[0].pointerType&&"pen"!==n[0].pointerType||(this._didMove=!0,this.cursor=null);for(var i=n.length,o=0;o<i;o++){var a=n[o],s=this.getInteractionDataForPointerId(a),h=this.configureInteractionEventForDOMEvent(this.eventData,a,s);h.data.originalEvent=r,this.processInteractive(h,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",h),"touch"===a.pointerType&&this.emit("touchmove",h),"mouse"!==a.pointerType&&"pen"!==a.pointerType||this.emit("mousemove",h)}"mouse"===n[0].pointerType&&this.setCursorMode(this.cursor)}},InteractionManager.prototype.processPointerMove=function(r,n,i){var o=r.data,a="touch"===o.pointerType,s="mouse"===o.pointerType||"pen"===o.pointerType;s&&this.processPointerOverOut(r,n,i),this.moveWhenInside&&!i||(this.dispatchEvent(n,"pointermove",r),a&&this.dispatchEvent(n,"touchmove",r),s&&this.dispatchEvent(n,"mousemove",r))},InteractionManager.prototype.onPointerOut=function(r){if(!this.supportsTouchEvents||"touch"!==r.pointerType){var n=this.normalizeToPointerData(r)[0];"mouse"===n.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,i);o.data.originalEvent=n,this.processInteractive(o,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",o),"mouse"===n.pointerType||"pen"===n.pointerType?this.emit("mouseout",o):this.releaseInteractionDataForPointerId(i.identifier)}},InteractionManager.prototype.processPointerOverOut=function(r,n,i){var o=r.data,a=r.data.identifier,s="mouse"===o.pointerType||"pen"===o.pointerType,h=n.trackedPointers[a];i&&!h&&(h=n.trackedPointers[a]=new oe(a)),void 0!==h&&(i&&this.mouseOverRenderer?(h.over||(h.over=!0,this.delayDispatchEvent(n,"pointerover",r),s&&this.delayDispatchEvent(n,"mouseover",r)),s&&null===this.cursor&&(this.cursor=n.cursor)):h.over&&(h.over=!1,this.dispatchEvent(n,"pointerout",this.eventData),s&&this.dispatchEvent(n,"mouseout",r),h.none&&delete n.trackedPointers[a]))},InteractionManager.prototype.onPointerOver=function(r){var n=this.normalizeToPointerData(r)[0],i=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,i);o.data.originalEvent=n,"mouse"===n.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",o),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mouseover",o)},InteractionManager.prototype.getInteractionDataForPointerId=function(r){var n,i=r.pointerId;return 1===i||"mouse"===r.pointerType?n=this.mouse:this.activeInteractionData[i]?n=this.activeInteractionData[i]:((n=this.interactionDataPool.pop()||new ne).identifier=i,this.activeInteractionData[i]=n),n.copyEvent(r),n},InteractionManager.prototype.releaseInteractionDataForPointerId=function(r){var n=this.activeInteractionData[r];n&&(delete this.activeInteractionData[r],n.reset(),this.interactionDataPool.push(n))},InteractionManager.prototype.configureInteractionEventForDOMEvent=function(r,n,i){return r.data=i,this.mapPositionToPoint(i.global,n.clientX,n.clientY),"touch"===n.pointerType&&(n.globalX=i.global.x,n.globalY=i.global.y),i.originalEvent=n,r.reset(),r},InteractionManager.prototype.normalizeToPointerData=function(r){var n=[];if(this.supportsTouchEvents&&r instanceof TouchEvent)for(var i=0,o=r.changedTouches.length;i<o;i++){var a=r.changedTouches[i];void 0===a.button&&(a.button=r.touches.length?1:0),void 0===a.buttons&&(a.buttons=r.touches.length?1:0),void 0===a.isPrimary&&(a.isPrimary=1===r.touches.length&&"touchstart"===r.type),void 0===a.width&&(a.width=a.radiusX||1),void 0===a.height&&(a.height=a.radiusY||1),void 0===a.tiltX&&(a.tiltX=0),void 0===a.tiltY&&(a.tiltY=0),void 0===a.pointerType&&(a.pointerType="touch"),void 0===a.pointerId&&(a.pointerId=a.identifier||0),void 0===a.pressure&&(a.pressure=a.force||.5),void 0===a.twist&&(a.twist=0),void 0===a.tangentialPressure&&(a.tangentialPressure=0),void 0===a.layerX&&(a.layerX=a.offsetX=a.clientX),void 0===a.layerY&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,n.push(a)}else if(!(r instanceof MouseEvent)||this.supportsPointerEvents&&r instanceof window.PointerEvent)n.push(r);else{var s=r;void 0===s.isPrimary&&(s.isPrimary=!0),void 0===s.width&&(s.width=1),void 0===s.height&&(s.height=1),void 0===s.tiltX&&(s.tiltX=0),void 0===s.tiltY&&(s.tiltY=0),void 0===s.pointerType&&(s.pointerType="mouse"),void 0===s.pointerId&&(s.pointerId=1),void 0===s.pressure&&(s.pressure=.5),void 0===s.twist&&(s.twist=0),void 0===s.tangentialPressure&&(s.tangentialPressure=0),s.isNormalized=!0,n.push(s)}return n},InteractionManager.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},InteractionManager}(ht.a),ce=function(){function Runner(r){this.items=[],this._name=r,this._aliasCount=0}return Runner.prototype.emit=function(r,n,i,o,a,s,h,d){if(arguments.length>8)throw new Error("max arguments reached");var f=this,p=f.name,y=f.items;this._aliasCount++;for(var g=0,_=y.length;g<_;g++)y[g][p](r,n,i,o,a,s,h,d);return y===this.items&&this._aliasCount--,this},Runner.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},Runner.prototype.add=function(r){return r[this._name]&&(this.ensureNonAliasedItems(),this.remove(r),this.items.push(r)),this},Runner.prototype.remove=function(r){var n=this.items.indexOf(r);return-1!==n&&(this.ensureNonAliasedItems(),this.items.splice(n,1)),this},Runner.prototype.contains=function(r){return-1!==this.items.indexOf(r)},Runner.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},Runner.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(Runner.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(Runner.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Runner}();Object.defineProperties(ce.prototype,{dispatch:{value:ce.prototype.emit},run:{value:ce.prototype.emit}}),st.PREFER_ENV=U.any?j.WEBGL:j.WEBGL2,st.STRICT_TEXTURE_CACHE=!1;var le=[];function autoDetectResource(r,n){if(!r)return null;var i="";if("string"==typeof r){var o=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);o&&(i=o[1].toLowerCase())}for(var a=le.length-1;a>=0;--a){var s=le[a];if(s.test&&s.test(r,i))return new s(r,n)}throw new Error("Unrecognized source type to auto-detect Resource")}var core_es_extendStatics=function(r,n){return(core_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};function core_es_extends(r,n){function __(){this.constructor=r}core_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}var de=function(){function Resource(r,n){void 0===r&&(r=0),void 0===n&&(n=0),this._width=r,this._height=n,this.destroyed=!1,this.internal=!1,this.onResize=new ce("setRealSize"),this.onUpdate=new ce("update"),this.onError=new ce("onError")}return Resource.prototype.bind=function(r){this.onResize.add(r),this.onUpdate.add(r),this.onError.add(r),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},Resource.prototype.unbind=function(r){this.onResize.remove(r),this.onUpdate.remove(r),this.onError.remove(r)},Resource.prototype.resize=function(r,n){r===this._width&&n===this._height||(this._width=r,this._height=n,this.onResize.emit(r,n))},Object.defineProperty(Resource.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),Resource.prototype.update=function(){this.destroyed||this.onUpdate.emit()},Resource.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(Resource.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(Resource.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Resource.prototype.style=function(r,n,i){return!1},Resource.prototype.dispose=function(){},Resource.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Resource.test=function(r,n){return!1},Resource}(),fe=function(r){function BufferResource(n,i){var o=this,a=i||{},s=a.width,h=a.height;if(!s||!h)throw new Error("BufferResource width or height invalid");return(o=r.call(this,s,h)||this).data=n,o}return core_es_extends(BufferResource,r),BufferResource.prototype.upload=function(r,n,i){var o=r.gl;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===et.UNPACK),i.width===n.width&&i.height===n.height?o.texSubImage2D(n.target,0,0,0,n.width,n.height,n.format,n.type,this.data):(i.width=n.width,i.height=n.height,o.texImage2D(n.target,0,i.internalFormat,n.width,n.height,0,n.format,i.type,this.data)),!0},BufferResource.prototype.dispose=function(){this.data=null},BufferResource.test=function(r){return r instanceof Float32Array||r instanceof Uint8Array||r instanceof Uint32Array},BufferResource}(de),pe={scaleMode:$.NEAREST,format:Y.RGBA,alphaMode:et.NPM},ye=function(r){function BaseTexture(n,i){void 0===n&&(n=null),void 0===i&&(i=null);var o=r.call(this)||this,a=(i=i||{}).alphaMode,s=i.mipmap,h=i.anisotropicLevel,d=i.scaleMode,f=i.width,p=i.height,y=i.wrapMode,g=i.format,_=i.type,b=i.target,x=i.resolution,T=i.resourceOptions;return!n||n instanceof de||((n=autoDetectResource(n,T)).internal=!0),o.width=f||0,o.height=p||0,o.resolution=x||st.RESOLUTION,o.mipmap=void 0!==s?s:st.MIPMAP_TEXTURES,o.anisotropicLevel=void 0!==h?h:st.ANISOTROPIC_LEVEL,o.wrapMode=y||st.WRAP_MODE,o.scaleMode=void 0!==d?d:st.SCALE_MODE,o.format=g||Y.RGBA,o.type=_||Z.UNSIGNED_BYTE,o.target=b||q.TEXTURE_2D,o.alphaMode=void 0!==a?a:et.UNPACK,void 0!==i.premultiplyAlpha&&(o.premultiplyAlpha=i.premultiplyAlpha),o.uid=uid(),o.touched=0,o.isPowerOfTwo=!1,o._refreshPOT(),o._glTextures={},o.dirtyId=0,o.dirtyStyleId=0,o.cacheId=null,o.valid=f>0&&p>0,o.textureCacheIds=[],o.destroyed=!1,o.resource=null,o._batchEnabled=0,o._batchLocation=0,o.parentTextureArray=null,o.setResource(n),o}return core_es_extends(BaseTexture,r),Object.defineProperty(BaseTexture.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),BaseTexture.prototype.setStyle=function(r,n){var i;return void 0!==r&&r!==this.scaleMode&&(this.scaleMode=r,i=!0),void 0!==n&&n!==this.mipmap&&(this.mipmap=n,i=!0),i&&this.dirtyStyleId++,this},BaseTexture.prototype.setSize=function(r,n,i){return this.resolution=i||this.resolution,this.width=r,this.height=n,this._refreshPOT(),this.update(),this},BaseTexture.prototype.setRealSize=function(r,n,i){return this.resolution=i||this.resolution,this.width=r/this.resolution,this.height=n/this.resolution,this._refreshPOT(),this.update(),this},BaseTexture.prototype._refreshPOT=function(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)},BaseTexture.prototype.setResolution=function(r){var n=this.resolution;return n===r||(this.resolution=r,this.valid&&(this.width=this.width*n/r,this.height=this.height*n/r,this.emit("update",this)),this._refreshPOT()),this},BaseTexture.prototype.setResource=function(r){if(this.resource===r)return this;if(this.resource)throw new Error("Resource can be set only once");return r.bind(this),this.resource=r,this},BaseTexture.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},BaseTexture.prototype.onError=function(r){this.emit("error",this,r)},BaseTexture.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Tt[this.cacheId],delete xt[this.cacheId],this.cacheId=null),this.dispose(),BaseTexture.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},BaseTexture.prototype.dispose=function(){this.emit("dispose",this)},BaseTexture.prototype.castToBaseTexture=function(){return this},BaseTexture.from=function(r,n,i){void 0===i&&(i=st.STRICT_TEXTURE_CACHE);var o="string"==typeof r,a=null;o?a=r:(r._pixiId||(r._pixiId="pixiid_"+uid()),a=r._pixiId);var s=Tt[a];if(o&&i&&!s)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return s||((s=new BaseTexture(r,n)).cacheId=a,BaseTexture.addToCache(s,a)),s},BaseTexture.fromBuffer=function(r,n,i,o){r=r||new Float32Array(n*i*4);var a=new fe(r,{width:n,height:i}),s=r instanceof Float32Array?Z.FLOAT:Z.UNSIGNED_BYTE;return new BaseTexture(a,Object.assign(pe,o||{width:n,height:i,type:s}))},BaseTexture.addToCache=function(r,n){n&&(-1===r.textureCacheIds.indexOf(n)&&r.textureCacheIds.push(n),Tt[n]&&console.warn("BaseTexture added to the cache with an id ["+n+"] that already had an entry"),Tt[n]=r)},BaseTexture.removeFromCache=function(r){if("string"==typeof r){var n=Tt[r];if(n){var i=n.textureCacheIds.indexOf(r);return i>-1&&n.textureCacheIds.splice(i,1),delete Tt[r],n}}else if(r&&r.textureCacheIds){for(var o=0;o<r.textureCacheIds.length;++o)delete Tt[r.textureCacheIds[o]];return r.textureCacheIds.length=0,r}return null},BaseTexture._globalBatch=0,BaseTexture}(ht.a),me=function(r){function AbstractMultiResource(n,i){var o=this,a=i||{},s=a.width,h=a.height;(o=r.call(this,s,h)||this).items=[],o.itemDirtyIds=[];for(var d=0;d<n;d++){var f=new ye;o.items.push(f),o.itemDirtyIds.push(-2)}return o.length=n,o._load=null,o.baseTexture=null,o}return core_es_extends(AbstractMultiResource,r),AbstractMultiResource.prototype.initFromArray=function(r,n){for(var i=0;i<this.length;i++)r[i]&&(r[i].castToBaseTexture?this.addBaseTextureAt(r[i].castToBaseTexture(),i):r[i]instanceof de?this.addResourceAt(r[i],i):this.addResourceAt(autoDetectResource(r[i],n),i))},AbstractMultiResource.prototype.dispose=function(){for(var r=0,n=this.length;r<n;r++)this.items[r].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},AbstractMultiResource.prototype.addResourceAt=function(r,n){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");return r.valid&&!this.valid&&this.resize(r.width,r.height),this.items[n].setResource(r),this},AbstractMultiResource.prototype.bind=function(n){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,n);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=n,this.items[i].on("update",n.update,n)},AbstractMultiResource.prototype.unbind=function(n){r.prototype.unbind.call(this,n);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",n.update,n)},AbstractMultiResource.prototype.load=function(){var r=this;if(this._load)return this._load;var n=this.items.map((function(r){return r.resource})).filter((function(r){return r})).map((function(r){return r.load()}));return this._load=Promise.all(n).then((function(){var n=r.items[0],i=n.realWidth,o=n.realHeight;return r.resize(i,o),Promise.resolve(r)})),this._load},AbstractMultiResource}(de),ge=function(r){function ArrayResource(n,i){var o,a,s=this,h=i||{},d=h.width,f=h.height;return Array.isArray(n)?(o=n,a=n.length):a=n,s=r.call(this,a,{width:d,height:f})||this,o&&s.initFromArray(o,i),s}return core_es_extends(ArrayResource,r),ArrayResource.prototype.addBaseTextureAt=function(r,n){if(!r.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(r.resource,n),this},ArrayResource.prototype.bind=function(n){r.prototype.bind.call(this,n),n.target=q.TEXTURE_2D_ARRAY},ArrayResource.prototype.upload=function(r,n,i){var o=this.length,a=this.itemDirtyIds,s=this.items,h=r.gl;i.dirtyId<0&&h.texImage3D(h.TEXTURE_2D_ARRAY,0,n.format,this._width,this._height,o,0,n.format,n.type,null);for(var d=0;d<o;d++){var f=s[d];a[d]<f.dirtyId&&(a[d]=f.dirtyId,f.valid&&h.texSubImage3D(h.TEXTURE_2D_ARRAY,0,0,0,d,f.resource.width,f.resource.height,1,n.format,n.type,f.resource.source))}return!0},ArrayResource}(me),ve=function(r){function BaseImageResource(n){var i=this,o=n,a=o.naturalWidth||o.videoWidth||o.width,s=o.naturalHeight||o.videoHeight||o.height;return(i=r.call(this,a,s)||this).source=n,i.noSubImage=!1,i}return core_es_extends(BaseImageResource,r),BaseImageResource.crossOrigin=function(r,n,i){void 0===i&&0!==n.indexOf("data:")?r.crossOrigin=determineCrossOrigin(n):!1!==i&&(r.crossOrigin="string"==typeof i?i:"anonymous")},BaseImageResource.prototype.upload=function(r,n,i,o){var a=r.gl,s=n.realWidth,h=n.realHeight;return o=o||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===et.UNPACK),this.noSubImage||n.target!==a.TEXTURE_2D||i.width!==s||i.height!==h?(i.width=s,i.height=h,a.texImage2D(n.target,0,n.format,n.format,n.type,o)):a.texSubImage2D(a.TEXTURE_2D,0,0,0,n.format,n.type,o),!0},BaseImageResource.prototype.update=function(){if(!this.destroyed){var n=this.source,i=n.naturalWidth||n.videoWidth||n.width,o=n.naturalHeight||n.videoHeight||n.height;this.resize(i,o),r.prototype.update.call(this)}},BaseImageResource.prototype.dispose=function(){this.source=null},BaseImageResource}(de),_e=function(r){function CanvasResource(){return null!==r&&r.apply(this,arguments)||this}return core_es_extends(CanvasResource,r),CanvasResource.test=function(r){var n=window.OffscreenCanvas;return!!(n&&r instanceof n)||r instanceof HTMLCanvasElement},CanvasResource}(ve),be=function(r){function CubeResource(n,i){var o=this,a=i||{},s=a.width,h=a.height,d=a.autoLoad,f=a.linkBaseTexture;if(n&&n.length!==CubeResource.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");o=r.call(this,6,{width:s,height:h})||this;for(var p=0;p<CubeResource.SIDES;p++)o.items[p].target=q.TEXTURE_CUBE_MAP_POSITIVE_X+p;return o.linkBaseTexture=!1!==f,n&&o.initFromArray(n,i),!1!==d&&o.load(),o}return core_es_extends(CubeResource,r),CubeResource.prototype.bind=function(n){r.prototype.bind.call(this,n),n.target=q.TEXTURE_CUBE_MAP},CubeResource.prototype.addBaseTextureAt=function(r,n,i){if(void 0===i&&(i=this.linkBaseTexture),!this.items[n])throw new Error("Index "+n+" is out of bounds");if(!this.linkBaseTexture||r.parentTextureArray||Object.keys(r._glTextures).length>0){if(!r.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(r.resource,n)}else r.target=q.TEXTURE_CUBE_MAP_POSITIVE_X+n,r.parentTextureArray=this.baseTexture,this.items[n]=r;return r.valid&&!this.valid&&this.resize(r.realWidth,r.realHeight),this.items[n]=r,this},CubeResource.prototype.upload=function(r,n,i){for(var o=this.itemDirtyIds,a=0;a<CubeResource.SIDES;a++){var s=this.items[a];o[a]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(r,s,i),o[a]=s.dirtyId):o[a]<-1&&(r.gl.texImage2D(s.target,0,i.internalFormat,n.realWidth,n.realHeight,0,n.format,i.type,null),o[a]=-1))}return!0},CubeResource.test=function(r){return Array.isArray(r)&&r.length===CubeResource.SIDES},CubeResource.SIDES=6,CubeResource}(me),xe=function(r){function ImageResource(n,i){var o=this;if(i=i||{},!(n instanceof HTMLImageElement)){var a=new Image;ve.crossOrigin(a,n,i.crossorigin),a.src=n,n=a}return o=r.call(this,n)||this,!n.complete&&o._width&&o._height&&(o._width=0,o._height=0),o.url=n.src,o._process=null,o.preserveBitmap=!1,o.createBitmap=(void 0!==i.createBitmap?i.createBitmap:st.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,o.alphaMode="number"==typeof i.alphaMode?i.alphaMode:null,void 0!==i.premultiplyAlpha&&(o.premultiplyAlpha=i.premultiplyAlpha),o.bitmap=null,o._load=null,!1!==i.autoLoad&&o.load(),o}return core_es_extends(ImageResource,r),ImageResource.prototype.load=function(r){var n=this;return this._load||(void 0!==r&&(this.createBitmap=r),this._load=new Promise((function(r,i){var o=n.source;n.url=o.src;var completed=function(){n.destroyed||(o.onload=null,o.onerror=null,n.resize(o.width,o.height),n._load=null,n.createBitmap?r(n.process()):r(n))};o.complete&&o.src?completed():(o.onload=completed,o.onerror=function(r){i(r),n.onError.emit(r)})}))),this._load},ImageResource.prototype.process=function(){var r=this,n=this.source;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(n,0,0,n.width,n.height,{premultiplyAlpha:this.alphaMode===et.UNPACK?"premultiply":"none"}).then((function(n){return r.destroyed?Promise.reject():(r.bitmap=n,r.update(),r._process=null,Promise.resolve(r))})),this._process):Promise.resolve(this)},ImageResource.prototype.upload=function(n,i,o){if("number"==typeof this.alphaMode&&(i.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,n,i,o);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,n,i,o,this.bitmap),!this.preserveBitmap){var a=!0,s=i._glTextures;for(var h in s){var d=s[h];if(d!==o&&d.dirtyId!==i.dirtyId){a=!1;break}}a&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},ImageResource.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},ImageResource.test=function(r){return"string"==typeof r||r instanceof HTMLImageElement},ImageResource}(ve),Te=function(r){function SVGResource(n,i){var o=this;return i=i||{},(o=r.call(this,document.createElement("canvas"))||this)._width=0,o._height=0,o.svg=n,o.scale=i.scale||1,o._overrideWidth=i.width,o._overrideHeight=i.height,o._resolve=null,o._crossorigin=i.crossorigin,o._load=null,!1!==i.autoLoad&&o.load(),o}return core_es_extends(SVGResource,r),SVGResource.prototype.load=function(){var r=this;return this._load||(this._load=new Promise((function(n){if(r._resolve=function(){r.resize(r.source.width,r.source.height),n(r)},/^\<svg/.test(r.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");r.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r.svg)))}r._loadSvg()}))),this._load},SVGResource.prototype._loadSvg=function(){var r=this,n=new Image;ve.crossOrigin(n,this.svg,this._crossorigin),n.src=this.svg,n.onerror=function(i){r._resolve&&(n.onerror=null,r.onError.emit(i))},n.onload=function(){if(r._resolve){var i=n.width,o=n.height;if(!i||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=i*r.scale,s=o*r.scale;(r._overrideWidth||r._overrideHeight)&&(a=r._overrideWidth||r._overrideHeight/o*i,s=r._overrideHeight||r._overrideWidth/i*o),a=Math.round(a),s=Math.round(s);var h=r.source;h.width=a,h.height=s,h._pixiId="canvas_"+uid(),h.getContext("2d").drawImage(n,0,0,i,o,0,0,a,s),r._resolve(),r._resolve=null}}},SVGResource.getSize=function(r){var n=SVGResource.SVG_SIZE.exec(r),i={};return n&&(i[n[1]]=Math.round(parseFloat(n[3])),i[n[5]]=Math.round(parseFloat(n[7]))),i},SVGResource.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},SVGResource.test=function(r,n){return"svg"===n||"string"==typeof r&&0===r.indexOf("data:image/svg+xml;base64")||"string"==typeof r&&0===r.indexOf("<svg")},SVGResource.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,SVGResource}(ve),Se=function(r){function VideoResource(n,i){var o=this;if(i=i||{},!(n instanceof HTMLVideoElement)){var a=document.createElement("video");a.setAttribute("preload","auto"),a.setAttribute("webkit-playsinline",""),a.setAttribute("playsinline",""),"string"==typeof n&&(n=[n]);var s=n[0].src||n[0];ve.crossOrigin(a,s,i.crossorigin);for(var h=0;h<n.length;++h){var d=document.createElement("source"),f=n[h],p=f.src,y=f.mime,g=(p=p||n[h]).split("?").shift().toLowerCase(),_=g.substr(g.lastIndexOf(".")+1);y=y||VideoResource.MIME_TYPES[_]||"video/"+_,d.src=p,d.type=y,a.appendChild(d)}n=a}return(o=r.call(this,n)||this).noSubImage=!0,o._autoUpdate=!0,o._isConnectedToTicker=!1,o._updateFPS=i.updateFPS||0,o._msToNextUpdate=0,o.autoPlay=!1!==i.autoPlay,o._load=null,o._resolve=null,o._onCanPlay=o._onCanPlay.bind(o),o._onError=o._onError.bind(o),!1!==i.autoLoad&&o.load(),o}return core_es_extends(VideoResource,r),VideoResource.prototype.update=function(n){if(void 0===n&&(n=0),!this.destroyed){var i=ee.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},VideoResource.prototype.load=function(){var r=this;if(this._load)return this._load;var n=this.source;return(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0),n.addEventListener("play",this._onPlayStart.bind(this)),n.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(n.addEventListener("canplay",this._onCanPlay),n.addEventListener("canplaythrough",this._onCanPlay),n.addEventListener("error",this._onError,!0)),this._load=new Promise((function(i){r.valid?i(r):(r._resolve=i,n.load())})),this._load},VideoResource.prototype._onError=function(r){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(r)},VideoResource.prototype._isSourcePlaying=function(){var r=this.source;return r.currentTime>0&&!1===r.paused&&!1===r.ended&&r.readyState>2},VideoResource.prototype._isSourceReady=function(){var r=this.source;return 3===r.readyState||4===r.readyState},VideoResource.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(ee.shared.add(this.update,this),this._isConnectedToTicker=!0)},VideoResource.prototype._onPlayStop=function(){this._isConnectedToTicker&&(ee.shared.remove(this.update,this),this._isConnectedToTicker=!1)},VideoResource.prototype._onCanPlay=function(){var r=this.source;r.removeEventListener("canplay",this._onCanPlay),r.removeEventListener("canplaythrough",this._onCanPlay);var n=this.valid;this.resize(r.videoWidth,r.videoHeight),!n&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&r.play()},VideoResource.prototype.dispose=function(){this._isConnectedToTicker&&ee.shared.remove(this.update,this);var n=this.source;n&&(n.removeEventListener("error",this._onError,!0),n.pause(),n.src="",n.load()),r.prototype.dispose.call(this)},Object.defineProperty(VideoResource.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(ee.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(ee.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(VideoResource.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(r){r!==this._updateFPS&&(this._updateFPS=r)},enumerable:!1,configurable:!0}),VideoResource.test=function(r,n){return r instanceof HTMLVideoElement||VideoResource.TYPES.indexOf(n)>-1},VideoResource.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],VideoResource.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},VideoResource}(ve),Ee=function(r){function ImageBitmapResource(){return null!==r&&r.apply(this,arguments)||this}return core_es_extends(ImageBitmapResource,r),ImageBitmapResource.test=function(r){return!!window.createImageBitmap&&r instanceof ImageBitmap},ImageBitmapResource}(ve);le.push(xe,Ee,_e,Se,Te,fe,be,ge);var Ie={Resource:de,BaseImageResource:ve,INSTALLED:le,autoDetectResource:autoDetectResource,AbstractMultiResource:me,ArrayResource:ge,BufferResource:fe,CanvasResource:_e,CubeResource:be,ImageResource:xe,SVGResource:Te,VideoResource:Se,ImageBitmapResource:Ee},we=function(){function System(r){this.renderer=r}return System.prototype.destroy=function(){this.renderer=null},System}(),Pe=function(r){function DepthResource(){return null!==r&&r.apply(this,arguments)||this}return core_es_extends(DepthResource,r),DepthResource.prototype.upload=function(r,n,i){var o=r.gl;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===et.UNPACK),i.width===n.width&&i.height===n.height?o.texSubImage2D(n.target,0,0,0,n.width,n.height,n.format,n.type,this.data):(i.width=n.width,i.height=n.height,o.texImage2D(n.target,0,1===r.context.webGLVersion?o.DEPTH_COMPONENT:o.DEPTH_COMPONENT16,n.width,n.height,0,n.format,n.type,this.data)),!0},DepthResource}(fe),Ae=function(){function Framebuffer(r,n){this.width=Math.ceil(r||100),this.height=Math.ceil(n||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new ce("disposeFramebuffer"),this.multisample=at.NONE}return Object.defineProperty(Framebuffer.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),Framebuffer.prototype.addColorTexture=function(r,n){return void 0===r&&(r=0),this.colorTextures[r]=n||new ye(null,{scaleMode:$.NEAREST,resolution:1,mipmap:tt.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},Framebuffer.prototype.addDepthTexture=function(r){return this.depthTexture=r||new ye(new Pe(null,{width:this.width,height:this.height}),{scaleMode:$.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:tt.OFF,format:Y.DEPTH_COMPONENT,type:Z.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},Framebuffer.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},Framebuffer.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},Framebuffer.prototype.resize=function(r,n){if(r=Math.ceil(r),n=Math.ceil(n),r!==this.width||n!==this.height){this.width=r,this.height=n,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var o=this.colorTextures[i],a=o.resolution;o.setSize(r/a,n/a)}if(this.depthTexture){a=this.depthTexture.resolution;this.depthTexture.setSize(r/a,n/a)}}},Framebuffer.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Framebuffer.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},Framebuffer}(),Oe=function(r){function BaseRenderTexture(n){var i=this;if("number"==typeof n){var o=arguments[0],a=arguments[1],s=arguments[2],h=arguments[3];n={width:o,height:a,scaleMode:s,resolution:h}}i=r.call(this,null,n)||this;var d=n||{},f=d.width,p=d.height;return i.mipmap=0,i.width=Math.ceil(f)||100,i.height=Math.ceil(p)||100,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new Ae(i.width*i.resolution,i.height*i.resolution).addColorTexture(0,i),i.maskStack=[],i.filterStack=[{}],i}return core_es_extends(BaseRenderTexture,r),BaseRenderTexture.prototype.resize=function(r,n){r=Math.ceil(r),n=Math.ceil(n),this.framebuffer.resize(r*this.resolution,n*this.resolution)},BaseRenderTexture.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},BaseRenderTexture.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},BaseRenderTexture}(ye),Re=function(){function TextureUvs(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return TextureUvs.prototype.set=function(r,n,i){var o=n.width,a=n.height;if(i){var s=r.width/2/o,h=r.height/2/a,d=r.x/o+s,f=r.y/a+h;i=Wt.add(i,Wt.NW),this.x0=d+s*Wt.uX(i),this.y0=f+h*Wt.uY(i),i=Wt.add(i,2),this.x1=d+s*Wt.uX(i),this.y1=f+h*Wt.uY(i),i=Wt.add(i,2),this.x2=d+s*Wt.uX(i),this.y2=f+h*Wt.uY(i),i=Wt.add(i,2),this.x3=d+s*Wt.uX(i),this.y3=f+h*Wt.uY(i)}else this.x0=r.x/o,this.y0=r.y/a,this.x1=(r.x+r.width)/o,this.y1=r.y/a,this.x2=(r.x+r.width)/o,this.y2=(r.y+r.height)/a,this.x3=r.x/o,this.y3=(r.y+r.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},TextureUvs}(),Ce=new Re,Me=function(r){function Texture(n,i,o,a,s,h){var d=r.call(this)||this;if(d.noFrame=!1,i||(d.noFrame=!0,i=new Rt(0,0,1,1)),n instanceof Texture&&(n=n.baseTexture),d.baseTexture=n,d._frame=i,d.trim=a,d.valid=!1,d._uvs=Ce,d.uvMatrix=null,d.orig=o||i,d._rotate=Number(s||0),!0===s)d._rotate=2;else if(d._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return d.defaultAnchor=h?new Ft(h.x,h.y):new Ft(0,0),d._updateID=0,d.textureCacheIds=[],n.valid?d.noFrame?n.valid&&d.onBaseTextureUpdated(n):d.frame=i:n.once("loaded",d.onBaseTextureUpdated,d),d.noFrame&&n.on("update",d.onBaseTextureUpdated,d),d}return core_es_extends(Texture,r),Texture.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},Texture.prototype.onBaseTextureUpdated=function(r){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=r.width,this._frame.height=r.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},Texture.prototype.destroy=function(r){if(this.baseTexture){if(r){var n=this.baseTexture;n&&n.url&&xt[n.url]&&Texture.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null},Texture.prototype.clone=function(){return new Texture(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},Texture.prototype.updateUvs=function(){this._uvs===Ce&&(this._uvs=new Re),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},Texture.from=function(r,n,i){void 0===n&&(n={}),void 0===i&&(i=st.STRICT_TEXTURE_CACHE);var o="string"==typeof r,a=null;o?a=r:(r._pixiId||(r._pixiId="pixiid_"+uid()),a=r._pixiId);var s=xt[a];if(o&&i&&!s)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return s||(n.resolution||(n.resolution=getResolutionOfUrl(r)),(s=new Texture(new ye(r,n))).baseTexture.cacheId=a,ye.addToCache(s.baseTexture,a),Texture.addToCache(s,a)),s},Texture.fromURL=function(r,n){var i=Object.assign({autoLoad:!1},null==n?void 0:n.resourceOptions),o=Texture.from(r,Object.assign({resourceOptions:i},n),!1),a=o.baseTexture.resource;return o.baseTexture.valid?Promise.resolve(o):a.load().then((function(){return Promise.resolve(o)}))},Texture.fromBuffer=function(r,n,i,o){return new Texture(ye.fromBuffer(r,n,i,o))},Texture.fromLoader=function(r,n,i){var o=new xe(r);o.url=n;var a=new Texture(new ye(o,{scaleMode:st.SCALE_MODE,resolution:getResolutionOfUrl(n)}));return i||(i=n),ye.addToCache(a.baseTexture,i),Texture.addToCache(a,i),i!==n&&(ye.addToCache(a.baseTexture,n),Texture.addToCache(a,n)),a},Texture.addToCache=function(r,n){n&&(-1===r.textureCacheIds.indexOf(n)&&r.textureCacheIds.push(n),xt[n]&&console.warn("Texture added to the cache with an id ["+n+"] that already had an entry"),xt[n]=r)},Texture.removeFromCache=function(r){if("string"==typeof r){var n=xt[r];if(n){var i=n.textureCacheIds.indexOf(r);return i>-1&&n.textureCacheIds.splice(i,1),delete xt[r],n}}else if(r&&r.textureCacheIds){for(var o=0;o<r.textureCacheIds.length;++o)xt[r.textureCacheIds[o]]===r&&delete xt[r.textureCacheIds[o]];return r.textureCacheIds.length=0,r}return null},Object.defineProperty(Texture.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"frame",{get:function(){return this._frame},set:function(r){this._frame=r,this.noFrame=!1;var n=r.x,i=r.y,o=r.width,a=r.height,s=n+o>this.baseTexture.width,h=i+a>this.baseTexture.height;if(s||h){var d=s&&h?"and":"or",f="X: "+n+" + "+o+" = "+(n+o)+" > "+this.baseTexture.width,p="Y: "+i+" + "+a+" = "+(i+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+f+" "+d+" "+p)}this.valid=o&&a&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=r),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"rotate",{get:function(){return this._rotate},set:function(r){this._rotate=r,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),Texture.prototype.castToBaseTexture=function(){return this.baseTexture},Texture}(ht.a);function removeAllHandlers(r){r.destroy=function _emptyDestroy(){},r.on=function _emptyOn(){},r.once=function _emptyOnce(){},r.emit=function _emptyEmit(){}}Me.EMPTY=new Me(new ye),removeAllHandlers(Me.EMPTY),removeAllHandlers(Me.EMPTY.baseTexture),Me.WHITE=function createWhiteTexture(){var r=document.createElement("canvas");r.width=16,r.height=16;var n=r.getContext("2d");return n.fillStyle="white",n.fillRect(0,0,16,16),new Me(new ye(new _e(r)))}(),removeAllHandlers(Me.WHITE),removeAllHandlers(Me.WHITE.baseTexture);var Le=function(r){function RenderTexture(n,i){var o=this,a=null;if(!(n instanceof Oe)){var s=arguments[1],h=arguments[2],d=arguments[3],f=arguments[4];console.warn("Please use RenderTexture.create("+s+", "+h+") instead of the ctor directly."),a=arguments[0],i=null,n=new Oe({width:s,height:h,scaleMode:d,resolution:f})}return(o=r.call(this,n,i)||this).legacyRenderer=a,o.valid=!0,o.filterFrame=null,o.filterPoolKey=null,o.updateUvs(),o}return core_es_extends(RenderTexture,r),Object.defineProperty(RenderTexture.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),RenderTexture.prototype.resize=function(r,n,i){void 0===i&&(i=!0),r=Math.ceil(r),n=Math.ceil(n),this.valid=r>0&&n>0,this._frame.width=this.orig.width=r,this._frame.height=this.orig.height=n,i&&this.baseTexture.resize(r,n),this.updateUvs()},RenderTexture.prototype.setResolution=function(r){var n=this.baseTexture;n.resolution!==r&&(n.setResolution(r),this.resize(n.width,n.height,!1))},RenderTexture.create=function(r){return"number"==typeof r&&(r={width:r,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new RenderTexture(new Oe(r))},RenderTexture}(Me),De=function(){function RenderTexturePool(r){this.texturePool={},this.textureOptions=r||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return RenderTexturePool.prototype.createTexture=function(r,n){var i=new Oe(Object.assign({width:r,height:n,resolution:1},this.textureOptions));return new Le(i)},RenderTexturePool.prototype.getOptimalTexture=function(r,n,i){void 0===i&&(i=1);var o=RenderTexturePool.SCREEN_KEY;r*=i,n*=i,this.enableFullScreen&&r===this._pixelsWidth&&n===this._pixelsHeight||(o=(65535&(r=nextPow2(r)))<<16|65535&(n=nextPow2(n))),this.texturePool[o]||(this.texturePool[o]=[]);var a=this.texturePool[o].pop();return a||(a=this.createTexture(r,n)),a.filterPoolKey=o,a.setResolution(i),a},RenderTexturePool.prototype.getFilterTexture=function(r,n){var i=this.getOptimalTexture(r.width,r.height,n||r.resolution);return i.filterFrame=r.filterFrame,i},RenderTexturePool.prototype.returnTexture=function(r){var n=r.filterPoolKey;r.filterFrame=null,this.texturePool[n].push(r)},RenderTexturePool.prototype.returnFilterTexture=function(r){this.returnTexture(r)},RenderTexturePool.prototype.clear=function(r){if(r=!1!==r)for(var n in this.texturePool){var i=this.texturePool[n];if(i)for(var o=0;o<i.length;o++)i[o].destroy(!0)}this.texturePool={}},RenderTexturePool.prototype.setScreenSize=function(r){if(r.width!==this._pixelsWidth||r.height!==this._pixelsHeight){var n=RenderTexturePool.SCREEN_KEY,i=this.texturePool[n];if(this.enableFullScreen=r.width>0&&r.height>0,i)for(var o=0;o<i.length;o++)i[o].destroy(!0);this.texturePool[n]=[],this._pixelsWidth=r.width,this._pixelsHeight=r.height}},RenderTexturePool.SCREEN_KEY="screen",RenderTexturePool}(),Fe=function(){function Attribute(r,n,i,o,a,s,h){void 0===n&&(n=0),void 0===i&&(i=!1),void 0===o&&(o=5126),this.buffer=r,this.size=n,this.normalized=i,this.type=o,this.stride=a,this.start=s,this.instance=h}return Attribute.prototype.destroy=function(){this.buffer=null},Attribute.from=function(r,n,i,o,a){return new Attribute(r,n,i,o,a)},Attribute}(),Be=0,Ne=function(){function Buffer(r,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1),this.data=r||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=n,this.id=Be++,this.disposeRunner=new ce("disposeBuffer")}return Buffer.prototype.update=function(r){this.data=r||this.data,this._updateID++},Buffer.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Buffer.prototype.destroy=function(){this.dispose(),this.data=null},Buffer.from=function(r){return r instanceof Array&&(r=new Float32Array(r)),new Buffer(r)},Buffer}();function core_es_getBufferType(r){if(4===r.BYTES_PER_ELEMENT)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===r.BYTES_PER_ELEMENT){if(r instanceof Uint16Array)return"Uint16Array"}else if(1===r.BYTES_PER_ELEMENT&&r instanceof Uint8Array)return"Uint8Array";return null}var ke={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var Ue={5126:4,5123:2,5121:1},je=0,Ge={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Xe=function(){function Geometry(r,n){void 0===r&&(r=[]),void 0===n&&(n={}),this.buffers=r,this.indexBuffer=null,this.attributes=n,this.glVertexArrayObjects={},this.id=je++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new ce("disposeGeometry"),this.refCount=0}return Geometry.prototype.addAttribute=function(r,n,i,o,a,s,h,d){if(void 0===i&&(i=0),void 0===o&&(o=!1),void 0===d&&(d=!1),!n)throw new Error("You must pass a buffer when creating an attribute");n instanceof Ne||(n instanceof Array&&(n=new Float32Array(n)),n=new Ne(n));var f=r.split("|");if(f.length>1){for(var p=0;p<f.length;p++)this.addAttribute(f[p],n,i,o,a);return this}var y=this.buffers.indexOf(n);return-1===y&&(this.buffers.push(n),y=this.buffers.length-1),this.attributes[r]=new Fe(y,i,o,a,s,h,d),this.instanced=this.instanced||d,this},Geometry.prototype.getAttribute=function(r){return this.attributes[r]},Geometry.prototype.getBuffer=function(r){return this.buffers[this.getAttribute(r).buffer]},Geometry.prototype.addIndex=function(r){return r instanceof Ne||(r instanceof Array&&(r=new Uint16Array(r)),r=new Ne(r)),r.index=!0,this.indexBuffer=r,-1===this.buffers.indexOf(r)&&this.buffers.push(r),this},Geometry.prototype.getIndex=function(){return this.indexBuffer},Geometry.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var r,n=[],i=[],o=new Ne;for(r in this.attributes){var a=this.attributes[r],s=this.buffers[a.buffer];n.push(s.data),i.push(a.size*Ue[a.type]/4),a.buffer=0}for(o.data=function core_es_interleaveTypedArrays(r,n){for(var i=0,o=0,a={},s=0;s<r.length;s++)o+=n[s],i+=r[s].length;var h=new ArrayBuffer(4*i),d=null,f=0;for(s=0;s<r.length;s++){var p=n[s],y=r[s],g=core_es_getBufferType(y);a[g]||(a[g]=new ke[g](h)),d=a[g];for(var _=0;_<y.length;_++)d[(_/p|0)*o+f+_%p]=y[_];f+=p}return new Float32Array(h)}(n,i),r=0;r<this.buffers.length;r++)this.buffers[r]!==this.indexBuffer&&this.buffers[r].destroy();return this.buffers=[o],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},Geometry.prototype.getSize=function(){for(var r in this.attributes){var n=this.attributes[r];return this.buffers[n.buffer].data.length/(n.stride/4||n.size)}return 0},Geometry.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Geometry.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},Geometry.prototype.clone=function(){for(var r=new Geometry,n=0;n<this.buffers.length;n++)r.buffers[n]=new Ne(this.buffers[n].data.slice(0));for(var n in this.attributes){var i=this.attributes[n];r.attributes[n]=new Fe(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(r.indexBuffer=r.buffers[this.buffers.indexOf(this.indexBuffer)],r.indexBuffer.index=!0),r},Geometry.merge=function(r){for(var n,i=new Geometry,o=[],a=[],s=[],h=0;h<r.length;h++){n=r[h];for(var d=0;d<n.buffers.length;d++)a[d]=a[d]||0,a[d]+=n.buffers[d].data.length,s[d]=0}for(h=0;h<n.buffers.length;h++)o[h]=new(Ge[core_es_getBufferType(n.buffers[h].data)])(a[h]),i.buffers[h]=new Ne(o[h]);for(h=0;h<r.length;h++){n=r[h];for(d=0;d<n.buffers.length;d++)o[d].set(n.buffers[d].data,s[d]),s[d]+=n.buffers[d].data.length}if(i.attributes=n.attributes,n.indexBuffer){i.indexBuffer=i.buffers[n.buffers.indexOf(n.indexBuffer)],i.indexBuffer.index=!0;var f=0,p=0,y=0,g=0;for(h=0;h<n.buffers.length;h++)if(n.buffers[h]!==n.indexBuffer){g=h;break}for(var h in n.attributes){var _=n.attributes[h];(0|_.buffer)===g&&(p+=_.size*Ue[_.type]/4)}for(h=0;h<r.length;h++){var b=r[h].indexBuffer.data;for(d=0;d<b.length;d++)i.indexBuffer.data[d+y]+=f;f+=n.buffers[g].data.length/p,y+=b.length}}return i},Geometry}(),ze=function(r){function Quad(){var n=r.call(this)||this;return n.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),n}return core_es_extends(Quad,r),Quad}(Xe),He=function(r){function QuadUv(){var n=r.call(this)||this;return n.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),n.uvs=new Float32Array([0,0,1,0,1,1,0,1]),n.vertexBuffer=new Ne(n.vertices),n.uvBuffer=new Ne(n.uvs),n.addAttribute("aVertexPosition",n.vertexBuffer).addAttribute("aTextureCoord",n.uvBuffer).addIndex([0,1,2,0,2,3]),n}return core_es_extends(QuadUv,r),QuadUv.prototype.map=function(r,n){var i=0,o=0;return this.uvs[0]=i,this.uvs[1]=o,this.uvs[2]=i+n.width/r.width,this.uvs[3]=o,this.uvs[4]=i+n.width/r.width,this.uvs[5]=o+n.height/r.height,this.uvs[6]=i,this.uvs[7]=o+n.height/r.height,i=n.x,o=n.y,this.vertices[0]=i,this.vertices[1]=o,this.vertices[2]=i+n.width,this.vertices[3]=o,this.vertices[4]=i+n.width,this.vertices[5]=o+n.height,this.vertices[6]=i,this.vertices[7]=o+n.height,this.invalidate(),this},QuadUv.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},QuadUv}(Xe),We=0,Ve=function(){function UniformGroup(r,n){this.uniforms=r,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=We++,this.static=!!n}return UniformGroup.prototype.update=function(){this.dirtyId++},UniformGroup.prototype.add=function(r,n,i){this.uniforms[r]=new UniformGroup(n,i)},UniformGroup.from=function(r,n){return new UniformGroup(r,n)},UniformGroup}(),Ye=function(){function FilterState(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new Rt,this.destinationFrame=new Rt,this.filters=[]}return FilterState.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},FilterState}(),qe=function(r){function FilterSystem(n){var i=r.call(this,n)||this;return i.defaultFilterStack=[{}],i.texturePool=new De,i.texturePool.setScreenSize(n.view),i.statePool=[],i.quad=new ze,i.quadUv=new He,i.tempRect=new Rt,i.activeState={},i.globalUniforms=new Ve({outputFrame:i.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),i.forceClear=!1,i.useMaxPadding=!1,i}return core_es_extends(FilterSystem,r),FilterSystem.prototype.push=function(r,n){for(var i=this.renderer,o=this.defaultFilterStack,a=this.statePool.pop()||new Ye,s=n[0].resolution,h=n[0].padding,d=n[0].autoFit,f=n[0].legacy,p=1;p<n.length;p++){var y=n[p];s=Math.min(s,y.resolution),h=this.useMaxPadding?Math.max(h,y.padding):h+y.padding,d=d||y.autoFit,f=f||y.legacy}1===o.length&&(this.defaultFilterStack[0].renderTexture=i.renderTexture.current),o.push(a),a.resolution=s,a.legacy=f,a.target=r,a.sourceFrame.copyFrom(r.filterArea||r.getBounds(!0)),a.sourceFrame.pad(h),d&&a.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),a.sourceFrame.ceil(s),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,s),a.filters=n,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var g=this.tempRect;g.width=a.sourceFrame.width,g.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,i.renderTexture.bind(a.renderTexture,a.sourceFrame,g),i.renderTexture.clear()},FilterSystem.prototype.pop=function(){var r=this.defaultFilterStack,n=r.pop(),i=n.filters;this.activeState=n;var o=this.globalUniforms.uniforms;o.outputFrame=n.sourceFrame,o.resolution=n.resolution;var a=o.inputSize,s=o.inputPixel,h=o.inputClamp;if(a[0]=n.destinationFrame.width,a[1]=n.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],s[0]=a[0]*n.resolution,s[1]=a[1]*n.resolution,s[2]=1/s[0],s[3]=1/s[1],h[0]=.5*s[2],h[1]=.5*s[3],h[2]=n.sourceFrame.width*a[2]-.5*s[2],h[3]=n.sourceFrame.height*a[3]-.5*s[3],n.legacy){var d=o.filterArea;d[0]=n.destinationFrame.width,d[1]=n.destinationFrame.height,d[2]=n.sourceFrame.x,d[3]=n.sourceFrame.y,o.filterClamp=o.inputClamp}this.globalUniforms.update();var f=r[r.length-1];if(n.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===i.length)i[0].apply(this,n.renderTexture,f.renderTexture,rt.BLEND,n),this.returnFilterTexture(n.renderTexture);else{var p=n.renderTexture,y=this.getOptimalFilterTexture(p.width,p.height,n.resolution);y.filterFrame=p.filterFrame;var g=0;for(g=0;g<i.length-1;++g){i[g].apply(this,p,y,rt.CLEAR,n);var _=p;p=y,y=_}i[g].apply(this,p,f.renderTexture,rt.BLEND,n),this.returnFilterTexture(p),this.returnFilterTexture(y)}n.clear(),this.statePool.push(n)},FilterSystem.prototype.bindAndClear=function(r,n){if(void 0===n&&(n=rt.CLEAR),r&&r.filterFrame){var i=this.tempRect;i.width=r.filterFrame.width,i.height=r.filterFrame.height,this.renderer.renderTexture.bind(r,r.filterFrame,i)}else this.renderer.renderTexture.bind(r);"boolean"==typeof n&&(n=n?rt.CLEAR:rt.BLEND,deprecation("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(n===rt.CLEAR||n===rt.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},FilterSystem.prototype.applyFilter=function(r,n,i,o){var a=this.renderer;this.bindAndClear(i,o),r.uniforms.uSampler=n,r.uniforms.filterGlobals=this.globalUniforms,a.state.set(r.state),a.shader.bind(r),r.legacy?(this.quadUv.map(n._frame,n.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(V.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(V.TRIANGLE_STRIP))},FilterSystem.prototype.calculateSpriteMatrix=function(r,n){var i=this.activeState,o=i.sourceFrame,a=i.destinationFrame,s=n._texture.orig,h=r.set(a.width,0,0,a.height,o.x,o.y),d=n.worldTransform.copyTo(Nt.TEMP_MATRIX);return d.invert(),h.prepend(d),h.scale(1/s.width,1/s.height),h.translate(n.anchor.x,n.anchor.y),h},FilterSystem.prototype.destroy=function(){this.texturePool.clear(!1)},FilterSystem.prototype.getOptimalFilterTexture=function(r,n,i){return void 0===i&&(i=1),this.texturePool.getOptimalTexture(r,n,i)},FilterSystem.prototype.getFilterTexture=function(r,n){if("number"==typeof r){var i=r;r=n,n=i}r=r||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(r.width,r.height,n||r.resolution);return o.filterFrame=r.filterFrame,o},FilterSystem.prototype.returnFilterTexture=function(r){this.texturePool.returnTexture(r)},FilterSystem.prototype.emptyPool=function(){this.texturePool.clear(!0)},FilterSystem.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},FilterSystem}(we),Ke=function(){function ObjectRenderer(r){this.renderer=r}return ObjectRenderer.prototype.flush=function(){},ObjectRenderer.prototype.destroy=function(){this.renderer=null},ObjectRenderer.prototype.start=function(){},ObjectRenderer.prototype.stop=function(){this.flush()},ObjectRenderer.prototype.render=function(r){},ObjectRenderer}(),Ze=function(r){function BatchSystem(n){var i=r.call(this,n)||this;return i.emptyRenderer=new Ke(n),i.currentRenderer=i.emptyRenderer,i}return core_es_extends(BatchSystem,r),BatchSystem.prototype.setObjectRenderer=function(r){this.currentRenderer!==r&&(this.currentRenderer.stop(),this.currentRenderer=r,this.currentRenderer.start())},BatchSystem.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},BatchSystem.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},BatchSystem.prototype.copyBoundTextures=function(r,n){for(var i=this.renderer.texture.boundTextures,o=n-1;o>=0;--o)r[o]=i[o]||null,r[o]&&(r[o]._batchLocation=o)},BatchSystem.prototype.boundArray=function(r,n,i,o){for(var a=r.elements,s=r.ids,h=r.count,d=0,f=0;f<h;f++){var p=a[f],y=p._batchLocation;if(y>=0&&y<o&&n[y]===p)s[f]=y;else for(;d<o;){var g=n[d];if(!g||g._batchEnabled!==i||g._batchLocation!==d){s[f]=d,p._batchLocation=d,n[d]=p;break}d++}}},BatchSystem}(we),$e=0,Qe=function(r){function ContextSystem(n){var i=r.call(this,n)||this;return i.webGLVersion=1,i.extensions={},i.supports={uint32Indices:!1},i.handleContextLost=i.handleContextLost.bind(i),i.handleContextRestored=i.handleContextRestored.bind(i),n.view.addEventListener("webglcontextlost",i.handleContextLost,!1),n.view.addEventListener("webglcontextrestored",i.handleContextRestored,!1),i}return core_es_extends(ContextSystem,r),Object.defineProperty(ContextSystem.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),ContextSystem.prototype.contextChange=function(r){this.gl=r,this.renderer.gl=r,this.renderer.CONTEXT_UID=$e++,r.isContextLost()&&r.getExtension("WEBGL_lose_context")&&r.getExtension("WEBGL_lose_context").restoreContext()},ContextSystem.prototype.initFromContext=function(r){this.gl=r,this.validateContext(r),this.renderer.gl=r,this.renderer.CONTEXT_UID=$e++,this.renderer.runners.contextChange.emit(r)},ContextSystem.prototype.initFromOptions=function(r){var n=this.createContext(this.renderer.view,r);this.initFromContext(n)},ContextSystem.prototype.createContext=function(r,n){var i;if(st.PREFER_ENV>=j.WEBGL2&&(i=r.getContext("webgl2",n)),i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=r.getContext("webgl",n)||r.getContext("experimental-webgl",n)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},ContextSystem.prototype.getExtensions=function(){var r=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:r.getExtension("WEBGL_draw_buffers"),depthTexture:r.getExtension("WEBGL_depth_texture"),loseContext:r.getExtension("WEBGL_lose_context"),vertexArrayObject:r.getExtension("OES_vertex_array_object")||r.getExtension("MOZ_OES_vertex_array_object")||r.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:r.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:r.getExtension("OES_element_index_uint"),floatTexture:r.getExtension("OES_texture_float"),floatTextureLinear:r.getExtension("OES_texture_float_linear"),textureHalfFloat:r.getExtension("OES_texture_half_float"),textureHalfFloatLinear:r.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:r.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:r.getExtension("EXT_color_buffer_float"),floatTextureLinear:r.getExtension("OES_texture_float_linear")})},ContextSystem.prototype.handleContextLost=function(r){r.preventDefault()},ContextSystem.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},ContextSystem.prototype.destroy=function(){var r=this.renderer.view;r.removeEventListener("webglcontextlost",this.handleContextLost),r.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},ContextSystem.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},ContextSystem.prototype.validateContext=function(r){r.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n="WebGL2RenderingContext"in window&&r instanceof window.WebGL2RenderingContext||!!r.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},ContextSystem}(we),Je=function GLFramebuffer(r){this.framebuffer=r,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=at.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},tr=new Rt,er=function(r){function FramebufferSystem(n){var i=r.call(this,n)||this;return i.managedFramebuffers=[],i.unknownFramebuffer=new Ae(10,10),i.msaaSamples=null,i}return core_es_extends(FramebufferSystem,r),FramebufferSystem.prototype.contextChange=function(){var r=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rt,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var n=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;st.PREFER_ENV===j.WEBGL_LEGACY&&(n=null,i=null),n?r.drawBuffers=function(r){return n.drawBuffersWEBGL(r)}:(this.hasMRT=!1,r.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},FramebufferSystem.prototype.bind=function(r,n){var i=this.gl;if(r){var o=r.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(r);this.current!==r&&(this.current=r,i.bindFramebuffer(i.FRAMEBUFFER,o.framebuffer)),o.dirtyId!==r.dirtyId&&(o.dirtyId=r.dirtyId,o.dirtyFormat!==r.dirtyFormat?(o.dirtyFormat=r.dirtyFormat,this.updateFramebuffer(r)):o.dirtySize!==r.dirtySize&&(o.dirtySize=r.dirtySize,this.resizeFramebuffer(r)));for(var a=0;a<r.colorTextures.length;a++){var s=r.colorTextures[a];this.renderer.texture.unbind(s.parentTextureArray||s)}r.depthTexture&&this.renderer.texture.unbind(r.depthTexture),n?this.setViewport(n.x,n.y,n.width,n.height):this.setViewport(0,0,r.width,r.height)}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),n?this.setViewport(n.x,n.y,n.width,n.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},FramebufferSystem.prototype.setViewport=function(r,n,i,o){var a=this.viewport;a.width===i&&a.height===o&&a.x===r&&a.y===n||(a.x=r,a.y=n,a.width=i,a.height=o,this.gl.viewport(r,n,i,o))},Object.defineProperty(FramebufferSystem.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),FramebufferSystem.prototype.clear=function(r,n,i,o,a){void 0===a&&(a=H.COLOR|H.DEPTH);var s=this.gl;s.clearColor(r,n,i,o),s.clear(a)},FramebufferSystem.prototype.initFramebuffer=function(r){var n=this.gl,i=new Je(n.createFramebuffer());return i.multisample=this.detectSamples(r.multisample),r.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(r),r.disposeRunner.add(this),i},FramebufferSystem.prototype.resizeFramebuffer=function(r){var n=this.gl,i=r.glFramebuffers[this.CONTEXT_UID];i.stencil&&(n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,r.width,r.height));for(var o=r.colorTextures,a=0;a<o.length;a++)this.renderer.texture.bind(o[a],0);r.depthTexture&&this.renderer.texture.bind(r.depthTexture,0)},FramebufferSystem.prototype.updateFramebuffer=function(r){var n=this.gl,i=r.glFramebuffers[this.CONTEXT_UID],o=r.colorTextures.length;n.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&(i.msaaBuffer=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.RGBA8,r.width,r.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer));for(var a=[],s=0;s<o;s++)if(!(0===s&&i.multisample>1)){var h=r.colorTextures[s],d=h.parentTextureArray||h;this.renderer.texture.bind(d,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+s,h.target,d._glTextures[this.CONTEXT_UID].texture,0),a.push(n.COLOR_ATTACHMENT0+s)}if((a.length>1&&n.drawBuffers(a),r.depthTexture)&&this.writeDepthTexture){var f=r.depthTexture;this.renderer.texture.bind(f,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,f._glTextures[this.CONTEXT_UID].texture,0)}i.stencil||!r.stencil&&!r.depth||(i.stencil=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,r.width,r.height),r.depthTexture||n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,i.stencil))},FramebufferSystem.prototype.detectSamples=function(r){var n=this.msaaSamples,i=at.NONE;if(r<=1||null===n)return i;for(var o=0;o<n.length;o++)if(n[o]<=r){i=n[o];break}return 1===i&&(i=at.NONE),i},FramebufferSystem.prototype.blit=function(r,n,i){var o=this.current,a=this.renderer,s=this.gl,h=this.CONTEXT_UID;if(2===a.context.webGLVersion&&o){var d=o.glFramebuffers[h];if(d){if(!r){if(d.multisample<=1)return;d.blitFramebuffer||(d.blitFramebuffer=new Ae(o.width,o.height),d.blitFramebuffer.addColorTexture(0,o.colorTextures[0])),(r=d.blitFramebuffer).width=o.width,r.height=o.height}n||((n=tr).width=o.width,n.height=o.height),i||(i=n);var f=n.width===i.width&&n.height===i.height;this.bind(r),s.bindFramebuffer(s.READ_FRAMEBUFFER,d.framebuffer),s.blitFramebuffer(n.x,n.y,n.width,n.height,i.x,i.y,i.width,i.height,s.COLOR_BUFFER_BIT,f?s.NEAREST:s.LINEAR)}}},FramebufferSystem.prototype.disposeFramebuffer=function(r,n){var i=r.glFramebuffers[this.CONTEXT_UID],o=this.gl;if(i){delete r.glFramebuffers[this.CONTEXT_UID];var a=this.managedFramebuffers.indexOf(r);a>=0&&this.managedFramebuffers.splice(a,1),r.disposeRunner.remove(this),n||(o.deleteFramebuffer(i.framebuffer),i.stencil&&o.deleteRenderbuffer(i.stencil))}},FramebufferSystem.prototype.disposeAll=function(r){var n=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<n.length;i++)this.disposeFramebuffer(n[i],r)},FramebufferSystem.prototype.forceStencil=function(){var r=this.current;if(r){var n=r.glFramebuffers[this.CONTEXT_UID];if(n&&!n.stencil){r.enableStencil();var i=r.width,o=r.height,a=this.gl,s=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,s),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,i,o),n.stencil=s,a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,s)}}},FramebufferSystem.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Rt},FramebufferSystem}(we),rr=function rr(r){this.buffer=r||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},nr={5126:4,5123:2,5121:1},ir=function(r){function GeometrySystem(n){var i=r.call(this,n)||this;return i._activeGeometry=null,i._activeVao=null,i.hasVao=!0,i.hasInstance=!0,i.canUseUInt32ElementIndex=!1,i.managedGeometries={},i.managedBuffers={},i}return core_es_extends(GeometrySystem,r),GeometrySystem.prototype.contextChange=function(){this.disposeAll(!0);var r=this.gl=this.renderer.gl,n=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!r.createVertexArray){var i=this.renderer.context.extensions.vertexArrayObject;st.PREFER_ENV===j.WEBGL_LEGACY&&(i=null),i?(r.createVertexArray=function(){return i.createVertexArrayOES()},r.bindVertexArray=function(r){return i.bindVertexArrayOES(r)},r.deleteVertexArray=function(r){return i.deleteVertexArrayOES(r)}):(this.hasVao=!1,r.createVertexArray=function(){return null},r.bindVertexArray=function(){return null},r.deleteVertexArray=function(){return null})}if(!r.vertexAttribDivisor){var o=r.getExtension("ANGLE_instanced_arrays");o?(r.vertexAttribDivisor=function(r,n){return o.vertexAttribDivisorANGLE(r,n)},r.drawElementsInstanced=function(r,n,i,a,s){return o.drawElementsInstancedANGLE(r,n,i,a,s)},r.drawArraysInstanced=function(r,n,i,a){return o.drawArraysInstancedANGLE(r,n,i,a)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===n.webGLVersion||!!n.extensions.uint32ElementIndex},GeometrySystem.prototype.bind=function(r,n){n=n||this.renderer.shader.shader;var i=this.gl,o=r.glVertexArrayObjects[this.CONTEXT_UID];o||(this.managedGeometries[r.id]=r,r.disposeRunner.add(this),r.glVertexArrayObjects[this.CONTEXT_UID]=o={});var a=o[n.program.id]||this.initGeometryVao(r,n.program);this._activeGeometry=r,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(r,n.program)),this.updateBuffers()},GeometrySystem.prototype.reset=function(){this.unbind()},GeometrySystem.prototype.updateBuffers=function(){for(var r=this._activeGeometry,n=this.gl,i=0;i<r.buffers.length;i++){var o=r.buffers[i],a=o._glBuffers[this.CONTEXT_UID];if(o._updateID!==a.updateID){a.updateID=o._updateID;var s=o.index?n.ELEMENT_ARRAY_BUFFER:n.ARRAY_BUFFER;if(n.bindBuffer(s,a.buffer),this._boundBuffer=a,a.byteLength>=o.data.byteLength)n.bufferSubData(s,0,o.data);else{var h=o.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;a.byteLength=o.data.byteLength,n.bufferData(s,o.data,h)}}}},GeometrySystem.prototype.checkCompatibility=function(r,n){var i=r.attributes,o=n.attributeData;for(var a in o)if(!i[a])throw new Error('shader and geometry incompatible, geometry missing the "'+a+'" attribute')},GeometrySystem.prototype.getSignature=function(r,n){var i=r.attributes,o=n.attributeData,a=["g",r.id];for(var s in i)o[s]&&a.push(s);return a.join("-")},GeometrySystem.prototype.initGeometryVao=function(r,n){this.checkCompatibility(r,n);var i=this.gl,o=this.CONTEXT_UID,a=this.getSignature(r,n),s=r.glVertexArrayObjects[this.CONTEXT_UID],h=s[a];if(h)return s[n.id]=h,h;var d=r.buffers,f=r.attributes,p={},y={};for(var g in d)p[g]=0,y[g]=0;for(var g in f)!f[g].size&&n.attributeData[g]?f[g].size=n.attributeData[g].size:f[g].size||console.warn("PIXI Geometry attribute '"+g+"' size cannot be determined (likely the bound shader does not have the attribute)"),p[f[g].buffer]+=f[g].size*nr[f[g].type];for(var g in f){var _=f[g],b=_.size;void 0===_.stride&&(p[_.buffer]===b*nr[_.type]?_.stride=0:_.stride=p[_.buffer]),void 0===_.start&&(_.start=y[_.buffer],y[_.buffer]+=b*nr[_.type])}h=i.createVertexArray(),i.bindVertexArray(h);for(var x=0;x<d.length;x++){var T=d[x];T._glBuffers[o]||(T._glBuffers[o]=new rr(i.createBuffer()),this.managedBuffers[T.id]=T,T.disposeRunner.add(this)),T._glBuffers[o].refCount++}return this.activateVao(r,n),this._activeVao=h,s[n.id]=h,s[a]=h,h},GeometrySystem.prototype.disposeBuffer=function(r,n){if(this.managedBuffers[r.id]){delete this.managedBuffers[r.id];var i=r._glBuffers[this.CONTEXT_UID],o=this.gl;r.disposeRunner.remove(this),i&&(n||o.deleteBuffer(i.buffer),delete r._glBuffers[this.CONTEXT_UID])}},GeometrySystem.prototype.disposeGeometry=function(r,n){if(this.managedGeometries[r.id]){delete this.managedGeometries[r.id];var i=r.glVertexArrayObjects[this.CONTEXT_UID],o=this.gl,a=r.buffers;if(r.disposeRunner.remove(this),i){for(var s=0;s<a.length;s++){var h=a[s]._glBuffers[this.CONTEXT_UID];h.refCount--,0!==h.refCount||n||this.disposeBuffer(a[s],n)}if(!n)for(var d in i)if("g"===d[0]){var f=i[d];this._activeVao===f&&this.unbind(),o.deleteVertexArray(f)}delete r.glVertexArrayObjects[this.CONTEXT_UID]}}},GeometrySystem.prototype.disposeAll=function(r){for(var n=Object.keys(this.managedGeometries),i=0;i<n.length;i++)this.disposeGeometry(this.managedGeometries[n[i]],r);n=Object.keys(this.managedBuffers);for(i=0;i<n.length;i++)this.disposeBuffer(this.managedBuffers[n[i]],r)},GeometrySystem.prototype.activateVao=function(r,n){var i=this.gl,o=this.CONTEXT_UID,a=r.buffers,s=r.attributes;r.indexBuffer&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r.indexBuffer._glBuffers[o].buffer);var h=null;for(var d in s){var f=s[d],p=a[f.buffer]._glBuffers[o];if(n.attributeData[d]){h!==p&&(i.bindBuffer(i.ARRAY_BUFFER,p.buffer),h=p);var y=n.attributeData[d].location;if(i.enableVertexAttribArray(y),i.vertexAttribPointer(y,f.size,f.type||i.FLOAT,f.normalized,f.stride,f.start),f.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(y,1)}}}},GeometrySystem.prototype.draw=function(r,n,i,o){var a=this.gl,s=this._activeGeometry;if(s.indexBuffer){var h=s.indexBuffer.data.BYTES_PER_ELEMENT,d=2===h?a.UNSIGNED_SHORT:a.UNSIGNED_INT;2===h||4===h&&this.canUseUInt32ElementIndex?s.instanced?a.drawElementsInstanced(r,n||s.indexBuffer.data.length,d,(i||0)*h,o||1):a.drawElements(r,n||s.indexBuffer.data.length,d,(i||0)*h):console.warn("unsupported index buffer type: uint32")}else s.instanced?a.drawArraysInstanced(r,i,n||s.getSize(),o||1):a.drawArrays(r,i,n||s.getSize());return this},GeometrySystem.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},GeometrySystem}(we),or=function(){function MaskData(r){void 0===r&&(r=null),this.type=ot.NONE,this.autoDetect=!0,this.maskObject=r||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return MaskData.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=ot.NONE,this.autoDetect=!0),this._target=null},MaskData.prototype.copyCountersOrReset=function(r){r?(this._stencilCounter=r._stencilCounter,this._scissorCounter=r._scissorCounter,this._scissorRect=r._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},MaskData}();function compileShader(r,n,i){var o=r.createShader(n);return r.shaderSource(o,i),r.compileShader(o),o}function compileProgram(r,n,i,o){var a=compileShader(r,r.VERTEX_SHADER,n),s=compileShader(r,r.FRAGMENT_SHADER,i),h=r.createProgram();if(r.attachShader(h,a),r.attachShader(h,s),o)for(var d in o)r.bindAttribLocation(h,o[d],d);return r.linkProgram(h),r.getProgramParameter(h,r.LINK_STATUS)||(r.getShaderParameter(a,r.COMPILE_STATUS)||(console.warn(n),console.error(r.getShaderInfoLog(a))),r.getShaderParameter(s,r.COMPILE_STATUS)||(console.warn(i),console.error(r.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",r.getProgramParameter(h,r.VALIDATE_STATUS)),console.error("gl.getError()",r.getError()),""!==r.getProgramInfoLog(h)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(h)),r.deleteProgram(h),h=null),r.deleteShader(a),r.deleteShader(s),h}function booleanArray(r){for(var n=new Array(r),i=0;i<n.length;i++)n[i]=!1;return n}function core_es_defaultValue(r,n){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*n);case"vec3":return new Float32Array(3*n);case"vec4":return new Float32Array(4*n);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*n);case"ivec3":return new Int32Array(3*n);case"ivec4":return new Int32Array(4*n);case"bool":return!1;case"bvec2":return booleanArray(2*n);case"bvec3":return booleanArray(3*n);case"bvec4":return booleanArray(4*n);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var ar,sr={},ur=sr;function getTestContext(){if(ur===sr||ur&&ur.isContextLost()){var r=document.createElement("canvas"),n=void 0;st.PREFER_ENV>=j.WEBGL2&&(n=r.getContext("webgl2",{})),n||((n=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}))?n.getExtension("WEBGL_draw_buffers"):n=null),ur=n}return ur}function setPrecision(r,n,i){if("precision"!==r.substring(0,9)){var o=n;return n===it.HIGH&&i!==it.HIGH&&(o=it.MEDIUM),"precision "+o+" float;\n"+r}return i!==it.HIGH&&"precision highp"===r.substring(0,15)?r.replace("precision highp","precision mediump"):r}var hr={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(r){return hr[r]}var cr=null,lr={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(r,n){if(!cr){var i=Object.keys(lr);cr={};for(var o=0;o<i.length;++o){var a=i[o];cr[r[a]]=lr[a]}}return cr[n]}var dr=[{test:function(r){return"float"===r.type&&1===r.size},code:function(r){return'\n            if(uv["'+r+'"] !== ud["'+r+'"].value)\n            {\n                ud["'+r+'"].value = uv["'+r+'"]\n                gl.uniform1f(ud["'+r+'"].location, uv["'+r+'"])\n            }\n            '}},{test:function(r){return("sampler2D"===r.type||"samplerCube"===r.type||"sampler2DArray"===r.type)&&1===r.size&&!r.isArray},code:function(r){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+r+'"], t);\n\n            if(ud["'+r+'"].value !== t)\n            {\n                ud["'+r+'"].value = t;\n                gl.uniform1i(ud["'+r+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(r,n){return"mat3"===r.type&&1===r.size&&void 0!==n.a},code:function(r){return'\n            gl.uniformMatrix3fv(ud["'+r+'"].location, false, uv["'+r+'"].toArray(true));\n            '}},{test:function(r,n){return"vec2"===r.type&&1===r.size&&void 0!==n.x},code:function(r){return'\n                cv = ud["'+r+'"].value;\n                v = uv["'+r+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+r+'"].location, v.x, v.y);\n                }'}},{test:function(r){return"vec2"===r.type&&1===r.size},code:function(r){return'\n                cv = ud["'+r+'"].value;\n                v = uv["'+r+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+r+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(r,n){return"vec4"===r.type&&1===r.size&&void 0!==n.width},code:function(r){return'\n                cv = ud["'+r+'"].value;\n                v = uv["'+r+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+r+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(r){return"vec4"===r.type&&1===r.size},code:function(r){return'\n                cv = ud["'+r+'"].value;\n                v = uv["'+r+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+r+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],fr={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},pr={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var yr,mr=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function generateIfTestSrc(r){for(var n="",i=0;i<r;++i)i>0&&(n+="\nelse "),i<r-1&&(n+="if(test == "+i+".0){}");return n}function checkMaxIfStatementsInShader(r,n){if(0===r)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=n.createShader(n.FRAGMENT_SHADER);;){var o=mr.replace(/%forloop%/gi,generateIfTestSrc(r));if(n.shaderSource(i,o),n.compileShader(i),n.getShaderParameter(i,n.COMPILE_STATUS))break;r=r/2|0}return r}var gr=0,vr={},_r=function(){function Program(r,n,i){void 0===i&&(i="pixi-shader"),this.id=gr++,this.vertexSrc=r||Program.defaultVertexSrc,this.fragmentSrc=n||Program.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(i=i.replace(/\s+/g,"-"),vr[i]?(vr[i]++,i+="-"+vr[i]):vr[i]=1,this.vertexSrc="#define SHADER_NAME "+i+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+"\n"+this.fragmentSrc,this.vertexSrc=setPrecision(this.vertexSrc,st.PRECISION_VERTEX,it.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,st.PRECISION_FRAGMENT,function getMaxFragmentPrecision(){if(!ar){ar=it.MEDIUM;var r=getTestContext();if(r&&r.getShaderPrecisionFormat){var n=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);ar=n.precision?it.HIGH:it.MEDIUM}}return ar}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return Program.prototype.extractData=function(r,n){var i=getTestContext();if(i){var o=compileProgram(i,r,n);this.attributeData=this.getAttributeData(o,i),this.uniformData=this.getUniformData(o,i),i.deleteProgram(o)}else this.uniformData={},this.attributeData={}},Program.prototype.getAttributeData=function(r,n){for(var i={},o=[],a=n.getProgramParameter(r,n.ACTIVE_ATTRIBUTES),s=0;s<a;s++){var h=n.getActiveAttrib(r,s),d=mapType(n,h.type),f={type:d,name:h.name,size:mapSize(d),location:0};i[h.name]=f,o.push(f)}o.sort((function(r,n){return r.name>n.name?1:-1}));for(s=0;s<o.length;s++)o[s].location=s;return i},Program.prototype.getUniformData=function(r,n){for(var i={},o=n.getProgramParameter(r,n.ACTIVE_UNIFORMS),a=0;a<o;a++){var s=n.getActiveUniform(r,a),h=s.name.replace(/\[.*?\]$/,""),d=s.name.match(/\[.*?\]$/),f=mapType(n,s.type);i[h]={type:f,size:s.size,isArray:d,value:core_es_defaultValue(f,s.size)}}return i},Object.defineProperty(Program,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(Program,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),Program.from=function(r,n,i){var o=r+n,a=bt[o];return a||(bt[o]=a=new Program(r,n,i)),a},Program}(),br=function(){function Shader(r,n){for(var i in this.program=r,this.uniformGroup=n?n instanceof Ve?n:new Ve(n):new Ve({}),r.uniformData)this.uniformGroup.uniforms[i]instanceof Array&&(this.uniformGroup.uniforms[i]=new Float32Array(this.uniformGroup.uniforms[i]))}return Shader.prototype.checkUniformExists=function(r,n){if(n.uniforms[r])return!0;for(var i in n.uniforms){var o=n.uniforms[i];if(o.group&&this.checkUniformExists(r,o))return!0}return!1},Shader.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(Shader.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),Shader.from=function(r,n,i){return new Shader(_r.from(r,n),i)},Shader}(),xr=function(){function State(){this.data=0,this.blendMode=W.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(State.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(r){!!(1&this.data)!==r&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(r){!!(2&this.data)!==r&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(r){!!(4&this.data)!==r&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(r){!!(8&this.data)!==r&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(r){!!(16&this.data)!==r&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"blendMode",{get:function(){return this._blendMode},set:function(r){this.blend=r!==W.NONE,this._blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(r){this.offsets=!!r,this._polygonOffset=r},enumerable:!1,configurable:!0}),State.for2d=function(){var r=new State;return r.depthTest=!1,r.blend=!0,r},State}(),Tr=function(r){function Filter(n,i,o){var a=this,s=_r.from(n||Filter.defaultVertexSrc,i||Filter.defaultFragmentSrc);return(a=r.call(this,s,o)||this).padding=0,a.resolution=st.FILTER_RESOLUTION,a.enabled=!0,a.autoFit=!0,a.legacy=!!a.program.attributeData.aTextureCoord,a.state=new xr,a}return core_es_extends(Filter,r),Filter.prototype.apply=function(r,n,i,o,a){r.applyFilter(this,n,i,o)},Object.defineProperty(Filter.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(Filter,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(Filter,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),Filter}(br),Sr=new Nt,Er=function(){function TextureMatrix(r,n){this._texture=r,this.mapCoord=new Nt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===n?.5:n,this.isSimple=!1}return Object.defineProperty(TextureMatrix.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture=r,this._textureID=-1},enumerable:!1,configurable:!0}),TextureMatrix.prototype.multiplyUvs=function(r,n){void 0===n&&(n=r);for(var i=this.mapCoord,o=0;o<r.length;o+=2){var a=r[o],s=r[o+1];n[o]=a*i.a+s*i.c+i.tx,n[o+1]=a*i.b+s*i.d+i.ty}return n},TextureMatrix.prototype.update=function(r){var n=this._texture;if(!n||!n.valid)return!1;if(!r&&this._textureID===n._updateID)return!1;this._textureID=n._updateID,this._updateID++;var i=n._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var o=n.orig,a=n.trim;a&&(Sr.set(o.width/a.width,0,0,o.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(Sr));var s=n.baseTexture,h=this.uClampFrame,d=this.clampMargin/s.resolution,f=this.clampOffset;return h[0]=(n._frame.x+d+f)/s.width,h[1]=(n._frame.y+d+f)/s.height,h[2]=(n._frame.x+n._frame.width-d+f)/s.width,h[3]=(n._frame.y+n._frame.height-d+f)/s.height,this.uClampOffset[0]=f/s.realWidth,this.uClampOffset[1]=f/s.realHeight,this.isSimple=n._frame.width===s.width&&n._frame.height===s.height&&0===n.rotate,!0},TextureMatrix}(),Ir=function(r){function SpriteMaskFilter(n){var i=this,o=new Nt;return i=r.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this,n.renderable=!1,i.maskSprite=n,i.maskMatrix=o,i}return core_es_extends(SpriteMaskFilter,r),SpriteMaskFilter.prototype.apply=function(r,n,i,o){var a=this.maskSprite,s=a._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new Er(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=r.calculateSpriteMatrix(this.maskMatrix,a).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,r.applyFilter(this,n,i,o))},SpriteMaskFilter}(Tr),wr=function(r){function MaskSystem(n){var i=r.call(this,n)||this;return i.enableScissor=!1,i.alphaMaskPool=[],i.maskDataPool=[],i.maskStack=[],i.alphaMaskIndex=0,i}return core_es_extends(MaskSystem,r),MaskSystem.prototype.setMaskStack=function(r){this.maskStack=r,this.renderer.scissor.setMaskStack(r),this.renderer.stencil.setMaskStack(r)},MaskSystem.prototype.push=function(r,n){var i=n;if(!i.isMaskData){var o=this.maskDataPool.pop()||new or;o.pooled=!0,o.maskObject=n,i=o}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=r,i.type){case ot.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case ot.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case ot.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}},MaskSystem.prototype.pop=function(r){var n=this.maskStack.pop();if(n&&n._target===r){switch(n.type){case ot.SCISSOR:this.renderer.scissor.pop();break;case ot.STENCIL:this.renderer.stencil.pop(n.maskObject);break;case ot.SPRITE:this.popSpriteMask()}n.reset(),n.pooled&&this.maskDataPool.push(n)}},MaskSystem.prototype.detect=function(r){var n=r.maskObject;if(n.isSprite)r.type=ot.SPRITE;else if(r.type=ot.STENCIL,this.enableScissor&&n.isFastRect&&n.isFastRect()){var i=n.worldTransform,o=Math.atan2(i.b,i.a),a=Math.atan2(i.d,i.c);o=Math.round(o*(180/Math.PI)*100),a=((a=Math.round(a*(180/Math.PI)*100)-o)%18e3+18e3)%18e3,0===(o=(o%9e3+9e3)%9e3)&&9e3===a&&(r.type=ot.SCISSOR)}},MaskSystem.prototype.pushSpriteMask=function(r){var n=r.maskObject,i=r._target,o=this.alphaMaskPool[this.alphaMaskIndex];o||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new Ir(n)]),o[0].resolution=this.renderer.resolution,o[0].maskSprite=n;var a=i.filterArea;i.filterArea=n.getBounds(!0),this.renderer.filter.push(i,o),i.filterArea=a,this.alphaMaskIndex++},MaskSystem.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},MaskSystem}(we),Pr=function(r){function AbstractMaskSystem(n){var i=r.call(this,n)||this;return i.maskStack=[],i.glConst=0,i}return core_es_extends(AbstractMaskSystem,r),AbstractMaskSystem.prototype.getStackLength=function(){return this.maskStack.length},AbstractMaskSystem.prototype.setMaskStack=function(r){var n=this.renderer.gl,i=this.getStackLength();this.maskStack=r;var o=this.getStackLength();o!==i&&(0===o?n.disable(this.glConst):(n.enable(this.glConst),this._useCurrent()))},AbstractMaskSystem.prototype._useCurrent=function(){},AbstractMaskSystem.prototype.destroy=function(){r.prototype.destroy.call(this),this.maskStack=null},AbstractMaskSystem}(we),Ar=function(r){function ScissorSystem(n){var i=r.call(this,n)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return core_es_extends(ScissorSystem,r),ScissorSystem.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._scissorCounter:0},ScissorSystem.prototype.push=function(r){var n=r.maskObject;n.renderable=!0;var i=r._scissorRect,o=n.getBounds(!0),a=this.renderer.gl;n.renderable=!1,i?o.fit(i):a.enable(a.SCISSOR_TEST),r._scissorCounter++,r._scissorRect=o,this._useCurrent()},ScissorSystem.prototype.pop=function(){var r=this.renderer.gl;this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)},ScissorSystem.prototype._useCurrent=function(){var r=this.maskStack[this.maskStack.length-1]._scissorRect,n=this.renderer.renderTexture.current,i=this.renderer.projection,o=i.transform,a=i.sourceFrame,s=i.destinationFrame,h=n?n.resolution:this.renderer.resolution,d=(r.x-a.x)*h+s.x,f=(r.y-a.y)*h+s.y,p=r.width*h,y=r.height*h;o&&(d+=o.tx*h,f+=o.ty*h),n||(f=this.renderer.height-y-f),this.renderer.gl.scissor(d,f,p,y)},ScissorSystem}(Pr),Or=function(r){function StencilSystem(n){var i=r.call(this,n)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return core_es_extends(StencilSystem,r),StencilSystem.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._stencilCounter:0},StencilSystem.prototype.push=function(r){var n=r.maskObject,i=this.renderer.gl,o=r._stencilCounter;0===o&&(this.renderer.framebuffer.forceStencil(),i.enable(i.STENCIL_TEST)),r._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,o,this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,this._useCurrent()},StencilSystem.prototype.pop=function(r){var n=this.renderer.gl;0===this.getStackLength()?(n.disable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),n.clearStencil(0)):(n.colorMask(!1,!1,!1,!1),n.stencilOp(n.KEEP,n.KEEP,n.DECR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,this._useCurrent())},StencilSystem.prototype._useCurrent=function(){var r=this.renderer.gl;r.colorMask(!0,!0,!0,!0),r.stencilFunc(r.EQUAL,this.getStackLength(),this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)},StencilSystem.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},StencilSystem}(Pr),Rr=function(r){function ProjectionSystem(n){var i=r.call(this,n)||this;return i.destinationFrame=null,i.sourceFrame=null,i.defaultFrame=null,i.projectionMatrix=new Nt,i.transform=null,i}return core_es_extends(ProjectionSystem,r),ProjectionSystem.prototype.update=function(r,n,i,o){this.destinationFrame=r||this.destinationFrame||this.defaultFrame,this.sourceFrame=n||this.sourceFrame||r,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,o),this.transform&&this.projectionMatrix.append(this.transform);var a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)},ProjectionSystem.prototype.calculateProjection=function(r,n,i,o){var a=this.projectionMatrix,s=o?-1:1;a.identity(),a.a=1/n.width*2,a.d=s*(1/n.height*2),a.tx=-1-n.x*a.a,a.ty=-s-n.y*a.d},ProjectionSystem.prototype.setTransform=function(r){},ProjectionSystem}(we),Cr=new Rt,Mr=new Rt,Lr=new Rt,Dr=function(r){function RenderTextureSystem(n){var i=r.call(this,n)||this;return i.clearColor=n._backgroundColorRgba,i.defaultMaskStack=[],i.current=null,i.sourceFrame=new Rt,i.destinationFrame=new Rt,i}return core_es_extends(RenderTextureSystem,r),RenderTextureSystem.prototype.bind=function(r,n,i){void 0===r&&(r=null);var o,a,s,h=this.renderer;this.current=r,r?(s=(o=r.baseTexture).resolution,n||(Cr.width=r.frame.width,Cr.height=r.frame.height,n=Cr),i||(Mr.x=r.frame.x,Mr.y=r.frame.y,Mr.width=n.width,Mr.height=n.height,i=Mr),a=o.framebuffer):(s=h.resolution,n||(Cr.width=h.screen.width,Cr.height=h.screen.height,n=Cr),i||((i=Cr).width=n.width,i.height=n.height)),Lr.x=i.x*s,Lr.y=i.y*s,Lr.width=i.width*s,Lr.height=i.height*s,this.renderer.framebuffer.bind(a,Lr),this.renderer.projection.update(i,n,s,!a),r?this.renderer.mask.setMaskStack(o.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(n),this.destinationFrame.copyFrom(i)},RenderTextureSystem.prototype.clear=function(r,n){r=this.current?r||this.current.baseTexture.clearColor:r||this.clearColor,this.renderer.framebuffer.clear(r[0],r[1],r[2],r[3],n)},RenderTextureSystem.prototype.resize=function(){this.bind(null)},RenderTextureSystem.prototype.reset=function(){this.bind(null)},RenderTextureSystem}(we),Fr=function Fr(){},Br=function(){function GLProgram(r,n){this.program=r,this.uniformData=n,this.uniformGroups={}}return GLProgram.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},GLProgram}(),Nr=0,kr={textureCount:0},Ur=function(r){function ShaderSystem(n){var i=r.call(this,n)||this;return i.destroyed=!1,i.systemCheck(),i.gl=null,i.shader=null,i.program=null,i.cache={},i.id=Nr++,i}return core_es_extends(ShaderSystem,r),ShaderSystem.prototype.systemCheck=function(){if(!function unsafeEvalSupported(){if("boolean"==typeof yr)return yr;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");yr=!0===r({a:"b"},"a","b")}catch(r){yr=!1}return yr}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},ShaderSystem.prototype.contextChange=function(r){this.gl=r,this.reset()},ShaderSystem.prototype.bind=function(r,n){r.uniforms.globals=this.renderer.globalUniforms;var i=r.program,o=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(r);return this.shader=r,this.program!==i&&(this.program=i,this.gl.useProgram(o.program)),n||(kr.textureCount=0,this.syncUniformGroup(r.uniformGroup,kr)),o},ShaderSystem.prototype.setUniforms=function(r){var n=this.shader.program,i=n.glPrograms[this.renderer.CONTEXT_UID];n.syncUniforms(i.uniformData,r,this.renderer)},ShaderSystem.prototype.syncUniformGroup=function(r,n){var i=this.getglProgram();r.static&&r.dirtyId===i.uniformGroups[r.id]||(i.uniformGroups[r.id]=r.dirtyId,this.syncUniforms(r,i,n))},ShaderSystem.prototype.syncUniforms=function(r,n,i){(r.syncUniforms[this.shader.program.id]||this.createSyncGroups(r))(n.uniformData,r.uniforms,this.renderer,i)},ShaderSystem.prototype.createSyncGroups=function(r){var n=this.getSignature(r,this.shader.program.uniformData);return this.cache[n]||(this.cache[n]=function generateUniformsSync(r,n){var i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var o in r.uniforms){var a=n[o];if(a){for(var s=r.uniforms[o],h=!1,d=0;d<dr.length;d++)if(dr[d].test(a,s)){i.push(dr[d].code(o,s)),h=!0;break}if(!h){var f=(1===a.size?fr:pr)[a.type].replace("location",'ud["'+o+'"].location');i.push('\n            cv = ud["'+o+'"].value;\n            v = uv["'+o+'"];\n            '+f+";")}}else r.uniforms[o].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+o+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(r,this.shader.program.uniformData)),r.syncUniforms[this.shader.program.id]=this.cache[n],r.syncUniforms[this.shader.program.id]},ShaderSystem.prototype.getSignature=function(r,n){var i=r.uniforms,o=[];for(var a in i)o.push(a),n[a]&&o.push(n[a].type);return o.join("-")},ShaderSystem.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},ShaderSystem.prototype.generateShader=function(r){var n=this.gl,i=r.program,o={};for(var a in i.attributeData)o[a]=i.attributeData[a].location;var s=compileProgram(n,i.vertexSrc,i.fragmentSrc,o),h={};for(var a in i.uniformData){var d=i.uniformData[a];h[a]={location:n.getUniformLocation(s,a),value:core_es_defaultValue(d.type,d.size)}}var f=new Br(s,h);return i.glPrograms[this.renderer.CONTEXT_UID]=f,f},ShaderSystem.prototype.reset=function(){this.program=null,this.shader=null},ShaderSystem.prototype.destroy=function(){this.destroyed=!0},ShaderSystem}(we);var jr=function(r){function StateSystem(n){var i=r.call(this,n)||this;return i.gl=null,i.stateId=0,i.polygonOffset=0,i.blendMode=W.NONE,i._blendEq=!1,i.map=[],i.map[0]=i.setBlend,i.map[1]=i.setOffset,i.map[2]=i.setCullFace,i.map[3]=i.setDepthTest,i.map[4]=i.setFrontFace,i.checks=[],i.defaultState=new xr,i.defaultState.blend=!0,i}return core_es_extends(StateSystem,r),StateSystem.prototype.contextChange=function(r){this.gl=r,this.blendModes=function mapWebGLBlendModesToPixi(r,n){return void 0===n&&(n=[]),n[W.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],n[W.ADD]=[r.ONE,r.ONE],n[W.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],n[W.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],n[W.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],n[W.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],n[W.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],n[W.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],n[W.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],n[W.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],n[W.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],n[W.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],n[W.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],n[W.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],n[W.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],n[W.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],n[W.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],n[W.NONE]=[0,0],n[W.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],n[W.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],n[W.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],n[W.SRC_IN]=[r.DST_ALPHA,r.ZERO],n[W.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],n[W.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],n[W.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],n[W.DST_IN]=[r.ZERO,r.SRC_ALPHA],n[W.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],n[W.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],n[W.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],n[W.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],n}(r),this.set(this.defaultState),this.reset()},StateSystem.prototype.set=function(r){if(r=r||this.defaultState,this.stateId!==r.data){for(var n=this.stateId^r.data,i=0;n;)1&n&&this.map[i].call(this,!!(r.data&1<<i)),n>>=1,i++;this.stateId=r.data}for(i=0;i<this.checks.length;i++)this.checks[i](this,r)},StateSystem.prototype.forceState=function(r){r=r||this.defaultState;for(var n=0;n<this.map.length;n++)this.map[n].call(this,!!(r.data&1<<n));for(n=0;n<this.checks.length;n++)this.checks[n](this,r);this.stateId=r.data},StateSystem.prototype.setBlend=function(r){this.updateCheck(StateSystem.checkBlendMode,r),this.gl[r?"enable":"disable"](this.gl.BLEND)},StateSystem.prototype.setOffset=function(r){this.updateCheck(StateSystem.checkPolygonOffset,r),this.gl[r?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},StateSystem.prototype.setDepthTest=function(r){this.gl[r?"enable":"disable"](this.gl.DEPTH_TEST)},StateSystem.prototype.setCullFace=function(r){this.gl[r?"enable":"disable"](this.gl.CULL_FACE)},StateSystem.prototype.setFrontFace=function(r){this.gl.frontFace(this.gl[r?"CW":"CCW"])},StateSystem.prototype.setBlendMode=function(r){if(r!==this.blendMode){this.blendMode=r;var n=this.blendModes[r],i=this.gl;2===n.length?i.blendFunc(n[0],n[1]):i.blendFuncSeparate(n[0],n[1],n[2],n[3]),6===n.length?(this._blendEq=!0,i.blendEquationSeparate(n[4],n[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},StateSystem.prototype.setPolygonOffset=function(r,n){this.gl.polygonOffset(r,n)},StateSystem.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},StateSystem.prototype.updateCheck=function(r,n){var i=this.checks.indexOf(r);n&&-1===i?this.checks.push(r):n||-1===i||this.checks.splice(i,1)},StateSystem.checkBlendMode=function(r,n){r.setBlendMode(n.blendMode)},StateSystem.checkPolygonOffset=function(r,n){r.setPolygonOffset(1,n.polygonOffset)},StateSystem}(we),Gr=function(r){function TextureGCSystem(n){var i=r.call(this,n)||this;return i.count=0,i.checkCount=0,i.maxIdle=st.GC_MAX_IDLE,i.checkCountMax=st.GC_MAX_CHECK_COUNT,i.mode=st.GC_MODE,i}return core_es_extends(TextureGCSystem,r),TextureGCSystem.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==nt.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},TextureGCSystem.prototype.run=function(){for(var r=this.renderer.texture,n=r.managedTextures,i=!1,o=0;o<n.length;o++){var a=n[o];!a.framebuffer&&this.count-a.touched>this.maxIdle&&(r.destroyTexture(a,!0),n[o]=null,i=!0)}if(i){var s=0;for(o=0;o<n.length;o++)null!==n[o]&&(n[s++]=n[o]);n.length=s}},TextureGCSystem.prototype.unload=function(r){var n,i=this.renderer.texture;(null===(n=r._texture)||void 0===n?void 0:n.framebuffer)&&i.destroyTexture(r._texture);for(var o=r.children.length-1;o>=0;o--)this.unload(r.children[o])},TextureGCSystem}(we),Xr=function Xr(r){this.texture=r,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},zr=function(r){function TextureSystem(n){var i=r.call(this,n)||this;return i.boundTextures=[],i.currentLocation=-1,i.managedTextures=[],i._unknownBoundTextures=!1,i.unknownTexture=new ye,i}return core_es_extends(TextureSystem,r),TextureSystem.prototype.contextChange=function(){var r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var n=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=n;for(var i=0;i<n;i++)this.boundTextures[i]=null;this.emptyTextures={};var o=new Xr(r.createTexture());r.bindTexture(r.TEXTURE_2D,o.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[r.TEXTURE_2D]=o,this.emptyTextures[r.TEXTURE_CUBE_MAP]=new Xr(r.createTexture()),r.bindTexture(r.TEXTURE_CUBE_MAP,this.emptyTextures[r.TEXTURE_CUBE_MAP].texture);for(i=0;i<6;i++)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,null);r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,r.LINEAR);for(i=0;i<this.boundTextures.length;i++)this.bind(null,i)},TextureSystem.prototype.bind=function(r,n){void 0===n&&(n=0);var i=this.gl;if(r){if((r=r.castToBaseTexture()).parentTextureArray)return;if(r.valid){r.touched=this.renderer.textureGC.count;var o=r._glTextures[this.CONTEXT_UID]||this.initTexture(r);this.boundTextures[n]!==r&&(this.currentLocation!==n&&(this.currentLocation=n,i.activeTexture(i.TEXTURE0+n)),i.bindTexture(r.target,o.texture)),o.dirtyId!==r.dirtyId&&(this.currentLocation!==n&&(this.currentLocation=n,i.activeTexture(i.TEXTURE0+n)),this.updateTexture(r)),this.boundTextures[n]=r}}else this.currentLocation!==n&&(this.currentLocation=n,i.activeTexture(i.TEXTURE0+n)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[n]=null},TextureSystem.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]=this.unknownTexture},TextureSystem.prototype.unbind=function(r){var n=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var o=0;o<i.length;o++)i[o]===this.unknownTexture&&this.bind(null,o)}for(o=0;o<i.length;o++)i[o]===r&&(this.currentLocation!==o&&(n.activeTexture(n.TEXTURE0+o),this.currentLocation=o),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[r.target].texture),i[o]=null)},TextureSystem.prototype.initTexture=function(r){var n=new Xr(this.gl.createTexture());return n.dirtyId=-1,r._glTextures[this.CONTEXT_UID]=n,this.managedTextures.push(r),r.on("dispose",this.destroyTexture,this),n},TextureSystem.prototype.initTextureType=function(r,n){if(n.internalFormat=r.format,n.type=r.type,2===this.webGLVersion){var i=this.renderer.gl;r.type===i.FLOAT&&r.format===i.RGBA&&(n.internalFormat=i.RGBA32F),r.type===Z.HALF_FLOAT&&(n.type=i.HALF_FLOAT),n.type===i.HALF_FLOAT&&r.format===i.RGBA&&(n.internalFormat=i.RGBA16F)}},TextureSystem.prototype.updateTexture=function(r){var n=r._glTextures[this.CONTEXT_UID];if(n){var i=this.renderer;if(this.initTextureType(r,n),r.resource&&r.resource.upload(i,r,n));else{var o=r.realWidth,a=r.realHeight,s=i.gl;(n.width!==o||n.height!==a||n.dirtyId<0)&&(n.width=o,n.height=a,s.texImage2D(r.target,0,n.internalFormat,o,a,0,r.format,n.type,null))}r.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(r),n.dirtyId=r.dirtyId}},TextureSystem.prototype.destroyTexture=function(r,n){var i=this.gl;if((r=r.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(r),i.deleteTexture(r._glTextures[this.CONTEXT_UID].texture),r.off("dispose",this.destroyTexture,this),delete r._glTextures[this.CONTEXT_UID],!n)){var o=this.managedTextures.indexOf(r);-1!==o&&removeItems(this.managedTextures,o,1)}},TextureSystem.prototype.updateTextureStyle=function(r){var n=r._glTextures[this.CONTEXT_UID];n&&(r.mipmap!==tt.POW2&&2===this.webGLVersion||r.isPowerOfTwo?n.mipmap=r.mipmap>=1:n.mipmap=!1,2===this.webGLVersion||r.isPowerOfTwo?n.wrapMode=r.wrapMode:n.wrapMode=Q.CLAMP,r.resource&&r.resource.style(this.renderer,r,n)||this.setStyle(r,n),n.dirtyStyleId=r.dirtyStyleId)},TextureSystem.prototype.setStyle=function(r,n){var i=this.gl;if(n.mipmap&&i.generateMipmap(r.target),i.texParameteri(r.target,i.TEXTURE_WRAP_S,n.wrapMode),i.texParameteri(r.target,i.TEXTURE_WRAP_T,n.wrapMode),n.mipmap){i.texParameteri(r.target,i.TEXTURE_MIN_FILTER,r.scaleMode===$.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var o=this.renderer.context.extensions.anisotropicFiltering;if(o&&r.anisotropicLevel>0&&r.scaleMode===$.LINEAR){var a=Math.min(r.anisotropicLevel,i.getParameter(o.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(r.target,o.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else i.texParameteri(r.target,i.TEXTURE_MIN_FILTER,r.scaleMode===$.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(r.target,i.TEXTURE_MAG_FILTER,r.scaleMode===$.LINEAR?i.LINEAR:i.NEAREST)},TextureSystem}(we),Hr={FilterSystem:qe,BatchSystem:Ze,ContextSystem:Qe,FramebufferSystem:er,GeometrySystem:ir,MaskSystem:wr,ScissorSystem:Ar,StencilSystem:Or,ProjectionSystem:Rr,RenderTextureSystem:Dr,ShaderSystem:Ur,StateSystem:jr,TextureGCSystem:Gr,TextureSystem:zr},Wr=new Nt,Vr=function(r){function AbstractRenderer(n,i){void 0===n&&(n=X.UNKNOWN);var o=r.call(this)||this;return(i=Object.assign({},st.RENDER_OPTIONS,i)).roundPixels&&(st.ROUND_PIXELS=i.roundPixels,deprecation("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),o.options=i,o.type=n,o.screen=new Rt(0,0,i.width,i.height),o.view=i.view||document.createElement("canvas"),o.resolution=i.resolution||st.RESOLUTION,o.transparent=i.transparent,o.autoDensity=i.autoDensity||i.autoResize||!1,o.preserveDrawingBuffer=i.preserveDrawingBuffer,o.clearBeforeRender=i.clearBeforeRender,o._backgroundColor=0,o._backgroundColorRgba=[0,0,0,0],o._backgroundColorString="#000000",o.backgroundColor=i.backgroundColor||o._backgroundColor,o._lastObjectRendered=null,o.plugins={},o}return core_es_extends(AbstractRenderer,r),AbstractRenderer.prototype.initPlugins=function(r){for(var n in r)this.plugins[n]=new r[n](this)},Object.defineProperty(AbstractRenderer.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractRenderer.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),AbstractRenderer.prototype.resize=function(r,n){this.screen.width=r,this.screen.height=n,this.view.width=r*this.resolution,this.view.height=n*this.resolution,this.autoDensity&&(this.view.style.width=r+"px",this.view.style.height=n+"px"),this.emit("resize",r,n)},AbstractRenderer.prototype.generateTexture=function(r,n,i,o){0===(o=o||r.getLocalBounds(null,!0)).width&&(o.width=1),0===o.height&&(o.height=1);var a=Le.create({width:0|o.width,height:0|o.height,scaleMode:n,resolution:i});return Wr.tx=-o.x,Wr.ty=-o.y,this.render(r,a,!1,Wr,!!r.parent),a},AbstractRenderer.prototype.destroy=function(r){for(var n in this.plugins)this.plugins[n].destroy(),this.plugins[n]=null;r&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=X.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(AbstractRenderer.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(r){this._backgroundColor=r,this._backgroundColorString=hex2string(r),hex2rgb(r,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),AbstractRenderer}(ht.a),Yr=function(r){function Renderer(n){var i=r.call(this,X.WEBGL,n)||this;return n=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new ce("destroy"),contextChange:new ce("contextChange"),reset:new ce("reset"),update:new ce("update"),postrender:new ce("postrender"),prerender:new ce("prerender"),resize:new ce("resize")},i.globalUniforms=new Ve({projectionMatrix:new Nt},!0),i.addSystem(wr,"mask").addSystem(Qe,"context").addSystem(jr,"state").addSystem(Ur,"shader").addSystem(zr,"texture").addSystem(ir,"geometry").addSystem(er,"framebuffer").addSystem(Ar,"scissor").addSystem(Or,"stencil").addSystem(Rr,"projection").addSystem(Gr,"textureGC").addSystem(qe,"filter").addSystem(Dr,"renderTexture").addSystem(Ze,"batch"),i.initPlugins(Renderer.__plugins),n.context?i.context.initFromContext(n.context):i.context.initFromOptions({alpha:!!i.transparent,antialias:n.antialias,premultipliedAlpha:i.transparent&&"notMultiplied"!==i.transparent,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,sayHello(2===i.context.webGLVersion?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return core_es_extends(Renderer,r),Renderer.create=function(r){if(isWebGLSupported())return new Renderer(r);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},Renderer.prototype.addSystem=function(r,n){n||(n=r.name);var i=new r(this);if(this[n])throw new Error('Whoops! The name "'+n+'" is already in use');for(var o in this[n]=i,this.runners)this.runners[o].add(i);return this},Renderer.prototype.render=function(r,n,i,o,a){if(this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=o,!this.context.isLost){if(n||(this._lastObjectRendered=r),!a){var s=r.enableTempParent();r.updateTransform(),r.disableTempParent(s)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),r.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},Renderer.prototype.resize=function(n,i){r.prototype.resize.call(this,n,i),this.runners.resize.emit(n,i)},Renderer.prototype.reset=function(){return this.runners.reset.emit(),this},Renderer.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},Renderer.prototype.destroy=function(n){for(var i in this.runners.destroy.emit(),this.runners)this.runners[i].destroy();r.prototype.destroy.call(this,n),this.gl=null},Renderer.registerPlugin=function(r,n){Renderer.__plugins=Renderer.__plugins||{},Renderer.__plugins[r]=n},Renderer}(Vr);function autoDetectRenderer(r){return Yr.create(r)}var qr="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",Kr="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",Zr=function BatchDrawCall(){this.texArray=null,this.blend=0,this.type=V.TRIANGLES,this.start=0,this.size=0,this.data=null},$r=function(){function BatchTextureArray(){this.elements=[],this.ids=[],this.count=0}return BatchTextureArray.prototype.clear=function(){for(var r=0;r<this.count;r++)this.elements[r]=null;this.count=0},BatchTextureArray}(),Qr=function(){function ViewableBuffer(r){this.rawBinaryData=new ArrayBuffer(r),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(ViewableBuffer.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(ViewableBuffer.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(ViewableBuffer.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(ViewableBuffer.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(ViewableBuffer.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),ViewableBuffer.prototype.view=function(r){return this[r+"View"]},ViewableBuffer.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},ViewableBuffer.sizeOf=function(r){switch(r){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(r+" isn't a valid view type")}},ViewableBuffer}(),Jr=function(r){function AbstractBatchRenderer(n){var i=r.call(this,n)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=xr.for2d(),i.size=4*st.SPRITE_BATCH_SIZE,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),n.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return core_es_extends(AbstractBatchRenderer,r),AbstractBatchRenderer.prototype.contextChange=function(){var r=this.renderer.gl;st.PREFER_ENV===j.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),st.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=checkMaxIfStatementsInShader(this.MAX_TEXTURES,r)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]=new this.geometryClass;this.initFlushBuffers()},AbstractBatchRenderer.prototype.initFlushBuffers=function(){for(var r=AbstractBatchRenderer._drawCallPool,n=AbstractBatchRenderer._textureArrayPool,i=this.size/4,o=Math.floor(i/this.MAX_TEXTURES)+1;r.length<i;)r.push(new Zr);for(;n.length<o;)n.push(new $r);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},AbstractBatchRenderer.prototype.onPrerender=function(){this._flushId=0},AbstractBatchRenderer.prototype.render=function(r){r._texture.valid&&(this._vertexCount+r.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=r.vertexData.length/2,this._indexCount+=r.indices.length,this._bufferedTextures[this._bufferSize]=r._texture.baseTexture,this._bufferedElements[this._bufferSize++]=r)},AbstractBatchRenderer.prototype.buildTexturesAndDrawCalls=function(){var r=this._bufferedTextures,n=this.MAX_TEXTURES,i=AbstractBatchRenderer._textureArrayPool,o=this.renderer.batch,a=this._tempBoundTextures,s=this.renderer.textureGC.count,h=++ye._globalBatch,d=0,f=i[0],p=0;o.copyBoundTextures(a,n);for(var y=0;y<this._bufferSize;++y){var g=r[y];r[y]=null,g._batchEnabled!==h&&(f.count>=n&&(o.boundArray(f,a,h,n),this.buildDrawCalls(f,p,y),p=y,f=i[++d],++h),g._batchEnabled=h,g.touched=s,f.elements[f.count++]=g)}f.count>0&&(o.boundArray(f,a,h,n),this.buildDrawCalls(f,p,this._bufferSize),++d,++h);for(y=0;y<a.length;y++)a[y]=null;ye._globalBatch=h},AbstractBatchRenderer.prototype.buildDrawCalls=function(r,n,i){var o=this._bufferedElements,a=this._attributeBuffer,s=this._indexBuffer,h=this.vertexSize,d=AbstractBatchRenderer._drawCallPool,f=this._dcIndex,p=this._aIndex,y=this._iIndex,g=d[f];g.start=this._iIndex,g.texArray=r;for(var _=n;_<i;++_){var b=o[_],x=b._texture.baseTexture,T=mt[x.alphaMode?1:0][b.blendMode];o[_]=null,n<_&&g.blend!==T&&(g.size=y-g.start,n=_,(g=d[++f]).texArray=r,g.start=y),this.packInterleavedGeometry(b,a,s,p,y),p+=b.vertexData.length/2*h,y+=b.indices.length,g.blend=T}n<i&&(g.size=y-g.start,++f),this._dcIndex=f,this._aIndex=p,this._iIndex=y},AbstractBatchRenderer.prototype.bindAndClearTexArray=function(r){for(var n=this.renderer.texture,i=0;i<r.count;i++)n.bind(r.elements[i],r.ids[i]),r.elements[i]=null;r.count=0},AbstractBatchRenderer.prototype.updateGeometry=function(){var r=this._packedGeometries,n=this._attributeBuffer,i=this._indexBuffer;st.CAN_UPLOAD_SAME_BUFFER?(r[this._flushId]._buffer.update(n.rawBinaryData),r[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,r[this._flushId]=new this.geometryClass),r[this._flushId]._buffer.update(n.rawBinaryData),r[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(r[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},AbstractBatchRenderer.prototype.drawBatches=function(){for(var r=this._dcIndex,n=this.renderer,i=n.gl,o=n.state,a=AbstractBatchRenderer._drawCallPool,s=null,h=0;h<r;h++){var d=a[h],f=d.texArray,p=d.type,y=d.size,g=d.start,_=d.blend;s!==f&&(s=f,this.bindAndClearTexArray(f)),this.state.blendMode=_,o.set(this.state),i.drawElements(p,y,i.UNSIGNED_SHORT,2*g)}},AbstractBatchRenderer.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},AbstractBatchRenderer.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),st.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},AbstractBatchRenderer.prototype.stop=function(){this.flush()},AbstractBatchRenderer.prototype.destroy=function(){for(var n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]&&this._packedGeometries[n].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},AbstractBatchRenderer.prototype.getAttributeBuffer=function(r){var n=nextPow2(Math.ceil(r/8)),i=log2(n),o=8*n;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var a=this._aBuffers[o];return a||(this._aBuffers[o]=a=new Qr(o*this.vertexSize*4)),a},AbstractBatchRenderer.prototype.getIndexBuffer=function(r){var n=nextPow2(Math.ceil(r/12)),i=log2(n),o=12*n;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var a=this._iBuffers[i];return a||(this._iBuffers[i]=a=new Uint16Array(o)),a},AbstractBatchRenderer.prototype.packInterleavedGeometry=function(r,n,i,o,a){for(var s=n.uint32View,h=n.float32View,d=o/this.vertexSize,f=r.uvs,p=r.indices,y=r.vertexData,g=r._texture.baseTexture._batchLocation,_=Math.min(r.worldAlpha,1),b=_<1&&r._texture.baseTexture.alphaMode?premultiplyTint(r._tintRGB,_):r._tintRGB+(255*_<<24),x=0;x<y.length;x+=2)h[o++]=y[x],h[o++]=y[x+1],h[o++]=f[x],h[o++]=f[x+1],s[o++]=b,h[o++]=g;for(x=0;x<p.length;x++)i[a++]=d+p[x]},AbstractBatchRenderer._drawCallPool=[],AbstractBatchRenderer._textureArrayPool=[],AbstractBatchRenderer}(Ke),tn=function(){function BatchShaderGenerator(r,n){if(this.vertexSrc=r,this.fragTemplate=n,this.programCache={},this.defaultGroupCache={},n.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(n.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return BatchShaderGenerator.prototype.generateShader=function(r){if(!this.programCache[r]){for(var n=new Int32Array(r),i=0;i<r;i++)n[i]=i;this.defaultGroupCache[r]=Ve.from({uSamplers:n},!0);var o=this.fragTemplate;o=(o=o.replace(/%count%/gi,""+r)).replace(/%forloop%/gi,this.generateSampleSrc(r)),this.programCache[r]=new _r(this.vertexSrc,o)}var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new Nt,default:this.defaultGroupCache[r]};return new br(this.programCache[r],a)},BatchShaderGenerator.prototype.generateSampleSrc=function(r){var n="";n+="\n",n+="\n";for(var i=0;i<r;i++)i>0&&(n+="\nelse "),i<r-1&&(n+="if(vTextureId < "+i+".5)"),n+="\n{",n+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",n+="\n}";return n+="\n",n+="\n"},BatchShaderGenerator}(),en=function(r){function BatchGeometry(n){void 0===n&&(n=!1);var i=r.call(this)||this;return i._buffer=new Ne(null,n,!1),i._indexBuffer=new Ne(null,n,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,Z.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,Z.FLOAT).addAttribute("aColor",i._buffer,4,!0,Z.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,Z.FLOAT).addIndex(i._indexBuffer),i}return core_es_extends(BatchGeometry,r),BatchGeometry}(Xe),rn="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",nn="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",an=function(){function BatchPluginFactory(){}return BatchPluginFactory.create=function(r){var n=Object.assign({vertex:rn,fragment:nn,geometryClass:en,vertexSize:6},r),i=n.vertex,o=n.fragment,a=n.vertexSize,s=n.geometryClass;return function(r){function BatchPlugin(n){var h=r.call(this,n)||this;return h.shaderGenerator=new tn(i,o),h.geometryClass=s,h.vertexSize=a,h}return core_es_extends(BatchPlugin,r),BatchPlugin}(Jr)},Object.defineProperty(BatchPluginFactory,"defaultVertexSrc",{get:function(){return rn},enumerable:!1,configurable:!0}),Object.defineProperty(BatchPluginFactory,"defaultFragmentTemplate",{get:function(){return nn},enumerable:!1,configurable:!0}),BatchPluginFactory}(),sn=an.create(),un=function(){function Application(r){var n=this;r=Object.assign({forceCanvas:!1},r),this.renderer=autoDetectRenderer(r),this.stage=new Zt,Application._plugins.forEach((function(i){i.init.call(n,r)}))}return Application.registerPlugin=function(r){Application._plugins.push(r)},Application.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(Application.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(Application.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),Application.prototype.destroy=function(r,n){var i=this,o=Application._plugins.slice(0);o.reverse(),o.forEach((function(r){r.destroy.call(i)})),this.stage.destroy(n),this.stage=null,this.renderer.destroy(r),this.renderer=null},Application}();un._plugins=[];var hn=function(){function ResizePlugin(){}return ResizePlugin.init=function(r){var n=this;Object.defineProperty(this,"resizeTo",{set:function(r){window.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){n._resizeTo&&(n.cancelResize(),n._resizeId=requestAnimationFrame((function(){return n.resize()})))},this.cancelResize=function(){n._resizeId&&(cancelAnimationFrame(n._resizeId),n._resizeId=null)},this.resize=function(){if(n._resizeTo){var r,i;if(n.cancelResize(),n._resizeTo===window)r=window.innerWidth,i=window.innerHeight;else{var o=n._resizeTo;r=o.clientWidth,i=o.clientHeight}n.renderer.resize(r,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=r.resizeTo||null},ResizePlugin.destroy=function(){this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},ResizePlugin}();un.registerPlugin(hn);var cn=new Rt,ln=function(){function Extract(r){this.renderer=r,r.extract=this}return Extract.prototype.image=function(r,n,i){var o=new Image;return o.src=this.base64(r,n,i),o},Extract.prototype.base64=function(r,n,i){return this.canvas(r).toDataURL(n,i)},Extract.prototype.canvas=function(r){var n,i,o,a=this.renderer,s=!1,h=!1;r&&(r instanceof Le?o=r:(o=this.renderer.generateTexture(r),h=!0)),o?(n=o.baseTexture.resolution,i=o.frame,s=!1,a.renderTexture.bind(o)):(n=this.renderer.resolution,s=!0,(i=cn).width=this.renderer.width,i.height=this.renderer.height,a.renderTexture.bind(null));var d=Math.floor(i.width*n+1e-4),f=Math.floor(i.height*n+1e-4),p=new St(d,f,1),y=new Uint8Array(4*d*f),g=a.gl;g.readPixels(i.x*n,i.y*n,d,f,g.RGBA,g.UNSIGNED_BYTE,y);var _=p.context.getImageData(0,0,d,f);if(Extract.arrayPostDivide(y,_.data),p.context.putImageData(_,0,0),s){var b=new St(p.width,p.height,1);b.context.scale(1,-1),b.context.drawImage(p.canvas,0,-f),p.destroy(),p=b}return h&&o.destroy(!0),p.canvas},Extract.prototype.pixels=function(r){var n,i,o,a=this.renderer,s=!1;r&&(r instanceof Le?o=r:(o=this.renderer.generateTexture(r),s=!0)),o?(n=o.baseTexture.resolution,i=o.frame,a.renderTexture.bind(o)):(n=a.resolution,(i=cn).width=a.width,i.height=a.height,a.renderTexture.bind(null));var h=i.width*n,d=i.height*n,f=new Uint8Array(4*h*d),p=a.gl;return p.readPixels(i.x*n,i.y*n,h,d,p.RGBA,p.UNSIGNED_BYTE,f),s&&o.destroy(!0),Extract.arrayPostDivide(f,f),f},Extract.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},Extract.arrayPostDivide=function(r,n){for(var i=0;i<r.length;i+=4){var o=n[i+3]=r[i+3];0!==o?(n[i]=Math.round(Math.min(255*r[i]/o,255)),n[i+1]=Math.round(Math.min(255*r[i+1]/o,255)),n[i+2]=Math.round(Math.min(255*r[i+2]/o,255))):(n[i]=r[i],n[i+1]=r[i+1],n[i+2]=r[i+2])}},Extract}(),dn=i(11),fn=i.n(dn),pn=i(1),yn=i.n(pn);function _noop(){}function eachSeries(r,n,i,o){var a=0,s=r.length;!function next(h){h||a===s?i&&i(h):o?setTimeout((function(){n(r[a++],next)}),1):n(r[a++],next)}()}function onlyOnce(r){return function onceWrapper(){if(null===r)throw new Error("Callback was already called.");var n=r;r=null,n.apply(this,arguments)}}function resource_loader_esm_queue(r,n){if(null==n)n=1;else if(0===n)throw new Error("Concurrency must not be zero");var i=0,o={_tasks:[],concurrency:n,saturated:_noop,unsaturated:_noop,buffer:n/4,empty:_noop,drain:_noop,error:_noop,started:!1,paused:!1,push:function push(r,n){_insert(r,!1,n)},kill:function kill(){i=0,o.drain=_noop,o.started=!1,o._tasks=[]},unshift:function unshift(r,n){_insert(r,!0,n)},process:function process(){for(;!o.paused&&i<o.concurrency&&o._tasks.length;){var n=o._tasks.shift();0===o._tasks.length&&o.empty(),(i+=1)===o.concurrency&&o.saturated(),r(n.data,onlyOnce(_next(n)))}},length:function length(){return o._tasks.length},running:function running(){return i},idle:function idle(){return o._tasks.length+i===0},pause:function pause(){!0!==o.paused&&(o.paused=!0)},resume:function resume(){if(!1!==o.paused){o.paused=!1;for(var r=1;r<=o.concurrency;r++)o.process()}}};function _insert(r,n,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(o.started=!0,null==r&&o.idle())setTimeout((function(){return o.drain()}),1);else{var a={data:r,callback:"function"==typeof i?i:_noop};n?o._tasks.unshift(a):o._tasks.push(a),setTimeout((function(){return o.process()}),1)}}function _next(r){return function next(){i-=1,r.callback.apply(r,arguments),null!=arguments[0]&&o.error(arguments[0],r.data),i<=o.concurrency-o.buffer&&o.unsaturated(),o.idle()&&o.drain(),o.process()}}return o}var mn={};function _defineProperties(r,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}function _createClass(r,n,i){return n&&_defineProperties(r.prototype,n),i&&_defineProperties(r,i),r}var gn=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),vn=null;function _noop$1(){}var _n=function(){function Resource(r,n,i){if("string"!=typeof r||"string"!=typeof n)throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(Resource.STATUS_FLAGS.DATA_URL,0===n.indexOf("data:")),this.name=r,this.url=n,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===i.crossOrigin?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=Resource.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=_noop$1,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new yn.a,this.onProgress=new yn.a,this.onComplete=new yn.a,this.onAfterMiddleware=new yn.a}Resource.setExtensionLoadType=function setExtensionLoadType(r,n){setExtMap(Resource._loadTypeMap,r,n)},Resource.setExtensionXhrType=function setExtensionXhrType(r,n){setExtMap(Resource._xhrTypeMap,r,n)};var r=Resource.prototype;return r.complete=function complete(){this._clearEvents(),this._finish()},r.abort=function abort(r){if(!this.error){if(this.error=new Error(r),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=Resource.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},r.load=function load(r){var n=this;if(!this.isLoading)if(this.isComplete)r&&setTimeout((function(){return r(n)}),1);else switch(r&&this.onComplete.once(r),this._setFlag(Resource.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case Resource.LOAD_TYPE.IMAGE:this.type=Resource.TYPE.IMAGE,this._loadElement("image");break;case Resource.LOAD_TYPE.AUDIO:this.type=Resource.TYPE.AUDIO,this._loadSourceElement("audio");break;case Resource.LOAD_TYPE.VIDEO:this.type=Resource.TYPE.VIDEO,this._loadSourceElement("video");break;case Resource.LOAD_TYPE.XHR:default:gn&&this.crossOrigin?this._loadXdr():this._loadXhr()}},r._hasFlag=function _hasFlag(r){return 0!=(this._flags&r)},r._setFlag=function _setFlag(r,n){this._flags=n?this._flags|r:this._flags&~r},r._clearEvents=function _clearEvents(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},r._finish=function _finish(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(Resource.STATUS_FLAGS.COMPLETE,!0),this._setFlag(Resource.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},r._loadElement=function _loadElement(r){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===r&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(r),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},r._loadSourceElement=function _loadSourceElement(r){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===r&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(r),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var n=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(r,this.url[i],Array.isArray(n)?n[i]:n));else{var o=this.metadata.mimeType;this.data.appendChild(this._createSource(r,this.url,Array.isArray(o)?o[0]:o))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+r)},r._loadXhr=function _loadXhr(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var r=this.xhr=new XMLHttpRequest;r.open("GET",this.url,!0),r.timeout=this.timeout,this.xhrType===Resource.XHR_RESPONSE_TYPE.JSON||this.xhrType===Resource.XHR_RESPONSE_TYPE.DOCUMENT?r.responseType=Resource.XHR_RESPONSE_TYPE.TEXT:r.responseType=this.xhrType,r.addEventListener("error",this._boundXhrOnError,!1),r.addEventListener("timeout",this._boundXhrOnTimeout,!1),r.addEventListener("abort",this._boundXhrOnAbort,!1),r.addEventListener("progress",this._boundOnProgress,!1),r.addEventListener("load",this._boundXhrOnLoad,!1),r.send()},r._loadXdr=function _loadXdr(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var r=this.xhr=new XDomainRequest;r.timeout=this.timeout||5e3,r.onerror=this._boundXhrOnError,r.ontimeout=this._boundXhrOnTimeout,r.onprogress=this._boundOnProgress,r.onload=this._boundXhrOnLoad,r.open("GET",this.url,!0),setTimeout((function(){return r.send()}),1)},r._createSource=function _createSource(r,n,i){i||(i=r+"/"+this._getExtension(n));var o=document.createElement("source");return o.src=n,o.type=i,o},r._onError=function _onError(r){this.abort("Failed to load element using: "+r.target.nodeName)},r._onProgress=function _onProgress(r){r&&r.lengthComputable&&this.onProgress.dispatch(this,r.loaded/r.total)},r._onTimeout=function _onTimeout(){this.abort("Load timed out.")},r._xhrOnError=function _xhrOnError(){var r=this.xhr;this.abort(reqType(r)+" Request failed. Status: "+r.status+', text: "'+r.statusText+'"')},r._xhrOnTimeout=function _xhrOnTimeout(){var r=this.xhr;this.abort(reqType(r)+" Request timed out.")},r._xhrOnAbort=function _xhrOnAbort(){var r=this.xhr;this.abort(reqType(r)+" Request was aborted by the user.")},r._xhrOnLoad=function _xhrOnLoad(){var r=this.xhr,n="",i=void 0===r.status?200:r.status;if(""!==r.responseType&&"text"!==r.responseType&&void 0!==r.responseType||(n=r.responseText),0===i&&(n.length>0||r.responseType===Resource.XHR_RESPONSE_TYPE.BUFFER)?i=200:1223===i&&(i=204),2===(i/100|0)){if(this.xhrType===Resource.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=Resource.TYPE.TEXT;else if(this.xhrType===Resource.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=Resource.TYPE.JSON}catch(r){return void this.abort("Error trying to parse loaded json: "+r)}else if(this.xhrType===Resource.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var o=new DOMParser;this.data=o.parseFromString(n,"text/xml")}else{var a=document.createElement("div");a.innerHTML=n,this.data=a}this.type=Resource.TYPE.XML}catch(r){return void this.abort("Error trying to parse loaded xml: "+r)}else this.data=r.response||n;this.complete()}else this.abort("["+r.status+"] "+r.statusText+": "+r.responseURL)},r._determineCrossOrigin=function _determineCrossOrigin(r,n){if(0===r.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";n=n||window.location,vn||(vn=document.createElement("a")),vn.href=r;var i=!(r=fn()(vn.href,{strictMode:!0})).port&&""===n.port||r.port===n.port,o=r.protocol?r.protocol+":":"";return r.host===n.hostname&&i&&o===n.protocol?"":"anonymous"},r._determineXhrType=function _determineXhrType(){return Resource._xhrTypeMap[this.extension]||Resource.XHR_RESPONSE_TYPE.TEXT},r._determineLoadType=function _determineLoadType(){return Resource._loadTypeMap[this.extension]||Resource.LOAD_TYPE.XHR},r._getExtension=function _getExtension(){var r=this.url,n="";if(this.isDataUrl){var i=r.indexOf("/");n=r.substring(i+1,r.indexOf(";",i))}else{var o=r.indexOf("?"),a=r.indexOf("#"),s=Math.min(o>-1?o:r.length,a>-1?a:r.length);n=(r=r.substring(0,s)).substring(r.lastIndexOf(".")+1)}return n.toLowerCase()},r._getMimeFromXhrType=function _getMimeFromXhrType(r){switch(r){case Resource.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case Resource.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case Resource.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case Resource.XHR_RESPONSE_TYPE.JSON:return"application/json";case Resource.XHR_RESPONSE_TYPE.DEFAULT:case Resource.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},_createClass(Resource,[{key:"isDataUrl",get:function get(){return this._hasFlag(Resource.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function get(){return this._hasFlag(Resource.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function get(){return this._hasFlag(Resource.STATUS_FLAGS.LOADING)}}]),Resource}();function setExtMap(r,n,i){n&&0===n.indexOf(".")&&(n=n.substring(1)),n&&(r[n]=i)}function reqType(r){return r.toString().replace("object ","")}_n.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},_n.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},_n.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},_n.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},_n._loadTypeMap={gif:_n.LOAD_TYPE.IMAGE,png:_n.LOAD_TYPE.IMAGE,bmp:_n.LOAD_TYPE.IMAGE,jpg:_n.LOAD_TYPE.IMAGE,jpeg:_n.LOAD_TYPE.IMAGE,tif:_n.LOAD_TYPE.IMAGE,tiff:_n.LOAD_TYPE.IMAGE,webp:_n.LOAD_TYPE.IMAGE,tga:_n.LOAD_TYPE.IMAGE,svg:_n.LOAD_TYPE.IMAGE,"svg+xml":_n.LOAD_TYPE.IMAGE,mp3:_n.LOAD_TYPE.AUDIO,ogg:_n.LOAD_TYPE.AUDIO,wav:_n.LOAD_TYPE.AUDIO,mp4:_n.LOAD_TYPE.VIDEO,webm:_n.LOAD_TYPE.VIDEO},_n._xhrTypeMap={xhtml:_n.XHR_RESPONSE_TYPE.DOCUMENT,html:_n.XHR_RESPONSE_TYPE.DOCUMENT,htm:_n.XHR_RESPONSE_TYPE.DOCUMENT,xml:_n.XHR_RESPONSE_TYPE.DOCUMENT,tmx:_n.XHR_RESPONSE_TYPE.DOCUMENT,svg:_n.XHR_RESPONSE_TYPE.DOCUMENT,tsx:_n.XHR_RESPONSE_TYPE.DOCUMENT,gif:_n.XHR_RESPONSE_TYPE.BLOB,png:_n.XHR_RESPONSE_TYPE.BLOB,bmp:_n.XHR_RESPONSE_TYPE.BLOB,jpg:_n.XHR_RESPONSE_TYPE.BLOB,jpeg:_n.XHR_RESPONSE_TYPE.BLOB,tif:_n.XHR_RESPONSE_TYPE.BLOB,tiff:_n.XHR_RESPONSE_TYPE.BLOB,webp:_n.XHR_RESPONSE_TYPE.BLOB,tga:_n.XHR_RESPONSE_TYPE.BLOB,json:_n.XHR_RESPONSE_TYPE.JSON,text:_n.XHR_RESPONSE_TYPE.TEXT,txt:_n.XHR_RESPONSE_TYPE.TEXT,ttf:_n.XHR_RESPONSE_TYPE.BUFFER,otf:_n.XHR_RESPONSE_TYPE.BUFFER},_n.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var bn=window.URL||window.webkitURL;var xn={caching:function caching(r,n){var i=this;mn[r.url]?(r.data=mn[r.url],r.complete()):r.onComplete.once((function(){return mn[i.url]=i.data})),n()},parsing:function parsing(r,n){if(r.data){if(r.xhr&&r.xhrType===_n.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof r.data){if(0===r.data.type.indexOf("image")){var i=bn.createObjectURL(r.data);return r.blob=r.data,r.data=new Image,r.data.src=i,r.type=_n.TYPE.IMAGE,void(r.data.onload=function(){bn.revokeObjectURL(i),r.data.onload=null,n()})}}else{var o=r.xhr.getResponseHeader("content-type");if(o&&0===o.indexOf("image"))return r.data=new Image,r.data.src="data:"+o+";base64,"+function encodeBinary(r){for(var n="",i=0;i<r.length;){for(var o=[0,0,0],a=[0,0,0,0],s=0;s<o.length;++s)i<r.length?o[s]=255&r.charCodeAt(i++):o[s]=0;switch(a[0]=o[0]>>2,a[1]=(3&o[0])<<4|o[1]>>4,a[2]=(15&o[1])<<2|o[2]>>6,a[3]=63&o[2],i-(r.length-1)){case 2:a[3]=64,a[2]=64;break;case 1:a[3]=64}for(var h=0;h<a.length;++h)n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a[h])}return n}(r.xhr.responseText),r.type=_n.TYPE.IMAGE,void(r.data.onload=function(){r.data.onload=null,n()})}n()}else n()}},Tn=/(#[\w-]+)?$/,Sn=function(){function Loader(r,n){var i=this;void 0===r&&(r=""),void 0===n&&(n=10),this.baseUrl=r,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(r,n){return i._loadResource(r,n)},this._queue=resource_loader_esm_queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new yn.a,this.onError=new yn.a,this.onLoad=new yn.a,this.onStart=new yn.a,this.onComplete=new yn.a;for(var o=0;o<Loader._defaultBeforeMiddleware.length;++o)this.pre(Loader._defaultBeforeMiddleware[o]);for(var a=0;a<Loader._defaultAfterMiddleware.length;++a)this.use(Loader._defaultAfterMiddleware[a])}var r=Loader.prototype;return r.add=function add(r,n,i,o){if(Array.isArray(r)){for(var a=0;a<r.length;++a)this.add(r[a]);return this}if("object"==typeof r&&(o=n||r.callback||r.onComplete,i=r,n=r.url,r=r.name||r.key||r.url),"string"!=typeof n&&(o=i,i=n,n=r),"string"!=typeof n)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(o=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[r])throw new Error('Resource named "'+r+'" already exists.');if(n=this._prepareUrl(n),this.resources[r]=new _n(r,n,i),"function"==typeof o&&this.resources[r].onAfterMiddleware.once(o),this.loading){for(var s=i.parentResource,h=[],d=0;d<s.children.length;++d)s.children[d].isComplete||h.push(s.children[d]);var f=s.progressChunk*(h.length+1)/(h.length+2);s.children.push(this.resources[r]),s.progressChunk=f;for(var p=0;p<h.length;++p)h[p].progressChunk=f;this.resources[r].progressChunk=f}return this._queue.push(this.resources[r]),this},r.pre=function pre(r){return this._beforeMiddleware.push(r),this},r.use=function use(r){return this._afterMiddleware.push(r),this},r.reset=function reset(){for(var r in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var n=this.resources[r];n._onLoadBinding&&n._onLoadBinding.detach(),n.isLoading&&n.abort()}return this.resources={},this},r.load=function load(r){if("function"==typeof r&&this.onComplete.once(r),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var n=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=n;this._onStart(),this._queue.resume()}return this},r._prepareUrl=function _prepareUrl(r){var n,i=fn()(r,{strictMode:!0});if(n=i.protocol||!i.path||0===r.indexOf("//")?r:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==r.charAt(0)?this.baseUrl+"/"+r:this.baseUrl+r,this.defaultQueryString){var o=Tn.exec(n)[0];-1!==(n=n.substr(0,n.length-o.length)).indexOf("?")?n+="&"+this.defaultQueryString:n+="?"+this.defaultQueryString,n+=o}return n},r._loadResource=function _loadResource(r,n){var i=this;r._dequeue=n,eachSeries(this._beforeMiddleware,(function(n,o){n.call(i,r,(function(){o(r.isComplete?{}:null)}))}),(function(){r.isComplete?i._onLoad(r):(r._onLoadBinding=r.onComplete.once(i._onLoad,i),r.load())}),!0)},r._onStart=function _onStart(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},r._onComplete=function _onComplete(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},r._onLoad=function _onLoad(r){var n=this;r._onLoadBinding=null,this._resourcesParsing.push(r),r._dequeue(),eachSeries(this._afterMiddleware,(function(i,o){i.call(n,r,o)}),(function(){r.onAfterMiddleware.dispatch(r),n.progress=Math.min(100,n.progress+r.progressChunk),n.onProgress.dispatch(n,r),r.error?n.onError.dispatch(r.error,n,r):n.onLoad.dispatch(n,r),n._resourcesParsing.splice(n._resourcesParsing.indexOf(r),1),n._queue.idle()&&0===n._resourcesParsing.length&&n._onComplete()}),!0)},_createClass(Loader,[{key:"concurrency",get:function get(){return this._queue.concurrency},set:function set(r){this._queue.concurrency=r}}]),Loader}();Sn._defaultBeforeMiddleware=[],Sn._defaultAfterMiddleware=[],Sn.pre=function LoaderPreStatic(r){return Sn._defaultBeforeMiddleware.push(r),Sn},Sn.use=function LoaderUseStatic(r){return Sn._defaultAfterMiddleware.push(r),Sn};var En=_n,loaders_es_extendStatics=function(r,n){return(loaders_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};var In=function(){function TextureLoader(){}return TextureLoader.use=function(r,n){r.data&&r.type===_n.TYPE.IMAGE&&(r.texture=Me.fromLoader(r.data,r.url,r.name)),n()},TextureLoader}(),wn=function(r){function Loader(n,i){for(var o=r.call(this,n,i)||this,a=0;a<Loader._plugins.length;++a){var s=Loader._plugins[a],h=s.pre,d=s.use;h&&o.pre(h),d&&o.use(d)}return o._protected=!1,o}return function loaders_es_extends(r,n){function __(){this.constructor=r}loaders_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}(Loader,r),Loader.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(Loader,"shared",{get:function(){var r=Loader._shared;return r||((r=new Loader)._protected=!0,Loader._shared=r),r},enumerable:!1,configurable:!0}),Loader.registerPlugin=function(r){return Loader._plugins.push(r),r.add&&r.add(),Loader},Loader._plugins=[],Loader}(Sn);wn.registerPlugin({use:xn.parsing}),wn.registerPlugin(In);var Pn=function(){function AppLoaderPlugin(){}return AppLoaderPlugin.init=function(r){r=Object.assign({sharedLoader:!1},r),this.loader=r.sharedLoader?wn.shared:new wn},AppLoaderPlugin.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},AppLoaderPlugin}(),particles_es_extendStatics=function(r,n){return(particles_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};function particles_es_extends(r,n){function __(){this.constructor=r}particles_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}var An,On,Rn=function(r){function ParticleContainer(n,i,o,a){void 0===n&&(n=1500),void 0===o&&(o=16384),void 0===a&&(a=!1);var s=r.call(this)||this;return o>16384&&(o=16384),s._properties=[!1,!0,!1,!1,!1],s._maxSize=n,s._batchSize=o,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=W.NORMAL,s.autoResize=a,s.roundPixels=!0,s.baseTexture=null,s.setProperties(i),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return particles_es_extends(ParticleContainer,r),ParticleContainer.prototype.setProperties=function(r){r&&(this._properties[0]="vertices"in r||"scale"in r?!!r.vertices||!!r.scale:this._properties[0],this._properties[1]="position"in r?!!r.position:this._properties[1],this._properties[2]="rotation"in r?!!r.rotation:this._properties[2],this._properties[3]="uvs"in r?!!r.uvs:this._properties[3],this._properties[4]="tint"in r||"alpha"in r?!!r.tint||!!r.alpha:this._properties[4])},ParticleContainer.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(ParticleContainer.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,hex2rgb(r,this.tintRgb)},enumerable:!1,configurable:!0}),ParticleContainer.prototype.render=function(r){var n=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return n.onChildrenChange(0)}))),r.batch.setObjectRenderer(r.plugins.particle),r.plugins.particle.render(this))},ParticleContainer.prototype.onChildrenChange=function(r){for(var n=Math.floor(r/this._batchSize);this._bufferUpdateIDs.length<n;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[n]=++this._updateID},ParticleContainer.prototype.dispose=function(){if(this._buffers){for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._buffers=null}},ParticleContainer.prototype.destroy=function(n){r.prototype.destroy.call(this,n),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},ParticleContainer}(Zt),Cn=function(){function ParticleBuffer(r,n,i){this.geometry=new Xe,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var o=0;o<r.length;++o){var a=r[o];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||Z.FLOAT,offset:a.offset},n[o]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return ParticleBuffer.prototype.initBuffers=function(){var r=this.geometry,n=0;this.indexBuffer=new Ne(createIndicesForQuads(this.size),!0,!0),r.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){(h=this.dynamicProperties[i]).offset=n,n+=h.size,this.dynamicStride+=h.size}var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new Ne(this.dynamicData,!1,!1);var a=0;this.staticStride=0;for(i=0;i<this.staticProperties.length;++i){(h=this.staticProperties[i]).offset=a,a+=h.size,this.staticStride+=h.size}var s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Ne(this.staticData,!0,!1);for(i=0;i<this.dynamicProperties.length;++i){var h=this.dynamicProperties[i];r.addAttribute(h.attributeName,this.dynamicBuffer,0,h.type===Z.UNSIGNED_BYTE,h.type,4*this.dynamicStride,4*h.offset)}for(i=0;i<this.staticProperties.length;++i){h=this.staticProperties[i];r.addAttribute(h.attributeName,this.staticBuffer,0,h.type===Z.UNSIGNED_BYTE,h.type,4*this.staticStride,4*h.offset)}},ParticleBuffer.prototype.uploadDynamic=function(r,n,i){for(var o=0;o<this.dynamicProperties.length;o++){var a=this.dynamicProperties[o];a.uploadFunction(r,n,i,a.type===Z.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++},ParticleBuffer.prototype.uploadStatic=function(r,n,i){for(var o=0;o<this.staticProperties.length;o++){var a=this.staticProperties[o];a.uploadFunction(r,n,i,a.type===Z.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++},ParticleBuffer.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},ParticleBuffer}(),Mn=function(r){function ParticleRenderer(n){var i=r.call(this,n)||this;return i.shader=null,i.properties=null,i.tempMatrix=new Nt,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Z.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=br.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),i.state=xr.for2d(),i}return particles_es_extends(ParticleRenderer,r),ParticleRenderer.prototype.render=function(r){var n=r.children,i=r._maxSize,o=r._batchSize,a=this.renderer,s=n.length;if(0!==s){s>i&&!r.autoResize&&(s=i);var h=r._buffers;h||(h=r._buffers=this.generateBuffers(r));var d=n[0]._texture.baseTexture;this.state.blendMode=correctBlendMode(r.blendMode,d.alphaMode),a.state.set(this.state);var f=a.gl,p=r.worldTransform.copyTo(this.tempMatrix);p.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=p.toArray(!0),this.shader.uniforms.uColor=premultiplyRgba(r.tintRgb,r.worldAlpha,this.shader.uniforms.uColor,d.alphaMode),this.shader.uniforms.uSampler=d,this.renderer.shader.bind(this.shader);for(var y=!1,g=0,_=0;g<s;g+=o,_+=1){var b=s-g;b>o&&(b=o),_>=h.length&&h.push(this._generateOneMoreBuffer(r));var x=h[_];x.uploadDynamic(n,g,b);var T=r._bufferUpdateIDs[_]||0;(y=y||x._updateID<T)&&(x._updateID=r._updateID,x.uploadStatic(n,g,b)),a.geometry.bind(x.geometry),f.drawElements(f.TRIANGLES,6*b,f.UNSIGNED_SHORT,0)}}},ParticleRenderer.prototype.generateBuffers=function(r){for(var n=[],i=r._maxSize,o=r._batchSize,a=r._properties,s=0;s<i;s+=o)n.push(new Cn(this.properties,a,o));return n},ParticleRenderer.prototype._generateOneMoreBuffer=function(r){var n=r._batchSize,i=r._properties;return new Cn(this.properties,i,n)},ParticleRenderer.prototype.uploadVertices=function(r,n,i,o,a,s){for(var h=0,d=0,f=0,p=0,y=0;y<i;++y){var g=r[n+y],_=g._texture,b=g.scale.x,x=g.scale.y,T=_.trim,S=_.orig;T?(h=(d=T.x-g.anchor.x*S.width)+T.width,f=(p=T.y-g.anchor.y*S.height)+T.height):(h=S.width*(1-g.anchor.x),d=S.width*-g.anchor.x,f=S.height*(1-g.anchor.y),p=S.height*-g.anchor.y),o[s]=d*b,o[s+1]=p*x,o[s+a]=h*b,o[s+a+1]=p*x,o[s+2*a]=h*b,o[s+2*a+1]=f*x,o[s+3*a]=d*b,o[s+3*a+1]=f*x,s+=4*a}},ParticleRenderer.prototype.uploadPosition=function(r,n,i,o,a,s){for(var h=0;h<i;h++){var d=r[n+h].position;o[s]=d.x,o[s+1]=d.y,o[s+a]=d.x,o[s+a+1]=d.y,o[s+2*a]=d.x,o[s+2*a+1]=d.y,o[s+3*a]=d.x,o[s+3*a+1]=d.y,s+=4*a}},ParticleRenderer.prototype.uploadRotation=function(r,n,i,o,a,s){for(var h=0;h<i;h++){var d=r[n+h].rotation;o[s]=d,o[s+a]=d,o[s+2*a]=d,o[s+3*a]=d,s+=4*a}},ParticleRenderer.prototype.uploadUvs=function(r,n,i,o,a,s){for(var h=0;h<i;++h){var d=r[n+h]._texture._uvs;d?(o[s]=d.x0,o[s+1]=d.y0,o[s+a]=d.x1,o[s+a+1]=d.y1,o[s+2*a]=d.x2,o[s+2*a+1]=d.y2,o[s+3*a]=d.x3,o[s+3*a+1]=d.y3,s+=4*a):(o[s]=0,o[s+1]=0,o[s+a]=0,o[s+a+1]=0,o[s+2*a]=0,o[s+2*a+1]=0,o[s+3*a]=0,o[s+3*a+1]=0,s+=4*a)}},ParticleRenderer.prototype.uploadTint=function(r,n,i,o,a,s){for(var h=0;h<i;++h){var d=r[n+h],f=d._texture.baseTexture.alphaMode>0,p=d.alpha,y=p<1&&f?premultiplyTint(d._tintRGB,p):d._tintRGB+(255*p<<24);o[s]=y,o[s+a]=y,o[s+2*a]=y,o[s+3*a]=y,s+=4*a}},ParticleRenderer.prototype.destroy=function(){r.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},ParticleRenderer}(Ke);!function(r){r.MITER="miter",r.BEVEL="bevel",r.ROUND="round"}(An||(An={})),function(r){r.BUTT="butt",r.ROUND="round",r.SQUARE="square"}(On||(On={}));var Ln={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(r,n){if(void 0===n&&(n=20),!this.adaptive||!r||isNaN(r))return n;var i=Math.ceil(r/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}},Dn=function(){function FillStyle(){this.color=16777215,this.alpha=1,this.texture=Me.WHITE,this.matrix=null,this.visible=!1,this.reset()}return FillStyle.prototype.clone=function(){var r=new FillStyle;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r},FillStyle.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Me.WHITE,this.matrix=null,this.visible=!1},FillStyle.prototype.destroy=function(){this.texture=null,this.matrix=null},FillStyle}(),graphics_es_extendStatics=function(r,n){return(graphics_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};function graphics_es_extends(r,n){function __(){this.constructor=r}graphics_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}var Fn={build:function(r){r.points=r.shape.points.slice()},triangulate:function(r,n){var i=r.points,o=r.holes,a=n.points,s=n.indices;if(i.length>=6){for(var h=[],d=0;d<o.length;d++){var f=o[d];h.push(i.length/2),i=i.concat(f.points)}var p=lt()(i,h,2);if(!p)return;var y=a.length/2;for(d=0;d<p.length;d+=3)s.push(p[d]+y),s.push(p[d+1]+y),s.push(p[d+2]+y);for(d=0;d<i.length;d++)a.push(i[d])}}},Bn={build:function(r){var n,i,o=r.shape,a=r.points,s=o.x,h=o.y;if(a.length=0,r.type===wt.CIRC)n=o.radius,i=o.radius;else{var d=r.shape;n=d.width,i=d.height}if(0!==n&&0!==i){var f=Math.floor(30*Math.sqrt(o.radius))||Math.floor(15*Math.sqrt(n+i));f/=2.3;for(var p=2*Math.PI/f,y=0;y<f-.5;y++)a.push(s+Math.sin(-p*y)*n,h+Math.cos(-p*y)*i);a.push(a[0],a[1])}},triangulate:function(r,n){var i=r.points,o=n.points,a=n.indices,s=o.length/2,h=s,d=r.shape,f=r.matrix,p=d.x,y=d.y;o.push(r.matrix?f.a*p+f.c*y+f.tx:p,r.matrix?f.b*p+f.d*y+f.ty:y);for(var g=0;g<i.length;g+=2)o.push(i[g],i[g+1]),a.push(s++,h,s)}},Nn={build:function(r){var n=r.shape,i=n.x,o=n.y,a=n.width,s=n.height,h=r.points;h.length=0,h.push(i,o,i+a,o,i+a,o+s,i,o+s)},triangulate:function(r,n){var i=r.points,o=n.points,a=o.length/2;o.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),n.indices.push(a,a+1,a+2,a+1,a+2,a+3)}};function getPt(r,n,i){return r+(n-r)*i}function quadraticBezierCurve(r,n,i,o,a,s,h){void 0===h&&(h=[]);for(var d=h,f=0,p=0,y=0,g=0,_=0,b=0,x=0,T=0;x<=20;++x)f=getPt(r,i,T=x/20),p=getPt(n,o,T),y=getPt(i,a,T),g=getPt(o,s,T),_=getPt(f,y,T),b=getPt(p,g,T),d.push(_,b);return d}var kn={build:function(r){var n=r.shape,i=r.points,o=n.x,a=n.y,s=n.width,h=n.height,d=Math.max(0,Math.min(n.radius,Math.min(s,h)/2));i.length=0,d?(quadraticBezierCurve(o,a+d,o,a,o+d,a,i),quadraticBezierCurve(o+s-d,a,o+s,a,o+s,a+d,i),quadraticBezierCurve(o+s,a+h-d,o+s,a+h,o+s-d,a+h,i),quadraticBezierCurve(o+d,a+h,o,a+h,o,a+h-d,i)):i.push(o,a,o+s,a,o+s,a+h,o,a+h)},triangulate:function(r,n){for(var i=r.points,o=n.points,a=n.indices,s=o.length/2,h=lt()(i,null,2),d=0,f=h.length;d<f;d+=3)a.push(h[d]+s),a.push(h[d+1]+s),a.push(h[d+2]+s);for(d=0,f=i.length;d<f;d++)o.push(i[d],i[++d])}};function square(r,n,i,o,a,s,h,d){var f,p;h?(f=o,p=-i):(f=-o,p=i);var y=r-i*a+f,g=n-o*a+p,_=r+i*s+f,b=n+o*s+p;return d.push(y,g),d.push(_,b),2}function round(r,n,i,o,a,s,h,d){var f=i-r,p=o-n,y=Math.atan2(f,p),g=Math.atan2(a-r,s-n);d&&y<g?y+=2*Math.PI:!d&&y>g&&(g+=2*Math.PI);var _=y,b=g-y,x=Math.abs(b),T=Math.sqrt(f*f+p*p),S=1+(15*x*Math.sqrt(T)/Math.PI>>0),E=b/S;if(_+=E,d){h.push(r,n),h.push(i,o);for(var w=1,P=_;w<S;w++,P+=E)h.push(r,n),h.push(r+Math.sin(P)*T,n+Math.cos(P)*T);h.push(r,n),h.push(a,s)}else{h.push(i,o),h.push(r,n);for(w=1,P=_;w<S;w++,P+=E)h.push(r+Math.sin(P)*T,n+Math.cos(P)*T),h.push(r,n);h.push(a,s),h.push(r,n)}return 2*S}function buildLine(r,n){r.lineStyle.native?function buildNativeLine(r,n){var i=0,o=r.shape,a=r.points||o.points,s=o.type!==wt.POLY||o.closeStroke;if(0!==a.length){var h=n.points,d=n.indices,f=a.length/2,p=h.length/2,y=p;for(h.push(a[0],a[1]),i=1;i<f;i++)h.push(a[2*i],a[2*i+1]),d.push(y,y+1),y++;s&&d.push(y,p)}}(r,n):function buildNonNativeLine(r,n){var i=r.shape,o=r.points||i.points.slice(),a=n.closePointEps;if(0!==o.length){var s=r.lineStyle,h=new Ft(o[0],o[1]),d=new Ft(o[o.length-2],o[o.length-1]),f=i.type!==wt.POLY||i.closeStroke,p=Math.abs(h.x-d.x)<a&&Math.abs(h.y-d.y)<a;if(f){o=o.slice(),p&&(o.pop(),o.pop(),d.set(o[o.length-2],o[o.length-1]));var y=.5*(h.x+d.x),g=.5*(d.y+h.y);o.unshift(y,g),o.push(y,g)}var _=n.points,b=o.length/2,x=o.length,T=_.length/2,S=s.width/2,E=S*S,w=s.miterLimit*s.miterLimit,P=o[0],O=o[1],R=o[2],C=o[3],M=0,D=0,F=-(O-C),N=P-R,U=0,j=0,X=Math.sqrt(F*F+N*N);F/=X,N/=X,F*=S,N*=S;var H=s.alignment,W=2*(1-H),V=2*H;f||(s.cap===On.ROUND?x+=round(P-F*(W-V)*.5,O-N*(W-V)*.5,P-F*W,O-N*W,P+F*V,O+N*V,_,!0)+2:s.cap===On.SQUARE&&(x+=square(P,O,F,N,W,V,!0,_))),_.push(P-F*W,O-N*W),_.push(P+F*V,O+N*V);for(var Y=1;Y<b-1;++Y){P=o[2*(Y-1)],O=o[2*(Y-1)+1],R=o[2*Y],C=o[2*Y+1],M=o[2*(Y+1)],D=o[2*(Y+1)+1],F=-(O-C),N=P-R,F/=X=Math.sqrt(F*F+N*N),N/=X,F*=S,N*=S,U=-(C-D),j=R-M,U/=X=Math.sqrt(U*U+j*j),j/=X,U*=S,j*=S;var q=R-P,Z=O-C,$=R-M,Q=D-C,tt=Z*$-Q*q,et=tt<0;if(Math.abs(tt)<.1)_.push(R-F*W,C-N*W),_.push(R+F*V,C+N*V);else{var rt=(-F+P)*(-N+C)-(-F+R)*(-N+O),nt=(-U+M)*(-j+C)-(-U+R)*(-j+D),it=(q*nt-$*rt)/tt,ot=(Q*rt-Z*nt)/tt,at=(it-R)*(it-R)+(ot-C)*(ot-C),st=R+(it-R)*W,ut=C+(ot-C)*W,ht=R-(it-R)*V,ct=C-(ot-C)*V;s.join===An.BEVEL||at/E>w?(et?(_.push(st,ut),_.push(R+F*V,C+N*V),_.push(st,ut),_.push(R+U*V,C+j*V)):(_.push(R-F*W,C-N*W),_.push(ht,ct),_.push(R-U*W,C-j*W),_.push(ht,ct)),x+=2):s.join===An.ROUND?et?(_.push(st,ut),_.push(R+F*V,C+N*V),x+=round(R,C,R+F*V,C+N*V,R+U*V,C+j*V,_,!0)+4,_.push(st,ut),_.push(R+U*V,C+j*V)):(_.push(R-F*W,C-N*W),_.push(ht,ct),x+=round(R,C,R-F*W,C-N*W,R-U*W,C-j*W,_,!1)+4,_.push(R-U*W,C-j*W),_.push(ht,ct)):(_.push(st,ut),_.push(ht,ct))}}P=o[2*(b-2)],O=o[2*(b-2)+1],R=o[2*(b-1)],F=-(O-(C=o[2*(b-1)+1])),N=P-R,F/=X=Math.sqrt(F*F+N*N),N/=X,F*=S,N*=S,_.push(R-F*W,C-N*W),_.push(R+F*V,C+N*V),f||(s.cap===On.ROUND?x+=round(R-F*(W-V)*.5,C-N*(W-V)*.5,R-F*W,C-N*W,R+F*V,C+N*V,_,!1)+2:s.cap===On.SQUARE&&(x+=square(R,C,F,N,W,V,!1,_)));var lt=n.indices,dt=Ln.epsilon*Ln.epsilon;for(Y=T;Y<x+T-2;++Y)P=_[2*Y],O=_[2*Y+1],R=_[2*(Y+1)],C=_[2*(Y+1)+1],M=_[2*(Y+2)],D=_[2*(Y+2)+1],Math.abs(P*(C-D)+R*(D-O)+M*(O-C))<dt||lt.push(Y,Y+1,Y+2)}}(r,n)}var Un,jn=function(r){function Star(n,i,o,a,s,h){void 0===h&&(h=0);s=s||a/2;for(var d=-1*Math.PI/2+h,f=2*o,p=Pt/f,y=[],g=0;g<f;g++){var _=g%2?s:a,b=g*p+d;y.push(n+_*Math.cos(b),i+_*Math.sin(b))}return r.call(this,y)||this}return graphics_es_extends(Star,r),Star}(Lt),Gn=function(){function ArcUtils(){}return ArcUtils.curveTo=function(r,n,i,o,a,s){var h=s[s.length-2],d=s[s.length-1]-n,f=h-r,p=o-n,y=i-r,g=Math.abs(d*y-f*p);if(g<1e-8||0===a)return s[s.length-2]===r&&s[s.length-1]===n||s.push(r,n),null;var _=d*d+f*f,b=p*p+y*y,x=d*p+f*y,T=a*Math.sqrt(_)/g,S=a*Math.sqrt(b)/g,E=T*x/_,w=S*x/b,P=T*y+S*f,O=T*p+S*d,R=f*(S+E),C=d*(S+E),M=y*(T+w),D=p*(T+w);return{cx:P+r,cy:O+n,radius:a,startAngle:Math.atan2(C-O,R-P),endAngle:Math.atan2(D-O,M-P),anticlockwise:f*p>y*d}},ArcUtils.arc=function(r,n,i,o,a,s,h,d,f){for(var p=h-s,y=Ln._segmentsCount(Math.abs(p)*a,40*Math.ceil(Math.abs(p)/Pt)),g=p/(2*y),_=2*g,b=Math.cos(g),x=Math.sin(g),T=y-1,S=T%1/T,E=0;E<=T;++E){var w=g+s+_*(E+S*E),P=Math.cos(w),O=-Math.sin(w);f.push((b*P+x*O)*a+i,(b*-O+x*P)*a+o)}},ArcUtils}(),Xn=function(){function BezierUtils(){}return BezierUtils.curveLength=function(r,n,i,o,a,s,h,d){for(var f=0,p=0,y=0,g=0,_=0,b=0,x=0,T=0,S=0,E=0,w=0,P=r,O=n,R=1;R<=10;++R)E=P-(T=(x=(b=(_=1-(p=R/10))*_)*_)*r+3*b*p*i+3*_*(y=p*p)*a+(g=y*p)*h),w=O-(S=x*n+3*b*p*o+3*_*y*s+g*d),P=T,O=S,f+=Math.sqrt(E*E+w*w);return f},BezierUtils.curveTo=function(r,n,i,o,a,s,h){var d=h[h.length-2],f=h[h.length-1];h.length-=2;var p=Ln._segmentsCount(BezierUtils.curveLength(d,f,r,n,i,o,a,s)),y=0,g=0,_=0,b=0,x=0;h.push(d,f);for(var T=1,S=0;T<=p;++T)_=(g=(y=1-(S=T/p))*y)*y,x=(b=S*S)*S,h.push(_*d+3*g*S*r+3*y*b*i+x*a,_*f+3*g*S*n+3*y*b*o+x*s)},BezierUtils}(),zn=function(){function QuadraticUtils(){}return QuadraticUtils.curveLength=function(r,n,i,o,a,s){var h=r-2*i+a,d=n-2*o+s,f=2*i-2*r,p=2*o-2*n,y=4*(h*h+d*d),g=4*(h*f+d*p),_=f*f+p*p,b=2*Math.sqrt(y+g+_),x=Math.sqrt(y),T=2*y*x,S=2*Math.sqrt(_),E=g/x;return(T*b+x*g*(b-S)+(4*_*y-g*g)*Math.log((2*x+E+b)/(E+S)))/(4*T)},QuadraticUtils.curveTo=function(r,n,i,o,a){for(var s=a[a.length-2],h=a[a.length-1],d=Ln._segmentsCount(QuadraticUtils.curveLength(s,h,r,n,i,o)),f=0,p=0,y=1;y<=d;++y){var g=y/d;f=s+(r-s)*g,p=h+(n-h)*g,a.push(f+(r+(i-r)*g-f)*g,p+(n+(o-n)*g-p)*g)}},QuadraticUtils}(),Hn=function(){function BatchPart(){this.reset()}return BatchPart.prototype.begin=function(r,n,i){this.reset(),this.style=r,this.start=n,this.attribStart=i},BatchPart.prototype.end=function(r,n){this.attribSize=n-this.attribStart,this.size=r-this.start},BatchPart.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},BatchPart}(),Wn=((Un={})[wt.POLY]=Fn,Un[wt.CIRC]=Bn,Un[wt.ELIP]=Bn,Un[wt.RECT]=Nn,Un[wt.RREC]=kn,Un),Vn=[],Yn=[],qn={buildPoly:Fn,buildCircle:Bn,buildRectangle:Nn,buildRoundedRectangle:kn,FILL_COMMANDS:Wn,BATCH_POOL:Vn,DRAW_CALL_POOL:Yn,buildLine:buildLine,Star:jn,ArcUtils:Gn,BezierUtils:Xn,QuadraticUtils:zn,BatchPart:Hn},Kn=function(){function GraphicsData(r,n,i,o){void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null),this.shape=r,this.lineStyle=i,this.fillStyle=n,this.matrix=o,this.type=r.type,this.points=[],this.holes=[]}return GraphicsData.prototype.clone=function(){return new GraphicsData(this.shape,this.fillStyle,this.lineStyle,this.matrix)},GraphicsData.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},GraphicsData}(),Zn=new Ft,$n=new Yt,Qn=function(r){function GraphicsGeometry(){var n=r.call(this)||this;return n.uvsFloat32=null,n.indicesUint16=null,n.points=[],n.colors=[],n.uvs=[],n.indices=[],n.textureIds=[],n.graphicsData=[],n.dirty=0,n.batchDirty=-1,n.cacheDirty=-1,n.clearDirty=0,n.drawCalls=[],n.batches=[],n.shapeIndex=0,n._bounds=new Yt,n.boundsDirty=-1,n.boundsPadding=0,n.batchable=!1,n.indicesUint16=null,n.uvsFloat32=null,n.closePointEps=1e-4,n}return graphics_es_extends(GraphicsGeometry,r),Object.defineProperty(GraphicsGeometry.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),GraphicsGeometry.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),Yn.push(this.drawCalls[r]);this.drawCalls.length=0;for(r=0;r<this.batches.length;r++){var n=this.batches[r];n.reset(),Vn.push(n)}this.batches.length=0},GraphicsGeometry.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},GraphicsGeometry.prototype.drawShape=function(r,n,i,o){void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null);var a=new Kn(r,n,i,o);return this.graphicsData.push(a),this.dirty++,this},GraphicsGeometry.prototype.drawHole=function(r,n){if(void 0===n&&(n=null),!this.graphicsData.length)return null;var i=new Kn(r,null,null,n),o=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=o.lineStyle,o.holes.push(i),this.dirty++,this},GraphicsGeometry.prototype.destroy=function(){r.prototype.destroy.call(this);for(var n=0;n<this.graphicsData.length;++n)this.graphicsData[n].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},GraphicsGeometry.prototype.containsPoint=function(r){for(var n=this.graphicsData,i=0;i<n.length;++i){var o=n[i];if(o.fillStyle.visible&&(o.shape&&(o.matrix?o.matrix.applyInverse(r,Zn):Zn.copyFrom(r),o.shape.contains(Zn.x,Zn.y)))){var a=!1;if(o.holes)for(var s=0;s<o.holes.length;s++){if(o.holes[s].shape.contains(Zn.x,Zn.y)){a=!0;break}}if(!a)return!0}}return!1},GraphicsGeometry.prototype.updateBatches=function(r){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var n=this.uvs,i=this.graphicsData,o=null,a=null;this.batches.length>0&&(a=(o=this.batches[this.batches.length-1]).style);for(var s=this.shapeIndex;s<i.length;s++){this.shapeIndex++;var h=i[s],d=h.fillStyle,f=h.lineStyle;Wn[h.type].build(h),h.matrix&&this.transformPoints(h.points,h.matrix);for(var p=0;p<2;p++){var y=0===p?d:f;if(y.visible){var g=y.texture.baseTexture,_=this.indices.length,b=this.points.length/2;g.wrapMode=Q.REPEAT,0===p?this.processFill(h):this.processLine(h);var x=this.points.length/2-b;0!==x&&(o&&!this._compareStyles(a,y)&&(o.end(_,b),o=null),o||((o=Vn.pop()||new Hn).begin(y,_,b),this.batches.push(o),a=y),this.addUvs(this.points,n,y.texture,b,x,y.matrix))}}}var T=this.indices.length,S=this.points.length/2;if(o&&o.end(T,S),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var E=S>65535&&r;this.indicesUint16=E?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},GraphicsGeometry.prototype._compareStyles=function(r,n){return!(!r||!n)&&(r.texture.baseTexture===n.texture.baseTexture&&(r.color+r.alpha===n.color+n.alpha&&!!r.native==!!n.native))},GraphicsGeometry.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var r=0,n=this.graphicsData.length;r<n;r++){var i=this.graphicsData[r],o=i.fillStyle,a=i.lineStyle;if(o&&!o.texture.baseTexture.valid)return!1;if(a&&!a.texture.baseTexture.valid)return!1}return!0},GraphicsGeometry.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var r=this.batches,n=0,i=r.length;n<i;n++)for(var o=r[n],a=0;a<o.size;a++){var s=o.start+a;this.indicesUint16[s]=this.indicesUint16[s]-o.attribStart}},GraphicsGeometry.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var r=this.batches,n=0;n<r.length;n++)if(r[n].style.native)return!1;return this.points.length<2*GraphicsGeometry.BATCHABLE_SIZE},GraphicsGeometry.prototype.buildDrawCalls=function(){for(var r=++ye._globalBatch,n=0;n<this.drawCalls.length;n++)this.drawCalls[n].texArray.clear(),Yn.push(this.drawCalls[n]);this.drawCalls.length=0;var i=this.colors,o=this.textureIds,a=Yn.pop();a||((a=new Zr).texArray=new $r),a.texArray.count=0,a.start=0,a.size=0,a.type=V.TRIANGLES;var s=0,h=null,d=0,f=!1,p=V.TRIANGLES,y=0;this.drawCalls.push(a);for(n=0;n<this.batches.length;n++){var g=this.batches[n],_=g.style,b=_.texture.baseTexture;f!==!!_.native&&(p=(f=!!_.native)?V.LINES:V.TRIANGLES,h=null,s=8,r++),h!==b&&(h=b,b._batchEnabled!==r&&(8===s&&(r++,s=0,a.size>0&&((a=Yn.pop())||((a=new Zr).texArray=new $r),this.drawCalls.push(a)),a.start=y,a.size=0,a.texArray.count=0,a.type=p),b.touched=1,b._batchEnabled=r,b._batchLocation=s,b.wrapMode=10497,a.texArray.elements[a.texArray.count++]=b,s++)),a.size+=g.size,y+=g.size,d=b._batchLocation,this.addColors(i,_.color,_.alpha,g.attribSize),this.addTextureIds(o,d,g.attribSize)}ye._globalBatch=r,this.packAttributes()},GraphicsGeometry.prototype.packAttributes=function(){for(var r=this.points,n=this.uvs,i=this.colors,o=this.textureIds,a=new ArrayBuffer(3*r.length*4),s=new Float32Array(a),h=new Uint32Array(a),d=0,f=0;f<r.length/2;f++)s[d++]=r[2*f],s[d++]=r[2*f+1],s[d++]=n[2*f],s[d++]=n[2*f+1],h[d++]=i[f],s[d++]=o[f];this._buffer.update(a),this._indexBuffer.update(this.indicesUint16)},GraphicsGeometry.prototype.processFill=function(r){r.holes.length?(this.processHoles(r.holes),Fn.triangulate(r,this)):Wn[r.type].triangulate(r,this)},GraphicsGeometry.prototype.processLine=function(r){buildLine(r,this);for(var n=0;n<r.holes.length;n++)buildLine(r.holes[n],this)},GraphicsGeometry.prototype.processHoles=function(r){for(var n=0;n<r.length;n++){var i=r[n];Wn[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},GraphicsGeometry.prototype.calculateBounds=function(){var r=this._bounds,n=$n,i=Nt.IDENTITY;this._bounds.clear(),n.clear();for(var o=0;o<this.graphicsData.length;o++){var a=this.graphicsData[o],s=a.shape,h=a.type,d=a.lineStyle,f=a.matrix||Nt.IDENTITY,p=0;if(d&&d.visible){var y=d.alignment;p=d.width,h===wt.POLY?p*=.5+Math.abs(.5-y):p*=Math.max(0,y)}if(i!==f&&(n.isEmpty()||(r.addBoundsMatrix(n,i),n.clear()),i=f),h===wt.RECT||h===wt.RREC){var g=s;n.addFramePad(g.x,g.y,g.x+g.width,g.y+g.height,p,p)}else if(h===wt.CIRC){var _=s;n.addFramePad(_.x,_.y,_.x,_.y,_.radius+p,_.radius+p)}else if(h===wt.ELIP){var b=s;n.addFramePad(b.x,b.y,b.x,b.y,b.width+p,b.height+p)}else{var x=s;r.addVerticesMatrix(i,x.points,0,x.points.length,p,p)}}n.isEmpty()||r.addBoundsMatrix(n,i),r.pad(this.boundsPadding,this.boundsPadding)},GraphicsGeometry.prototype.transformPoints=function(r,n){for(var i=0;i<r.length/2;i++){var o=r[2*i],a=r[2*i+1];r[2*i]=n.a*o+n.c*a+n.tx,r[2*i+1]=n.b*o+n.d*a+n.ty}},GraphicsGeometry.prototype.addColors=function(r,n,i,o){for(var a=premultiplyTint((n>>16)+(65280&n)+((255&n)<<16),i);o-- >0;)r.push(a)},GraphicsGeometry.prototype.addTextureIds=function(r,n,i){for(;i-- >0;)r.push(n)},GraphicsGeometry.prototype.addUvs=function(r,n,i,o,a,s){void 0===s&&(s=null);for(var h=0,d=n.length,f=i.frame;h<a;){var p=r[2*(o+h)],y=r[2*(o+h)+1];if(s){var g=s.a*p+s.c*y+s.tx;y=s.b*p+s.d*y+s.ty,p=g}h++,n.push(p/f.width,y/f.height)}var _=i.baseTexture;(f.width<_.width||f.height<_.height)&&this.adjustUvs(n,i,d,a)},GraphicsGeometry.prototype.adjustUvs=function(r,n,i,o){for(var a=n.baseTexture,s=1e-6,h=i+2*o,d=n.frame,f=d.width/a.width,p=d.height/a.height,y=d.x/d.width,g=d.y/d.height,_=Math.floor(r[i]+s),b=Math.floor(r[i+1]+s),x=i+2;x<h;x+=2)_=Math.min(_,Math.floor(r[x]+s)),b=Math.min(b,Math.floor(r[x+1]+s));y-=_,g-=b;for(x=i;x<h;x+=2)r[x]=(r[x]+y)*f,r[x+1]=(r[x+1]+g)*p},GraphicsGeometry.BATCHABLE_SIZE=100,GraphicsGeometry}(en),Jn=function(r){function LineStyle(){var n=null!==r&&r.apply(this,arguments)||this;return n.width=0,n.alignment=.5,n.native=!1,n.cap=On.BUTT,n.join=An.MITER,n.miterLimit=10,n}return graphics_es_extends(LineStyle,r),LineStyle.prototype.clone=function(){var r=new LineStyle;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r.width=this.width,r.alignment=this.alignment,r.native=this.native,r.cap=this.cap,r.join=this.join,r.miterLimit=this.miterLimit,r},LineStyle.prototype.reset=function(){r.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},LineStyle}(Dn),ti=new Float32Array(3),ei={},ri=function(r){function Graphics(n){void 0===n&&(n=null);var i=r.call(this)||this;return i._geometry=n||new Qn,i._geometry.refCount++,i.shader=null,i.state=xr.for2d(),i._fillStyle=new Dn,i._lineStyle=new Jn,i._matrix=null,i._holeMode=!1,i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i.pluginName="batch",i._transformID=-1,i.tint=16777215,i.blendMode=W.NORMAL,i}return graphics_es_extends(Graphics,r),Object.defineProperty(Graphics.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),Graphics.prototype.clone=function(){return this.finishPoly(),new Graphics(this._geometry)},Object.defineProperty(Graphics.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(Graphics.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(Graphics.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(Graphics.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),Graphics.prototype.lineStyle=function(r){if(void 0===r&&(r=null),"number"==typeof r){var n=arguments;r={width:n[0]||0,color:n[1]||0,alpha:void 0!==n[2]?n[2]:1,alignment:void 0!==n[3]?n[3]:.5,native:!!n[4]}}return this.lineTextureStyle(r)},Graphics.prototype.lineTextureStyle=function(r){if("number"==typeof r){deprecation("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var n=arguments,i=n[0],o=n[1],a=n[2],s=n[3],h=n[4],d=n[5],f=n[6];r={width:i,texture:o,color:a,alpha:s,matrix:h,alignment:d,native:f},Object.keys(r).forEach((function(n){return void 0===r[n]&&delete r[n]}))}r=Object.assign({width:0,texture:Me.WHITE,color:r&&r.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:On.BUTT,join:An.MITER,miterLimit:10},r),this.currentPath&&this.startPoly();var p=r.width>0&&r.alpha>0;return p?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._lineStyle,{visible:p},r)):this._lineStyle.reset(),this},Graphics.prototype.startPoly=function(){if(this.currentPath){var r=this.currentPath.points,n=this.currentPath.points.length;n>2&&(this.drawShape(this.currentPath),this.currentPath=new Lt,this.currentPath.closeStroke=!1,this.currentPath.points.push(r[n-2],r[n-1]))}else this.currentPath=new Lt,this.currentPath.closeStroke=!1},Graphics.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},Graphics.prototype.moveTo=function(r,n){return this.startPoly(),this.currentPath.points[0]=r,this.currentPath.points[1]=n,this},Graphics.prototype.lineTo=function(r,n){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,o=i[i.length-2],a=i[i.length-1];return o===r&&a===n||i.push(r,n),this},Graphics.prototype._initCurve=function(r,n){void 0===r&&(r=0),void 0===n&&(n=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[r,n]):this.moveTo(r,n)},Graphics.prototype.quadraticCurveTo=function(r,n,i,o){this._initCurve();var a=this.currentPath.points;return 0===a.length&&this.moveTo(0,0),zn.curveTo(r,n,i,o,a),this},Graphics.prototype.bezierCurveTo=function(r,n,i,o,a,s){return this._initCurve(),Xn.curveTo(r,n,i,o,a,s,this.currentPath.points),this},Graphics.prototype.arcTo=function(r,n,i,o,a){this._initCurve(r,n);var s=this.currentPath.points,h=Gn.curveTo(r,n,i,o,a,s);if(h){var d=h.cx,f=h.cy,p=h.radius,y=h.startAngle,g=h.endAngle,_=h.anticlockwise;this.arc(d,f,p,y,g,_)}return this},Graphics.prototype.arc=function(r,n,i,o,a,s){if(void 0===s&&(s=!1),o===a)return this;if(!s&&a<=o?a+=Pt:s&&o<=a&&(o+=Pt),0===a-o)return this;var h=r+Math.cos(o)*i,d=n+Math.sin(o)*i,f=this._geometry.closePointEps,p=this.currentPath?this.currentPath.points:null;if(p){var y=Math.abs(p[p.length-2]-h),g=Math.abs(p[p.length-1]-d);y<f&&g<f||p.push(h,d)}else this.moveTo(h,d),p=this.currentPath.points;return Gn.arc(h,d,r,n,i,o,a,s,p),this},Graphics.prototype.beginFill=function(r,n){return void 0===r&&(r=0),void 0===n&&(n=1),this.beginTextureFill({texture:Me.WHITE,color:r,alpha:n})},Graphics.prototype.beginTextureFill=function(r){if(r instanceof Me){deprecation("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var n=arguments,i=n[0],o=n[1],a=n[2],s=n[3];r={texture:i,color:o,alpha:a,matrix:s},Object.keys(r).forEach((function(n){return void 0===r[n]&&delete r[n]}))}r=Object.assign({texture:Me.WHITE,color:16777215,alpha:1,matrix:null},r),this.currentPath&&this.startPoly();var h=r.alpha>0;return h?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._fillStyle,{visible:h},r)):this._fillStyle.reset(),this},Graphics.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},Graphics.prototype.drawRect=function(r,n,i,o){return this.drawShape(new Rt(r,n,i,o))},Graphics.prototype.drawRoundedRect=function(r,n,i,o,a){return this.drawShape(new Dt(r,n,i,o,a))},Graphics.prototype.drawCircle=function(r,n,i){return this.drawShape(new Ct(r,n,i))},Graphics.prototype.drawEllipse=function(r,n,i,o){return this.drawShape(new Mt(r,n,i,o))},Graphics.prototype.drawPolygon=function(){for(var r,n=arguments,i=[],o=0;o<arguments.length;o++)i[o]=n[o];var a=!0,s=i[0];s.points?(a=s.closeStroke,r=s.points):r=Array.isArray(i[0])?i[0]:i;var h=new Lt(r);return h.closeStroke=a,this.drawShape(h),this},Graphics.prototype.drawShape=function(r){return this._holeMode?this._geometry.drawHole(r,this._matrix):this._geometry.drawShape(r,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},Graphics.prototype.drawStar=function(r,n,i,o,a,s){return void 0===s&&(s=0),this.drawPolygon(new jn(r,n,i,o,a,s))},Graphics.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},Graphics.prototype.isFastRect=function(){var r=this._geometry.graphicsData;return 1===r.length&&r[0].shape.type===wt.RECT&&!(r[0].lineStyle.visible&&r[0].lineStyle.width)},Graphics.prototype._render=function(r){this.finishPoly();var n=this._geometry,i=r.context.supports.uint32Indices;n.updateBatches(i),n.batchable?(this.batchDirty!==n.batchDirty&&this._populateBatches(),this._renderBatched(r)):(r.batch.flush(),this._renderDirect(r))},Graphics.prototype._populateBatches=function(){var r=this._geometry,n=this.blendMode,i=r.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=r.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(r.points);for(var o=0;o<i;o++){var a=r.batches[o],s=a.style.color,h=new Float32Array(this.vertexData.buffer,4*a.attribStart*2,2*a.attribSize),d=new Float32Array(r.uvsFloat32.buffer,4*a.attribStart*2,2*a.attribSize),f={vertexData:h,blendMode:n,indices:new Uint16Array(r.indicesUint16.buffer,2*a.start,a.size),uvs:d,_batchRGB:hex2rgb(s),_tintRGB:s,_texture:a.style.texture,alpha:a.style.alpha,worldAlpha:1};this.batches[o]=f}},Graphics.prototype._renderBatched=function(r){if(this.batches.length){r.batch.setObjectRenderer(r.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var n=0,i=this.batches.length;n<i;n++){var o=this.batches[n];o.worldAlpha=this.worldAlpha*o.alpha,r.plugins[this.pluginName].render(o)}}},Graphics.prototype._renderDirect=function(r){var n=this._resolveDirectShader(r),i=this._geometry,o=this.tint,a=this.worldAlpha,s=n.uniforms,h=i.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(o>>16&255)/255*a,s.tint[1]=(o>>8&255)/255*a,s.tint[2]=(255&o)/255*a,s.tint[3]=a,r.shader.bind(n),r.geometry.bind(i,n),r.state.set(this.state);for(var d=0,f=h.length;d<f;d++)this._renderDrawCallDirect(r,i.drawCalls[d])},Graphics.prototype._renderDrawCallDirect=function(r,n){for(var i=n.texArray,o=n.type,a=n.size,s=n.start,h=i.count,d=0;d<h;d++)r.texture.bind(i.elements[d],d);r.geometry.draw(o,a,s)},Graphics.prototype._resolveDirectShader=function(r){var n=this.shader,i=this.pluginName;if(!n){if(!ei[i]){for(var o=new Int32Array(16),a=0;a<16;a++)o[a]=a;var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new Nt,default:Ve.from({uSamplers:o},!0)},h=r.plugins[i]._shader.program;ei[i]=new br(h,s)}n=ei[i]}return n},Graphics.prototype._calculateBounds=function(){this.finishPoly();var r=this._geometry;if(r.graphicsData.length){var n=r.bounds,i=n.minX,o=n.minY,a=n.maxX,s=n.maxY;this._bounds.addFrame(this.transform,i,o,a,s)}},Graphics.prototype.containsPoint=function(r){return this.worldTransform.applyInverse(r,Graphics._TEMP_POINT),this._geometry.containsPoint(Graphics._TEMP_POINT)},Graphics.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var r=hex2rgb(this.tint,ti),n=0;n<this.batches.length;n++){var i=this.batches[n],o=i._batchRGB,a=(r[0]*o[0]*255<<16)+(r[1]*o[1]*255<<8)+(0|r[2]*o[2]*255);i._tintRGB=(a>>16)+(65280&a)+((255&a)<<16)}}},Graphics.prototype.calculateVertices=function(){var r=this.transform._worldID;if(this._transformID!==r){this._transformID=r;for(var n=this.transform.worldTransform,i=n.a,o=n.b,a=n.c,s=n.d,h=n.tx,d=n.ty,f=this._geometry.points,p=this.vertexData,y=0,g=0;g<f.length;g+=2){var _=f[g],b=f[g+1];p[y++]=i*_+a*b+h,p[y++]=s*b+o*_+d}}},Graphics.prototype.closePath=function(){var r=this.currentPath;return r&&(r.closeStroke=!0),this},Graphics.prototype.setMatrix=function(r){return this._matrix=r,this},Graphics.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},Graphics.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},Graphics.prototype.destroy=function(n){r.prototype.destroy.call(this,n),this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,r.prototype.destroy.call(this,n)},Graphics._TEMP_POINT=new Ft,Graphics}(Zt),sprite_es_extendStatics=function(r,n){return(sprite_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};var ni,ii=new Ft,oi=new Uint16Array([0,1,2,0,2,3]),ai=function(r){function Sprite(n){var i=r.call(this)||this;return i._anchor=new Bt(i._onAnchorUpdate,i,n?n.defaultAnchor.x:0,n?n.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=W.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=n||Me.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=oi,i.pluginName="batch",i.isSprite=!0,i._roundPixels=st.ROUND_PIXELS,i}return function sprite_es_extends(r,n){function __(){this.constructor=r}sprite_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}(Sprite,r),Sprite.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sign(this.scale.y)*this._height/this._texture.orig.height)},Sprite.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},Sprite.prototype.calculateVertices=function(){var r=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==r._updateID){this._textureID!==r._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=r._updateID;var n=this.transform.worldTransform,i=n.a,o=n.b,a=n.c,s=n.d,h=n.tx,d=n.ty,f=this.vertexData,p=r.trim,y=r.orig,g=this._anchor,_=0,b=0,x=0,T=0;if(p?(_=(b=p.x-g._x*y.width)+p.width,x=(T=p.y-g._y*y.height)+p.height):(_=(b=-g._x*y.width)+y.width,x=(T=-g._y*y.height)+y.height),f[0]=i*b+a*T+h,f[1]=s*T+o*b+d,f[2]=i*_+a*T+h,f[3]=s*T+o*_+d,f[4]=i*_+a*x+h,f[5]=s*x+o*_+d,f[6]=i*b+a*x+h,f[7]=s*x+o*b+d,this._roundPixels)for(var S=st.RESOLUTION,E=0;E<f.length;++E)f[E]=Math.round((f[E]*S|0)/S)}},Sprite.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var r=this._texture,n=this.vertexTrimmedData,i=r.orig,o=this._anchor,a=this.transform.worldTransform,s=a.a,h=a.b,d=a.c,f=a.d,p=a.tx,y=a.ty,g=-o._x*i.width,_=g+i.width,b=-o._y*i.height,x=b+i.height;n[0]=s*g+d*b+p,n[1]=f*b+h*g+y,n[2]=s*_+d*b+p,n[3]=f*b+h*_+y,n[4]=s*_+d*x+p,n[5]=f*x+h*_+y,n[6]=s*g+d*x+p,n[7]=f*x+h*g+y},Sprite.prototype._render=function(r){this.calculateVertices(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this)},Sprite.prototype._calculateBounds=function(){var r=this._texture.trim,n=this._texture.orig;!r||r.width===n.width&&r.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},Sprite.prototype.getLocalBounds=function(n){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),n||(this._localBoundsRect||(this._localBoundsRect=new Rt),n=this._localBoundsRect),this._bounds.getRectangle(n)):r.prototype.getLocalBounds.call(this,n)},Sprite.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,ii);var n=this._texture.orig.width,i=this._texture.orig.height,o=-n*this.anchor.x,a=0;return ii.x>=o&&ii.x<o+n&&(a=-i*this.anchor.y,ii.y>=a&&ii.y<a+i)},Sprite.prototype.destroy=function(n){if(r.prototype.destroy.call(this,n),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof n?n:n&&n.texture){var i="boolean"==typeof n?n:n&&n.baseTexture;this._texture.destroy(!!i)}this._texture=null},Sprite.from=function(r,n){return new Sprite(r instanceof Me?r:Me.from(r,n))},Object.defineProperty(Sprite.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){var n=sign(this.scale.x)||1;this.scale.x=n*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){var n=sign(this.scale.y)||1;this.scale.y=n*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"anchor",{get:function(){return this._anchor},set:function(r){this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,this._tintRGB=(r>>16)+(65280&r)+((255&r)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture!==r&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=r||Me.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,r&&(r.baseTexture.valid?this._onTextureUpdate():r.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),Sprite}(Zt),text_es_extendStatics=function(r,n){return(text_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};!function(r){r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(ni||(ni={}));var si={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:ni.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},ui=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],hi=function(){function TextStyle(r){this.styleID=0,this.reset(),deepCopyProperties(this,r,r)}return TextStyle.prototype.clone=function(){var r={};return deepCopyProperties(r,this,si),new TextStyle(r)},TextStyle.prototype.reset=function(){deepCopyProperties(this,si,si)},Object.defineProperty(TextStyle.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"breakWords",{get:function(){return this._breakWords},set:function(r){this._breakWords!==r&&(this._breakWords=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(r){this._dropShadow!==r&&(this._dropShadow=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(r){this._dropShadowAlpha!==r&&(this._dropShadowAlpha=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(r){this._dropShadowAngle!==r&&(this._dropShadowAngle=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(r){this._dropShadowBlur!==r&&(this._dropShadowBlur=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(r){var n=getColor(r);this._dropShadowColor!==n&&(this._dropShadowColor=n,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(r){this._dropShadowDistance!==r&&(this._dropShadowDistance=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fill",{get:function(){return this._fill},set:function(r){var n=getColor(r);this._fill!==n&&(this._fill=n,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(r){this._fillGradientType!==r&&(this._fillGradientType=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(r){(function areArraysEqual(r,n){if(!Array.isArray(r)||!Array.isArray(n))return!1;if(r.length!==n.length)return!1;for(var i=0;i<r.length;++i)if(r[i]!==n[i])return!1;return!0})(this._fillGradientStops,r)||(this._fillGradientStops=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(r){this.fontFamily!==r&&(this._fontFamily=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontSize",{get:function(){return this._fontSize},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(r){this._fontStyle!==r&&(this._fontStyle=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(r){this._fontVariant!==r&&(this._fontVariant=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(r){this._fontWeight!==r&&(this._fontWeight=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(r){this._lineHeight!==r&&(this._lineHeight=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"leading",{get:function(){return this._leading},set:function(r){this._leading!==r&&(this._leading=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(r){this._lineJoin!==r&&(this._lineJoin=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(r){this._miterLimit!==r&&(this._miterLimit=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"padding",{get:function(){return this._padding},set:function(r){this._padding!==r&&(this._padding=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"stroke",{get:function(){return this._stroke},set:function(r){var n=getColor(r);this._stroke!==n&&(this._stroke=n,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(r){this._strokeThickness!==r&&(this._strokeThickness=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(r){this._textBaseline!==r&&(this._textBaseline=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"trim",{get:function(){return this._trim},set:function(r){this._trim!==r&&(this._trim=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(r){this._whiteSpace!==r&&(this._whiteSpace=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(r){this._wordWrap!==r&&(this._wordWrap=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(r){this._wordWrapWidth!==r&&(this._wordWrapWidth=r,this.styleID++)},enumerable:!1,configurable:!0}),TextStyle.prototype.toFontString=function(){var r="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,n=this.fontFamily;Array.isArray(this.fontFamily)||(n=this.fontFamily.split(","));for(var i=n.length-1;i>=0;i--){var o=n[i].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&ui.indexOf(o)<0&&(o='"'+o+'"'),n[i]=o}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+r+" "+n.join(",")},TextStyle}();function getSingleColor(r){return"number"==typeof r?hex2string(r):("string"==typeof r&&0===r.indexOf("0x")&&(r=r.replace("0x","#")),r)}function getColor(r){if(Array.isArray(r)){for(var n=0;n<r.length;++n)r[n]=getSingleColor(r[n]);return r}return getSingleColor(r)}function deepCopyProperties(r,n,i){for(var o in i)Array.isArray(n[o])?r[o]=n[o].slice():r[o]=n[o]}var ci=function(){function TextMetrics(r,n,i,o,a,s,h,d,f){this.text=r,this.style=n,this.width=i,this.height=o,this.lines=a,this.lineWidths=s,this.lineHeight=h,this.maxLineWidth=d,this.fontProperties=f}return TextMetrics.measureText=function(r,n,i,o){void 0===o&&(o=TextMetrics._canvas),i=null==i?n.wordWrap:i;var a=n.toFontString(),s=TextMetrics.measureFont(a);0===s.fontSize&&(s.fontSize=n.fontSize,s.ascent=n.fontSize);var h=o.getContext("2d");h.font=a;for(var d=(i?TextMetrics.wordWrap(r,n,o):r).split(/(?:\r\n|\r|\n)/),f=new Array(d.length),p=0,y=0;y<d.length;y++){var g=h.measureText(d[y]).width+(d[y].length-1)*n.letterSpacing;f[y]=g,p=Math.max(p,g)}var _=p+n.strokeThickness;n.dropShadow&&(_+=n.dropShadowDistance);var b=n.lineHeight||s.fontSize+n.strokeThickness,x=Math.max(b,s.fontSize+n.strokeThickness)+(d.length-1)*(b+n.leading);return n.dropShadow&&(x+=n.dropShadowDistance),new TextMetrics(r,n,_,x,d,f,b+n.leading,p,s)},TextMetrics.wordWrap=function(r,n,i){void 0===i&&(i=TextMetrics._canvas);for(var o=i.getContext("2d"),a=0,s="",h="",d={},f=n.letterSpacing,p=n.whiteSpace,y=TextMetrics.collapseSpaces(p),g=TextMetrics.collapseNewlines(p),_=!y,b=n.wordWrapWidth+f,x=TextMetrics.tokenize(r),T=0;T<x.length;T++){var S=x[T];if(TextMetrics.isNewline(S)){if(!g){h+=TextMetrics.addLine(s),_=!y,s="",a=0;continue}S=" "}if(y){var E=TextMetrics.isBreakingSpace(S),w=TextMetrics.isBreakingSpace(s[s.length-1]);if(E&&w)continue}var P=TextMetrics.getFromCache(S,f,d,o);if(P>b)if(""!==s&&(h+=TextMetrics.addLine(s),s="",a=0),TextMetrics.canBreakWords(S,n.breakWords))for(var O=TextMetrics.wordWrapSplit(S),R=0;R<O.length;R++){for(var C=O[R],M=1;O[R+M];){var D=O[R+M],F=C[C.length-1];if(TextMetrics.canBreakChars(F,D,S,R,n.breakWords))break;C+=D,M++}R+=C.length-1;var N=TextMetrics.getFromCache(C,f,d,o);N+a>b&&(h+=TextMetrics.addLine(s),_=!1,s="",a=0),s+=C,a+=N}else{s.length>0&&(h+=TextMetrics.addLine(s),s="",a=0);var U=T===x.length-1;h+=TextMetrics.addLine(S,!U),_=!1,s="",a=0}else P+a>b&&(_=!1,h+=TextMetrics.addLine(s),s="",a=0),(s.length>0||!TextMetrics.isBreakingSpace(S)||_)&&(s+=S,a+=P)}return h+=TextMetrics.addLine(s,!1)},TextMetrics.addLine=function(r,n){return void 0===n&&(n=!0),r=TextMetrics.trimRight(r),r=n?r+"\n":r},TextMetrics.getFromCache=function(r,n,i,o){var a=i[r];if(void 0===a){var s=r.length*n;a=o.measureText(r).width+s,i[r]=a}return a},TextMetrics.collapseSpaces=function(r){return"normal"===r||"pre-line"===r},TextMetrics.collapseNewlines=function(r){return"normal"===r},TextMetrics.trimRight=function(r){if("string"!=typeof r)return"";for(var n=r.length-1;n>=0;n--){var i=r[n];if(!TextMetrics.isBreakingSpace(i))break;r=r.slice(0,-1)}return r},TextMetrics.isNewline=function(r){return"string"==typeof r&&TextMetrics._newlines.indexOf(r.charCodeAt(0))>=0},TextMetrics.isBreakingSpace=function(r){return"string"==typeof r&&TextMetrics._breakingSpaces.indexOf(r.charCodeAt(0))>=0},TextMetrics.tokenize=function(r){var n=[],i="";if("string"!=typeof r)return n;for(var o=0;o<r.length;o++){var a=r[o];TextMetrics.isBreakingSpace(a)||TextMetrics.isNewline(a)?(""!==i&&(n.push(i),i=""),n.push(a)):i+=a}return""!==i&&n.push(i),n},TextMetrics.canBreakWords=function(r,n){return n},TextMetrics.canBreakChars=function(r,n,i,o,a){return!0},TextMetrics.wordWrapSplit=function(r){return r.split("")},TextMetrics.measureFont=function(r){if(TextMetrics._fonts[r])return TextMetrics._fonts[r];var n={ascent:0,descent:0,fontSize:0},i=TextMetrics._canvas,o=TextMetrics._context;o.font=r;var a=TextMetrics.METRICS_STRING+TextMetrics.BASELINE_SYMBOL,s=Math.ceil(o.measureText(a).width),h=Math.ceil(o.measureText(TextMetrics.BASELINE_SYMBOL).width),d=2*h;h=h*TextMetrics.BASELINE_MULTIPLIER|0,i.width=s,i.height=d,o.fillStyle="#f00",o.fillRect(0,0,s,d),o.font=r,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(a,0,h);var f=o.getImageData(0,0,s,d).data,p=f.length,y=4*s,g=0,_=0,b=!1;for(g=0;g<h;++g){for(var x=0;x<y;x+=4)if(255!==f[_+x]){b=!0;break}if(b)break;_+=y}for(n.ascent=h-g,_=p-y,b=!1,g=d;g>h;--g){for(x=0;x<y;x+=4)if(255!==f[_+x]){b=!0;break}if(b)break;_-=y}return n.descent=g-h,n.fontSize=n.ascent+n.descent,TextMetrics._fonts[r]=n,n},TextMetrics.clearMetrics=function(r){void 0===r&&(r=""),r?delete TextMetrics._fonts[r]:TextMetrics._fonts={}},TextMetrics}(),li=function(){try{var r=new OffscreenCanvas(0,0),n=r.getContext("2d");return n&&n.measureText?r:document.createElement("canvas")}catch(r){return document.createElement("canvas")}}();li.width=li.height=10,ci._canvas=li,ci._context=li.getContext("2d"),ci._fonts={},ci.METRICS_STRING="|ÉqÅ",ci.BASELINE_SYMBOL="M",ci.BASELINE_MULTIPLIER=1.4,ci._newlines=[10,13],ci._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var di={texture:!0,children:!1,baseTexture:!0},fi=function(r){function Text(n,i,o){var a=this,s=!1;o||(o=document.createElement("canvas"),s=!0),o.width=3,o.height=3;var h=Me.from(o);return h.orig=new Rt,h.trim=new Rt,(a=r.call(this,h)||this)._ownCanvas=s,a.canvas=o,a.context=a.canvas.getContext("2d"),a._resolution=st.RESOLUTION,a._autoResolution=!0,a._text=null,a._style=null,a._styleListener=null,a._font="",a.text=n,a.style=i,a.localStyleID=-1,a}return function text_es_extends(r,n){function __(){this.constructor=r}text_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}(Text,r),Text.prototype.updateText=function(r){var n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),this.dirty||!r){this._font=this._style.toFontString();var i,o,a=this.context,s=ci.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),h=s.width,d=s.height,f=s.lines,p=s.lineHeight,y=s.lineWidths,g=s.maxLineWidth,_=s.fontProperties;this.canvas.width=Math.ceil((Math.max(1,h)+2*n.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,d)+2*n.padding)*this._resolution),a.scale(this._resolution,this._resolution),a.clearRect(0,0,this.canvas.width,this.canvas.height),a.font=this._font,a.lineWidth=n.strokeThickness,a.textBaseline=n.textBaseline,a.lineJoin=n.lineJoin,a.miterLimit=n.miterLimit;for(var b=n.dropShadow?2:1,x=0;x<b;++x){var T=n.dropShadow&&0===x,S=T?2*d:0,E=S*this.resolution;if(T){a.fillStyle="black",a.strokeStyle="black";var w=n.dropShadowColor,P=hex2rgb("number"==typeof w?w:string2hex(w));a.shadowColor="rgba("+255*P[0]+","+255*P[1]+","+255*P[2]+","+n.dropShadowAlpha+")",a.shadowBlur=n.dropShadowBlur,a.shadowOffsetX=Math.cos(n.dropShadowAngle)*n.dropShadowDistance,a.shadowOffsetY=Math.sin(n.dropShadowAngle)*n.dropShadowDistance+E}else a.fillStyle=this._generateFillStyle(n,f,s),a.strokeStyle=n.stroke,a.shadowColor="0",a.shadowBlur=0,a.shadowOffsetX=0,a.shadowOffsetY=0;for(var O=0;O<f.length;O++)i=n.strokeThickness/2,o=n.strokeThickness/2+O*p+_.ascent,"right"===n.align?i+=g-y[O]:"center"===n.align&&(i+=(g-y[O])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(f[O],i+n.padding,o+n.padding-S,!0),n.fill&&this.drawLetterSpacing(f[O],i+n.padding,o+n.padding-S)}this.updateTexture()}},Text.prototype.drawLetterSpacing=function(r,n,i,o){void 0===o&&(o=!1);var a=this._style.letterSpacing;if(0!==a)for(var s=n,h=Array.from?Array.from(r):r.split(""),d=this.context.measureText(r).width,f=0,p=0;p<h.length;++p){var y=h[p];o?this.context.strokeText(y,s,i):this.context.fillText(y,s,i),s+=d-(f=this.context.measureText(r.substring(p+1)).width)+a,d=f}else o?this.context.strokeText(r,n,i):this.context.fillText(r,n,i)},Text.prototype.updateTexture=function(){var r=this.canvas;if(this._style.trim){var n=trimCanvas(r);n.data&&(r.width=n.width,r.height=n.height,this.context.putImageData(n.data,0,0))}var i=this._texture,o=this._style,a=o.trim?0:o.padding,s=i.baseTexture;i.trim.width=i._frame.width=Math.ceil(r.width/this._resolution),i.trim.height=i._frame.height=Math.ceil(r.height/this._resolution),i.trim.x=-a,i.trim.y=-a,i.orig.width=i._frame.width-2*a,i.orig.height=i._frame.height-2*a,this._onTextureUpdate(),s.setRealSize(r.width,r.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},Text.prototype._render=function(n){this._autoResolution&&this._resolution!==n.resolution&&(this._resolution=n.resolution,this.dirty=!0),this.updateText(!0),r.prototype._render.call(this,n)},Text.prototype.getLocalBounds=function(n){return this.updateText(!0),r.prototype.getLocalBounds.call(this,n)},Text.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},Text.prototype._generateFillStyle=function(r,n,i){var o,a=r.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var s=r.dropShadow?r.dropShadowDistance:0,h=r.padding||0,d=Math.ceil(this.canvas.width/this._resolution)-s-2*h,f=Math.ceil(this.canvas.height/this._resolution)-s-2*h,p=a.slice(),y=r.fillGradientStops.slice();if(!y.length)for(var g=p.length+1,_=1;_<g;++_)y.push(_/g);if(p.unshift(a[0]),y.unshift(0),p.push(a[a.length-1]),y.push(1),r.fillGradientType===ni.LINEAR_VERTICAL){o=this.context.createLinearGradient(d/2,h,d/2,f+h);var b=0,x=(i.fontProperties.fontSize+r.strokeThickness)/f;for(_=0;_<n.length;_++)for(var T=i.lineHeight*_,S=0;S<p.length;S++){var E=T/f+("number"==typeof y[S]?y[S]:S/p.length)*x,w=Math.max(b,E);w=Math.min(w,1),o.addColorStop(w,p[S]),b=w}}else{o=this.context.createLinearGradient(h,f/2,d+h,f/2);var P=p.length+1,O=1;for(_=0;_<p.length;_++){var R=void 0;R="number"==typeof y[_]?y[_]:O/P,o.addColorStop(R,p[_]),O++}}return o},Text.prototype.destroy=function(n){"boolean"==typeof n&&(n={children:n}),n=Object.assign({},di,n),r.prototype.destroy.call(this,n),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(Text.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){this.updateText(!0);var n=sign(this.scale.x)||1;this.scale.x=n*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(Text.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){this.updateText(!0);var n=sign(this.scale.y)||1;this.scale.y=n*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(Text.prototype,"style",{get:function(){return this._style},set:function(r){r=r||{},this._style=r instanceof hi?r:new hi(r),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(Text.prototype,"text",{get:function(){return this._text},set:function(r){r=String(null==r?"":r),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Text.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Text}(ai);st.UPLOADS_PER_FRAME=4;var prepare_es_extendStatics=function(r,n){return(prepare_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};var pi=function(){function CountLimiter(r){this.maxItemsPerFrame=r,this.itemsLeft=0}return CountLimiter.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},CountLimiter.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},CountLimiter}();function findMultipleBaseTextures(r,n){var i=!1;if(r&&r._textures&&r._textures.length)for(var o=0;o<r._textures.length;o++)if(r._textures[o]instanceof Me){var a=r._textures[o].baseTexture;-1===n.indexOf(a)&&(n.push(a),i=!0)}return i}function findBaseTexture(r,n){if(r.baseTexture instanceof ye){var i=r.baseTexture;return-1===n.indexOf(i)&&n.push(i),!0}return!1}function findTexture(r,n){if(r._texture&&r._texture instanceof Me){var i=r._texture.baseTexture;return-1===n.indexOf(i)&&n.push(i),!0}return!1}function drawText(r,n){return n instanceof fi&&(n.updateText(!0),!0)}function calculateTextStyle(r,n){if(n instanceof hi){var i=n.toFontString();return ci.measureFont(i),!0}return!1}function findText(r,n){if(r instanceof fi){-1===n.indexOf(r.style)&&n.push(r.style),-1===n.indexOf(r)&&n.push(r);var i=r._texture.baseTexture;return-1===n.indexOf(i)&&n.push(i),!0}return!1}function findTextStyle(r,n){return r instanceof hi&&(-1===n.indexOf(r)&&n.push(r),!0)}var yi=function(){function BasePrepare(r){var n=this;this.limiter=new pi(st.UPLOADS_PER_FRAME),this.renderer=r,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){n.queue&&n.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}return BasePrepare.prototype.upload=function(r,n){"function"==typeof r&&(n=r,r=null),r&&this.add(r),this.queue.length?(n&&this.completes.push(n),this.ticking||(this.ticking=!0,ee.system.addOnce(this.tick,this,Qt.UTILITY))):n&&n()},BasePrepare.prototype.tick=function(){setTimeout(this.delayedTick,0)},BasePrepare.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var r=this.queue[0],n=!1;if(r&&!r._destroyed)for(var i=0,o=this.uploadHooks.length;i<o;i++)if(this.uploadHooks[i](this.uploadHookHelper,r)){this.queue.shift(),n=!0;break}n||this.queue.shift()}if(this.queue.length)ee.system.addOnce(this.tick,this,Qt.UTILITY);else{this.ticking=!1;var a=this.completes.slice(0);this.completes.length=0;for(i=0,o=a.length;i<o;i++)a[i]()}},BasePrepare.prototype.registerFindHook=function(r){return r&&this.addHooks.push(r),this},BasePrepare.prototype.registerUploadHook=function(r){return r&&this.uploadHooks.push(r),this},BasePrepare.prototype.add=function(r){for(var n=0,i=this.addHooks.length;n<i&&!this.addHooks[n](r,this.queue);n++);if(r instanceof Zt)for(n=r.children.length-1;n>=0;n--)this.add(r.children[n]);return this},BasePrepare.prototype.destroy=function(){this.ticking&&ee.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},BasePrepare}();function uploadBaseTextures(r,n){return n instanceof ye&&(n._glTextures[r.CONTEXT_UID]||r.texture.bind(n),!0)}function uploadGraphics(r,n){if(!(n instanceof ri))return!1;var i=n.geometry;n.finishPoly(),i.updateBatches();for(var o=i.batches,a=0;a<o.length;a++){var s=o[a].style.texture;s&&uploadBaseTextures(r,s.baseTexture)}return i.batchable||r.geometry.bind(i,n._resolveDirectShader(r)),!0}function findGraphics(r,n){return r instanceof ri&&(n.push(r),!0)}var mi=function(r){function Prepare(n){var i=r.call(this,n)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(findGraphics),i.registerUploadHook(uploadBaseTextures),i.registerUploadHook(uploadGraphics),i}return function prepare_es_extends(r,n){function __(){this.constructor=r}prepare_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}(Prepare,r),Prepare}(yi),gi=function(){function TimeLimiter(r){this.maxMilliseconds=r,this.frameStart=0}return TimeLimiter.prototype.beginFrame=function(){this.frameStart=Date.now()},TimeLimiter.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},TimeLimiter}(),vi=function(){function Spritesheet(r,n,i){void 0===i&&(i=null),this._texture=r instanceof Me?r:null,this.baseTexture=r instanceof ye?r:this._texture.baseTexture,this.textures={},this.animations={},this.data=n;var o=this.baseTexture.resource;this.resolution=this._updateResolution(i||(o?o.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return Spritesheet.prototype._updateResolution=function(r){void 0===r&&(r=null);var n=this.data.meta.scale,i=getResolutionOfUrl(r,null);return null===i&&(i=void 0!==n?parseFloat(n):1),1!==i&&this.baseTexture.setResolution(i),i},Spritesheet.prototype.parse=function(r){this._batchIndex=0,this._callback=r,this._frameKeys.length<=Spritesheet.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},Spritesheet.prototype._processFrames=function(r){for(var n=r,i=Spritesheet.BATCH_SIZE;n-r<i&&n<this._frameKeys.length;){var o=this._frameKeys[n],a=this._frames[o],s=a.frame;if(s){var h=null,d=null,f=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,p=new Rt(0,0,Math.floor(f.w)/this.resolution,Math.floor(f.h)/this.resolution);h=a.rotated?new Rt(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):new Rt(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(d=new Rt(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[o]=new Me(this.baseTexture,h,p,d,a.rotated?2:0,a.anchor),Me.addToCache(this.textures[o],o)}n++}},Spritesheet.prototype._processAnimations=function(){var r=this.data.animations||{};for(var n in r){this.animations[n]=[];for(var i=0;i<r[n].length;i++){var o=r[n][i];this.animations[n].push(this.textures[o])}}},Spritesheet.prototype._parseComplete=function(){var r=this._callback;this._callback=null,this._batchIndex=0,r.call(this,this.textures)},Spritesheet.prototype._nextBatch=function(){var r=this;this._processFrames(this._batchIndex*Spritesheet.BATCH_SIZE),this._batchIndex++,setTimeout((function(){r._batchIndex*Spritesheet.BATCH_SIZE<r._frameKeys.length?r._nextBatch():(r._processAnimations(),r._parseComplete())}),0)},Spritesheet.prototype.destroy=function(r){var n;for(var i in void 0===r&&(r=!1),this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,r&&(null===(n=this._texture)||void 0===n||n.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},Spritesheet.BATCH_SIZE=1e3,Spritesheet}(),_i=function(){function SpritesheetLoader(){}return SpritesheetLoader.use=function(r,n){var i=r.name+"_image";if(r.data&&r.type===En.TYPE.JSON&&r.data.frames&&!this.resources[i]){var o={crossOrigin:r.crossOrigin,metadata:r.metadata.imageMetadata,parentResource:r},a=SpritesheetLoader.getResourcePath(r,this.baseUrl);this.add(i,a,o,(function onImageLoad(i){if(i.error)n(i.error);else{var o=new vi(i.texture,r.data,r.url);o.parse((function(){r.spritesheet=o,r.textures=o.textures,n()}))}}))}else n()},SpritesheetLoader.getResourcePath=function(r,n){return r.isDataUrl?r.data.meta.image:ft.a.resolve(r.url.replace(n,""),r.data.meta.image)},SpritesheetLoader}(),sprite_tiling_es_extendStatics=function(r,n){return(sprite_tiling_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};function sprite_tiling_es_extends(r,n){function __(){this.constructor=r}sprite_tiling_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}var bi=new Ft,xi=function(r){function TilingSprite(n,i,o){void 0===i&&(i=100),void 0===o&&(o=100);var a=r.call(this,n)||this;return a.tileTransform=new Vt,a._width=i,a._height=o,a.uvMatrix=n.uvMatrix||new Er(n),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return sprite_tiling_es_extends(TilingSprite,r),Object.defineProperty(TilingSprite.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(r){this.uvMatrix.clampMargin=r,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(TilingSprite.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(r){this.tileTransform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(TilingSprite.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(r){this.tileTransform.position.copyFrom(r)},enumerable:!1,configurable:!0}),TilingSprite.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},TilingSprite.prototype._render=function(r){var n=this._texture;n&&n.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this))},TilingSprite.prototype._calculateBounds=function(){var r=this._width*-this._anchor._x,n=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),o=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,r,n,i,o)},TilingSprite.prototype.getLocalBounds=function(n){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),n||(this._localBoundsRect||(this._localBoundsRect=new Rt),n=this._localBoundsRect),this._bounds.getRectangle(n)):r.prototype.getLocalBounds.call(this,n)},TilingSprite.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,bi);var n=this._width,i=this._height,o=-n*this.anchor._x;if(bi.x>=o&&bi.x<o+n){var a=-i*this.anchor._y;if(bi.y>=a&&bi.y<a+i)return!0}return!1},TilingSprite.prototype.destroy=function(n){r.prototype.destroy.call(this,n),this.tileTransform=null,this.uvMatrix=null},TilingSprite.from=function(r,n){return"number"==typeof n&&(deprecation("5.3.0","TilingSprite.from use options instead of width and height args"),n={width:n,height:arguments[2]}),new TilingSprite(Me.from(r,n),n.width,n.height)},Object.defineProperty(TilingSprite.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(TilingSprite.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r},enumerable:!1,configurable:!0}),TilingSprite}(ai),Ti="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",Si=new Nt,Ei=function(r){function TilingSpriteRenderer(n){var i=r.call(this,n)||this,o={globals:i.renderer.globalUniforms};return i.shader=br.from(Ti,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord - floor(vTextureCoord - uClampOffset);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",o),i.simpleShader=br.from(Ti,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",o),i.quad=new He,i.state=xr.for2d(),i}return sprite_tiling_es_extends(TilingSpriteRenderer,r),TilingSpriteRenderer.prototype.render=function(r){var n=this.renderer,i=this.quad,o=i.vertices;o[0]=o[6]=r._width*-r.anchor.x,o[1]=o[3]=r._height*-r.anchor.y,o[2]=o[4]=r._width*(1-r.anchor.x),o[5]=o[7]=r._height*(1-r.anchor.y),r.uvRespectAnchor&&((o=i.uvs)[0]=o[6]=-r.anchor.x,o[1]=o[3]=-r.anchor.y,o[2]=o[4]=1-r.anchor.x,o[5]=o[7]=1-r.anchor.y),i.invalidate();var a=r._texture,s=a.baseTexture,h=r.tileTransform.localTransform,d=r.uvMatrix,f=s.isPowerOfTwo&&a.frame.width===s.width&&a.frame.height===s.height;f&&(s._glTextures[n.CONTEXT_UID]?f=s.wrapMode!==Q.CLAMP:s.wrapMode===Q.CLAMP&&(s.wrapMode=Q.REPEAT));var p=f?this.simpleShader:this.shader,y=a.width,g=a.height,_=r._width,b=r._height;Si.set(h.a*y/_,h.b*y/b,h.c*g/_,h.d*g/b,h.tx/_,h.ty/b),Si.invert(),f?Si.prepend(d.mapCoord):(p.uniforms.uMapCoord=d.mapCoord.toArray(!0),p.uniforms.uClampFrame=d.uClampFrame,p.uniforms.uClampOffset=d.uClampOffset),p.uniforms.uTransform=Si.toArray(!0),p.uniforms.uColor=premultiplyTintToRgba(r.tint,r.worldAlpha,p.uniforms.uColor,s.alphaMode),p.uniforms.translationMatrix=r.transform.worldTransform.toArray(!0),p.uniforms.uSampler=a,n.shader.bind(p),n.geometry.bind(i),this.state.blendMode=correctBlendMode(r.blendMode,s.alphaMode),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},TilingSpriteRenderer}(Ke),mesh_es_extendStatics=function(r,n){return(mesh_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};function mesh_es_extends(r,n){function __(){this.constructor=r}mesh_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}var Ii=function(){function MeshBatchUvs(r,n){this.uvBuffer=r,this.uvMatrix=n,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return MeshBatchUvs.prototype.update=function(r){if(r||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var n=this.uvBuffer.data;this.data&&this.data.length===n.length||(this.data=new Float32Array(n.length)),this.uvMatrix.multiplyUvs(n,this.data),this._updateID++}},MeshBatchUvs}(),wi=new Ft,Pi=new Lt,Ai=function(r){function Mesh(n,i,o,a){void 0===a&&(a=V.TRIANGLES);var s=r.call(this)||this;return s.geometry=n,n.refCount++,s.shader=i,s.state=o||xr.for2d(),s.drawMode=a,s.start=0,s.size=0,s.uvs=null,s.indices=null,s.vertexData=new Float32Array(1),s.vertexDirty=0,s._transformID=-1,s.tint=16777215,s.blendMode=W.NORMAL,s._roundPixels=st.ROUND_PIXELS,s.batchUvs=null,s}return mesh_es_extends(Mesh,r),Object.defineProperty(Mesh.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"material",{get:function(){return this.shader},set:function(r){this.shader=r},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"tint",{get:function(){return this.shader.tint},set:function(r){this.shader.tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"texture",{get:function(){return this.shader.texture},set:function(r){this.shader.texture=r},enumerable:!1,configurable:!0}),Mesh.prototype._render=function(r){var n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===V.TRIANGLES&&n.length<2*Mesh.BATCHABLE_SIZE?this._renderToBatch(r):this._renderDefault(r)},Mesh.prototype._renderDefault=function(r){var n=this.shader;n.alpha=this.worldAlpha,n.update&&n.update(),r.batch.flush(),n.program.uniformData.translationMatrix&&(n.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),r.shader.bind(n),r.state.set(this.state),r.geometry.bind(this.geometry,n),r.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},Mesh.prototype._renderToBatch=function(r){var n=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var i=this.material.pluginName;r.batch.setObjectRenderer(r.plugins[i]),r.plugins[i].render(this)},Mesh.prototype.calculateVertices=function(){var r=this.geometry,n=r.buffers[0].data;if(r.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));for(var i=this.transform.worldTransform,o=i.a,a=i.b,s=i.c,h=i.d,d=i.tx,f=i.ty,p=this.vertexData,y=0;y<p.length/2;y++){var g=n[2*y],_=n[2*y+1];p[2*y]=o*g+s*_+d,p[2*y+1]=a*g+h*_+f}if(this._roundPixels){var b=st.RESOLUTION;for(y=0;y<p.length;++y)p[y]=Math.round((p[y]*b|0)/b)}this.vertexDirty=r.vertexDirtyId}},Mesh.prototype.calculateUvs=function(){var r=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=r.data:(this.batchUvs||(this.batchUvs=new Ii(r,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},Mesh.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},Mesh.prototype.containsPoint=function(r){if(!this.getBounds().contains(r.x,r.y))return!1;this.worldTransform.applyInverse(r,wi);for(var n=this.geometry.getBuffer("aVertexPosition").data,i=Pi.points,o=this.geometry.getIndex().data,a=o.length,s=4===this.drawMode?3:1,h=0;h+2<a;h+=s){var d=2*o[h],f=2*o[h+1],p=2*o[h+2];if(i[0]=n[d],i[1]=n[d+1],i[2]=n[f],i[3]=n[f+1],i[4]=n[p],i[5]=n[p+1],Pi.contains(wi.x,wi.y))return!0}return!1},Mesh.prototype.destroy=function(n){r.prototype.destroy.call(this,n),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},Mesh.BATCHABLE_SIZE=100,Mesh}(Zt),Oi=function(r){function MeshMaterial(n,i){var o=this,a={uSampler:n,alpha:1,uTextureMatrix:Nt.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i)).uniforms&&Object.assign(a,i.uniforms),(o=r.call(this,i.program||_r.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),a)||this)._colorDirty=!1,o.uvMatrix=new Er(n),o.batchable=void 0===i.program,o.pluginName=i.pluginName,o.tint=i.tint,o.alpha=i.alpha,o}return mesh_es_extends(MeshMaterial,r),Object.defineProperty(MeshMaterial.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(r){this.uniforms.uSampler!==r&&(this.uniforms.uSampler=r,this.uvMatrix.texture=r)},enumerable:!1,configurable:!0}),Object.defineProperty(MeshMaterial.prototype,"alpha",{get:function(){return this._alpha},set:function(r){r!==this._alpha&&(this._alpha=r,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(MeshMaterial.prototype,"tint",{get:function(){return this._tint},set:function(r){r!==this._tint&&(this._tint=r,this._tintRGB=(r>>16)+(65280&r)+((255&r)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),MeshMaterial.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var r=this.texture.baseTexture;premultiplyTintToRgba(this._tint,this._alpha,this.uniforms.uColor,r.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},MeshMaterial}(br),Ri=function(r){function MeshGeometry(n,i,o){var a=r.call(this)||this,s=new Ne(n),h=new Ne(i,!0),d=new Ne(o,!0,!0);return a.addAttribute("aVertexPosition",s,2,!1,Z.FLOAT).addAttribute("aTextureCoord",h,2,!1,Z.FLOAT).addIndex(d),a._updateId=-1,a}return mesh_es_extends(MeshGeometry,r),Object.defineProperty(MeshGeometry.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),MeshGeometry}(Xe),text_bitmap_es_extendStatics=function(r,n){return(text_bitmap_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};var Ci=function Ci(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},Mi=[function(){function TextFormat(){}return TextFormat.test=function(r){return"string"==typeof r&&0===r.indexOf("info face=")},TextFormat.parse=function(r){var n=r.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[]};for(var o in n){var a=n[o].match(/^[a-z]+/gm)[0],s=n[o].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),h={};for(var d in s){var f=s[d].split("="),p=f[0],y=f[1].replace(/"/gm,""),g=parseFloat(y),_=isNaN(g)?y:g;h[p]=_}i[a].push(h)}var b=new Ci;return i.info.forEach((function(r){return b.info.push({face:r.face,size:parseInt(r.size,10)})})),i.common.forEach((function(r){return b.common.push({lineHeight:parseInt(r.lineHeight,10)})})),i.page.forEach((function(r){return b.page.push({id:parseInt(r.id,10),file:r.file})})),i.char.forEach((function(r){return b.char.push({id:parseInt(r.id,10),page:parseInt(r.page,10),x:parseInt(r.x,10),y:parseInt(r.y,10),width:parseInt(r.width,10),height:parseInt(r.height,10),xoffset:parseInt(r.xoffset,10),yoffset:parseInt(r.yoffset,10),xadvance:parseInt(r.xadvance,10)})})),i.kerning.forEach((function(r){return b.kerning.push({first:parseInt(r.first,10),second:parseInt(r.second,10),amount:parseInt(r.amount,10)})})),b},TextFormat}(),function(){function XMLFormat(){}return XMLFormat.test=function(r){return r instanceof XMLDocument&&r.getElementsByTagName("page").length&&null!==r.getElementsByTagName("info")[0].getAttribute("face")},XMLFormat.parse=function(r){for(var n=new Ci,i=r.getElementsByTagName("info"),o=r.getElementsByTagName("common"),a=r.getElementsByTagName("page"),s=r.getElementsByTagName("char"),h=r.getElementsByTagName("kerning"),d=0;d<i.length;d++)n.info.push({face:i[d].getAttribute("face"),size:parseInt(i[d].getAttribute("size"),10)});for(d=0;d<o.length;d++)n.common.push({lineHeight:parseInt(o[d].getAttribute("lineHeight"),10)});for(d=0;d<a.length;d++)n.page.push({id:parseInt(a[d].getAttribute("id"),10)||0,file:a[d].getAttribute("file")});for(d=0;d<s.length;d++){var f=s[d];n.char.push({id:parseInt(f.getAttribute("id"),10),page:parseInt(f.getAttribute("page"),10)||0,x:parseInt(f.getAttribute("x"),10),y:parseInt(f.getAttribute("y"),10),width:parseInt(f.getAttribute("width"),10),height:parseInt(f.getAttribute("height"),10),xoffset:parseInt(f.getAttribute("xoffset"),10),yoffset:parseInt(f.getAttribute("yoffset"),10),xadvance:parseInt(f.getAttribute("xadvance"),10)})}for(d=0;d<h.length;d++)n.kerning.push({first:parseInt(h[d].getAttribute("first"),10),second:parseInt(h[d].getAttribute("second"),10),amount:parseInt(h[d].getAttribute("amount"),10)});return n},XMLFormat}()];function autoDetectFormat(r){for(var n=0;n<Mi.length;n++)if(Mi[n].test(r))return Mi[n];return null}function generateFillStyle(r,n,i,o,a,s){var h,d=i.fill;if(!Array.isArray(d))return d;if(1===d.length)return d[0];var f=i.dropShadow?i.dropShadowDistance:0,p=i.padding||0,y=Math.ceil(r.width/o)-f-2*p,g=Math.ceil(r.height/o)-f-2*p,_=d.slice(),b=i.fillGradientStops.slice();if(!b.length)for(var x=_.length+1,T=1;T<x;++T)b.push(T/x);if(_.unshift(d[0]),b.unshift(0),_.push(d[d.length-1]),b.push(1),i.fillGradientType===ni.LINEAR_VERTICAL){h=n.createLinearGradient(y/2,p,y/2,g+p);var S=0,E=(s.fontProperties.fontSize+i.strokeThickness)/g;for(T=0;T<a.length;T++)for(var w=s.lineHeight*T,P=0;P<_.length;P++){var O=w/g+("number"==typeof b[P]?b[P]:P/_.length)*E,R=Math.max(S,O);R=Math.min(R,1),h.addColorStop(R,_[P]),S=R}}else{h=n.createLinearGradient(p,g/2,y+p,g/2);var C=_.length+1,M=1;for(T=0;T<_.length;T++){var D=void 0;D="number"==typeof b[T]?b[T]:M/C,h.addColorStop(D,_[T]),M++}}return h}function drawGlyph(r,n,i,o,a,s,h){var d=i.text,f=i.fontProperties;n.translate(o,a),n.scale(s,s);var p=h.strokeThickness/2,y=-h.strokeThickness/2;n.font=h.toFontString(),n.lineWidth=h.strokeThickness,n.textBaseline=h.textBaseline,n.lineJoin=h.lineJoin,n.miterLimit=h.miterLimit,n.fillStyle=generateFillStyle(r,n,h,s,[d],i),n.strokeStyle=h.stroke,n.font=h.toFontString(),n.lineWidth=h.strokeThickness,n.textBaseline=h.textBaseline,n.lineJoin=h.lineJoin,n.miterLimit=h.miterLimit,n.fillStyle=generateFillStyle(r,n,h,s,[d],i),n.strokeStyle=h.stroke;var g=h.dropShadowColor,_=hex2rgb("number"==typeof g?g:string2hex(g));h.dropShadow?(n.shadowColor="rgba("+255*_[0]+","+255*_[1]+","+255*_[2]+","+h.dropShadowAlpha+")",n.shadowBlur=h.dropShadowBlur,n.shadowOffsetX=Math.cos(h.dropShadowAngle)*h.dropShadowDistance,n.shadowOffsetY=Math.sin(h.dropShadowAngle)*h.dropShadowDistance):(n.shadowColor="0",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0),h.stroke&&h.strokeThickness&&n.strokeText(d,p,y+i.lineHeight-f.descent),h.fill&&n.fillText(d,p,y+i.lineHeight-f.descent),n.setTransform(),n.fillStyle="rgba(0, 0, 0, 0)"}var Li=function(){function BitmapFont(r,n){var i=r.info[0],o=r.common[0],a=getResolutionOfUrl(r.page[0].file),s={};this.font=i.face,this.size=i.size,this.lineHeight=o.lineHeight/a,this.chars={},this.pageTextures=s;for(var h=0;h<r.page.length;h++){var d=r.page[h],f=d.id,p=d.file;s[f]=n instanceof Array?n[h]:n[p]}for(h=0;h<r.char.length;h++){var y=r.char[h],g=(f=y.id,y.page),_=r.char[h],b=_.x,x=_.y,T=_.width,S=_.height,E=_.xoffset,w=_.yoffset,P=_.xadvance;x/=a,T/=a,S/=a,E/=a,w/=a,P/=a;var O=new Rt((b/=a)+s[g].frame.x/a,x+s[g].frame.y/a,T,S);this.chars[f]={xOffset:E,yOffset:w,xAdvance:P,kerning:{},texture:new Me(s[g].baseTexture,O),page:g}}for(h=0;h<r.kerning.length;h++){var R=r.kerning[h],C=R.first,M=R.second,D=R.amount;C/=a,M/=a,D/=a,this.chars[M]&&(this.chars[M].kerning[C]=D)}}return BitmapFont.prototype.destroy=function(){for(var r in this.chars)this.chars[r].texture.destroy(),this.chars[r].texture=null;for(var r in this.pageTextures)this.pageTextures[r].destroy(!0),this.pageTextures[r]=null;this.chars=null,this.pageTextures=null},BitmapFont.install=function(r,n){var i;if(r instanceof Ci)i=r;else{var o=autoDetectFormat(r);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(r)}n instanceof Me&&(n=[n]);var a=new BitmapFont(i,n);return BitmapFont.available[a.font]=a,a},BitmapFont.uninstall=function(r){var n=BitmapFont.available[r];if(!n)throw new Error("No font found named '"+r+"'");n.destroy(),delete BitmapFont.available[r]},BitmapFont.from=function(r,n,i){if(!r)throw new Error("[BitmapFont] Property `name` is required.");var o=Object.assign({},BitmapFont.defaultOptions,i),a=o.chars,s=o.padding,h=o.resolution,d=o.textureWidth,f=o.textureHeight,p=function resolveCharacters(r){"string"==typeof r&&(r=[r]);for(var n=[],i=0,o=r.length;i<o;i++){var a=r[i];if(Array.isArray(a)){if(2!==a.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+a.length+".");var s=a[0].charCodeAt(0),h=a[1].charCodeAt(0);if(h<s)throw new Error("[BitmapFont]: Invalid character range.");for(var d=s,f=h;d<=f;d++)n.push(String.fromCharCode(d))}else n.push.apply(n,a.split(""))}if(0===n.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return n}(a),y=n instanceof hi?n:new hi(n),g=d,_=new Ci;_.info[0]={face:y.fontFamily,size:y.fontSize},_.common[0]={lineHeight:y.fontSize};for(var b,x,T,S=0,E=0,w=0,P=[],O=0;O<p.length;O++){b||((b=document.createElement("canvas")).width=d,b.height=f,x=b.getContext("2d"),T=new ye(b,{resolution:h}),P.push(new Me(T)),_.page.push({id:P.length-1,file:""}));var R=ci.measureText(p[O],y,!1,b),C=R.width,M=Math.ceil(R.height),D=Math.ceil(("italic"===y.fontStyle?2:1)*C);if(E>=f-M*h){if(0===E)throw new Error("[BitmapFont] textureHeight "+f+"px is too small for "+y.fontSize+"px fonts");--O,b=null,x=null,T=null,E=0,S=0,w=0}else if(w=Math.max(M+R.fontProperties.descent,w),D*h+S>=g)--O,E+=w*h,E=Math.ceil(E),S=0,w=0;else{drawGlyph(b,x,R,S,E,h,y);var F=R.text.charCodeAt(0);_.char.push({id:F,page:P.length-1,x:S/h,y:E/h,width:D,height:M,xoffset:0,yoffset:0,xadvance:Math.ceil(C-(y.dropShadow?y.dropShadowDistance:0)-(y.stroke?y.strokeThickness:0))}),S+=(D+2*s)*h,S=Math.ceil(S)}}var N=new BitmapFont(_,P);return void 0!==BitmapFont.available[r]&&BitmapFont.uninstall(r),BitmapFont.available[r]=N,N},BitmapFont.ALPHA=[["a","z"],["A","Z"]," "],BitmapFont.NUMERIC=[["0","9"]],BitmapFont.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],BitmapFont.ASCII=[[" ","~"]],BitmapFont.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:BitmapFont.ALPHANUMERIC},BitmapFont.available={},BitmapFont}(),Di=[],Fi=[],Bi=function(r){function BitmapText(n,i){void 0===i&&(i={});var o=r.call(this)||this;o._tint=16777215,i.font&&(deprecation("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),o._upgradeStyle(i));var a=Object.assign({},BitmapText.styleDefaults,i),s=a.align,h=a.tint,d=a.maxWidth,f=a.letterSpacing,p=a.fontName,y=a.fontSize;if(!Li.available[p])throw new Error('Missing BitmapFont "'+p+'"');return o._activePagesMeshData=[],o._textWidth=0,o._textHeight=0,o._align=s,o._tint=h,o._fontName=p,o._fontSize=y||Li.available[p].size,o._text=n,o._maxWidth=d,o._maxLineHeight=0,o._letterSpacing=f,o._anchor=new Bt((function(){o.dirty=!0}),o,0,0),o.roundPixels=st.ROUND_PIXELS,o.dirty=!0,o}return function text_bitmap_es_extends(r,n){function __(){this.constructor=r}text_bitmap_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}(BitmapText,r),BitmapText.prototype.updateText=function(){for(var r,n=Li.available[this._fontName],i=this._fontSize/n.size,o=new Ft,a=[],s=[],h=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",d=h.length,f=this._maxWidth*n.size/this._fontSize,p=null,y=0,g=0,_=0,b=-1,x=0,T=0,S=0,E=0;E<d;E++){var w=h.charCodeAt(E),P=h.charAt(E);if(/(?:\s)/.test(P)&&(b=E,x=y),"\r"!==P&&"\n"!==P){var O=n.chars[w];if(O){p&&O.kerning[p]&&(o.x+=O.kerning[p]);var R=Fi.pop()||{texture:Me.EMPTY,line:0,charCode:0,position:new Ft};R.texture=O.texture,R.line=_,R.charCode=w,R.position.x=o.x+O.xOffset+this._letterSpacing/2,R.position.y=o.y+O.yOffset,a.push(R),o.x+=O.xAdvance+this._letterSpacing,y=o.x,S=Math.max(S,O.yOffset+O.texture.height),p=w,-1!==b&&f>0&&o.x>f&&(removeItems(a,1+b-++T,1+E-b),E=b,b=-1,s.push(x),g=Math.max(g,x),_++,o.x=0,o.y+=n.lineHeight,p=null)}}else s.push(y),g=Math.max(g,y),++_,++T,o.x=0,o.y+=n.lineHeight,p=null}var C=h.charAt(h.length-1);"\r"!==C&&"\n"!==C&&(/(?:\s)/.test(C)&&(y=x),s.push(y),g=Math.max(g,y));var M=[];for(E=0;E<=_;E++){var D=0;"right"===this._align?D=g-s[E]:"center"===this._align&&(D=(g-s[E])/2),M.push(D)}var F=a.length,N={},U=[],j=this._activePagesMeshData;for(E=0;E<j.length;E++)Di.push(j[E]);for(E=0;E<F;E++){var X=(Y=a[E].texture).baseTexture.uid;if(!N[X]){if(!(rt=Di.pop())){var H=new Ri,W=new Oi(Me.EMPTY);rt={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new Ai(H,W),vertices:null,uvs:null,indices:null}}rt.index=0,rt.indexCount=0,rt.vertexCount=0,rt.uvsCount=0,rt.total=0,rt.mesh.texture=new Me(Y.baseTexture),rt.mesh.tint=this._tint,U.push(rt),N[X]=rt}N[X].total++}for(E=0;E<j.length;E++)-1===U.indexOf(j[E])&&this.removeChild(j[E].mesh);for(E=0;E<U.length;E++)U[E].mesh.parent!==this&&this.addChild(U[E].mesh);for(var E in this._activePagesMeshData=U,N){var V=(rt=N[E]).total;(null===(r=rt.indices)||void 0===r?void 0:r.length)>6*V&&!(rt.vertices.length<2*Ai.BATCHABLE_SIZE)||(rt.vertices=new Float32Array(8*V),rt.uvs=new Float32Array(8*V),rt.indices=new Uint16Array(6*V)),rt.mesh.size=6*V}for(E=0;E<F;E++){var Y,q=((P=a[E]).position.x+M[P.line])*i,Z=P.position.y*i,$=N[(Y=P.texture).baseTexture.uid],Q=Y.frame,tt=Y._uvs,et=$.index++;$.indices[6*et+0]=0+4*et,$.indices[6*et+1]=1+4*et,$.indices[6*et+2]=2+4*et,$.indices[6*et+3]=0+4*et,$.indices[6*et+4]=2+4*et,$.indices[6*et+5]=3+4*et,$.vertices[8*et+0]=q,$.vertices[8*et+1]=Z,$.vertices[8*et+2]=q+Q.width*i,$.vertices[8*et+3]=Z,$.vertices[8*et+4]=q+Q.width*i,$.vertices[8*et+5]=Z+Q.height*i,$.vertices[8*et+6]=q,$.vertices[8*et+7]=Z+Q.height*i,$.uvs[8*et+0]=tt.x0,$.uvs[8*et+1]=tt.y0,$.uvs[8*et+2]=tt.x1,$.uvs[8*et+3]=tt.y1,$.uvs[8*et+4]=tt.x2,$.uvs[8*et+5]=tt.y2,$.uvs[8*et+6]=tt.x3,$.uvs[8*et+7]=tt.y3}for(var E in this._textWidth=g*i,this._textHeight=(o.y+n.lineHeight)*i,N){var rt=N[E];if(0!==this.anchor.x||0!==this.anchor.y)for(var nt=0,it=this._textWidth*this.anchor.x,ot=this._textHeight*this.anchor.y,at=0;at<rt.total;at++)rt.vertices[nt++]-=it,rt.vertices[nt++]-=ot,rt.vertices[nt++]-=it,rt.vertices[nt++]-=ot,rt.vertices[nt++]-=it,rt.vertices[nt++]-=ot,rt.vertices[nt++]-=it,rt.vertices[nt++]-=ot;this._maxLineHeight=S*i;var st=rt.mesh.geometry.getBuffer("aVertexPosition"),ut=rt.mesh.geometry.getBuffer("aTextureCoord"),ht=rt.mesh.geometry.getIndex();st.data=rt.vertices,ut.data=rt.uvs,ht.data=rt.indices,st.update(),ut.update(),ht.update()}for(E=0;E<a.length;E++)Fi.push(a[E])},BitmapText.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},BitmapText.prototype.getLocalBounds=function(){return this.validate(),r.prototype.getLocalBounds.call(this)},BitmapText.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(BitmapText.prototype,"tint",{get:function(){return this._tint},set:function(r){if(this._tint!==r){this._tint=r;for(var n=0;n<this._activePagesMeshData.length;n++)this._activePagesMeshData[n].mesh.tint=r}},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"fontName",{get:function(){return this._fontName},set:function(r){if(!Li.available[r])throw new Error('Missing BitmapFont "'+r+'"');this._fontName!==r&&(this._fontName=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"fontSize",{get:function(){return this._fontSize},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"anchor",{get:function(){return this._anchor},set:function(r){"number"==typeof r?this._anchor.set(r):this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"text",{get:function(){return this._text},set:function(r){r=String(null==r?"":r),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(r){this._maxWidth!==r&&(this._maxWidth=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),BitmapText.prototype._upgradeStyle=function(r){if("string"==typeof r.font){var n=r.font.split(" ");r.fontName=1===n.length?n[0]:n.slice(1).join(" "),n.length>=2&&(r.fontSize=parseInt(n[0],10))}else r.fontName=r.font.name,r.fontSize="number"==typeof r.font.size?r.font.size:parseInt(r.font.size,10)},BitmapText.registerFont=function(r,n){return deprecation("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),Li.install(r,n)},Object.defineProperty(BitmapText,"fonts",{get:function(){return deprecation("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),Li.available},enumerable:!1,configurable:!0}),BitmapText.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},BitmapText}(Zt),Ni=function(){function BitmapFontLoader(){}return BitmapFontLoader.add=function(){En.setExtensionXhrType("fnt",En.XHR_RESPONSE_TYPE.DOCUMENT)},BitmapFontLoader.use=function(r,n){var i=autoDetectFormat(r.data);if(i)for(var o=BitmapFontLoader.getBaseUrl(this,r),a=i.parse(r.data),s={},completed=function(i){s[i.metadata.pageFile]=i.texture,Object.keys(s).length===a.page.length&&(r.bitmapFont=Li.install(a,s),n())},h=0;h<a.page.length;++h){var d=a.page[h].file,f=o+d,p=!1;for(var y in this.resources){var g=this.resources[y];if(g.url===f){g.metadata.pageFile=d,g.texture?completed(g):g.onAfterMiddleware.add(completed),p=!0;break}}if(!p){var _={crossOrigin:r.crossOrigin,loadType:En.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:d},r.metadata.imageMetadata),parentResource:r};this.add(f,_,completed)}}else n()},BitmapFontLoader.getBaseUrl=function(r,n){var i=n.isDataUrl?"":BitmapFontLoader.dirname(n.url);return n.isDataUrl&&("."===i&&(i=""),r.baseUrl&&i&&"/"===r.baseUrl.charAt(r.baseUrl.length-1)&&(i+="/")),(i=i.replace(r.baseUrl,""))&&"/"!==i.charAt(i.length-1)&&(i+="/"),i},BitmapFontLoader.dirname=function(r){var n=r.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return n===r?".":""===n?"/":n},BitmapFontLoader}(),filter_alpha_es_extendStatics=function(r,n){return(filter_alpha_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};var ki=function(r){function AlphaFilter(n){void 0===n&&(n=1);var i=r.call(this,qr,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return i.alpha=n,i}return function filter_alpha_es_extends(r,n){function __(){this.constructor=r}filter_alpha_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}(AlphaFilter,r),Object.defineProperty(AlphaFilter.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),AlphaFilter}(Tr),filter_blur_es_extendStatics=function(r,n){return(filter_blur_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};function filter_blur_es_extends(r,n){function __(){this.constructor=r}filter_blur_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}var Ui,ji,Gi,Xi,zi,Hi,Wi,Vi,Yi,qi,Ki,Zi,$i,Qi,Ji,to,eo,ro={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},no=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"}(Ui||(Ui={})),function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"}(ji||(ji={})),function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"}(Gi||(Gi={})),function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"}(Xi||(Xi={})),function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(zi||(zi={})),function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Hi||(Hi={})),function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Wi||(Wi={})),function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.FLOAT=5126]="FLOAT",r[r.HALF_FLOAT=36193]="HALF_FLOAT"}(Vi||(Vi={})),function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"}(Yi||(Yi={})),function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(qi||(qi={})),function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON"}(Ki||(Ki={})),function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(Zi||(Zi={})),function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"}($i||($i={})),function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"}(Qi||(Qi={})),function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"}(Ji||(Ji={})),function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"}(to||(to={})),function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"}(eo||(eo={}));var io=function(r){function BlurFilterPass(n,i,o,a,s){void 0===i&&(i=8),void 0===o&&(o=4),void 0===a&&(a=st.RESOLUTION),void 0===s&&(s=5);var h=this,d=function generateBlurVertSource(r,n){var i,o=Math.ceil(r/2),a="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",s="";i=n?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var h=0;h<r;h++){var d=i.replace("%index%",h.toString());s+=d=d.replace("%sampleIndex%",h-(o-1)+".0"),s+="\n"}return(a=a.replace("%blur%",s)).replace("%size%",r.toString())}(s,n),f=function generateBlurFragSource(r){for(var n,i=ro[r],o=i.length,a=no,s="",h=0;h<r;h++){var d="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",h.toString());n=h,h>=o&&(n=r-h-1),s+=d=d.replace("%value%",i[n].toString()),s+="\n"}return(a=a.replace("%blur%",s)).replace("%size%",r.toString())}(s);return(h=r.call(this,d,f)||this).horizontal=n,h.resolution=a,h._quality=0,h.quality=o,h.blur=i,h}return filter_blur_es_extends(BlurFilterPass,r),BlurFilterPass.prototype.apply=function(r,n,i,o){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/n.width):this.uniforms.strength=1/i.height*(i.height/n.height):this.horizontal?this.uniforms.strength=1/r.renderer.width*(r.renderer.width/n.width):this.uniforms.strength=1/r.renderer.height*(r.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)r.applyFilter(this,n,i,o);else{var a=r.getFilterTexture(),s=r.renderer,h=n,d=a;this.state.blend=!1,r.applyFilter(this,h,d,$i.CLEAR);for(var f=1;f<this.passes-1;f++){r.bindAndClear(h,$i.BLIT),this.uniforms.uSampler=d;var p=d;d=h,h=p,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,r.applyFilter(this,d,i,o),r.returnFilterTexture(a)}},Object.defineProperty(BlurFilterPass.prototype,"blur",{get:function(){return this.strength},set:function(r){this.padding=1+2*Math.abs(r),this.strength=r},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilterPass.prototype,"quality",{get:function(){return this._quality},set:function(r){this._quality=r,this.passes=r},enumerable:!1,configurable:!0}),BlurFilterPass}(Tr),oo=function(r){function BlurFilter(n,i,o,a){void 0===n&&(n=8),void 0===i&&(i=4),void 0===o&&(o=st.RESOLUTION),void 0===a&&(a=5);var s=r.call(this)||this;return s.blurXFilter=new io(!0,n,i,o,a),s.blurYFilter=new io(!1,n,i,o,a),s.resolution=o,s.quality=i,s.blur=n,s.repeatEdgePixels=!1,s}return filter_blur_es_extends(BlurFilter,r),BlurFilter.prototype.apply=function(r,n,i,o){var a=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(a&&s){var h=r.getFilterTexture();this.blurXFilter.apply(r,n,h,$i.CLEAR),this.blurYFilter.apply(r,h,i,o),r.returnFilterTexture(h)}else s?this.blurYFilter.apply(r,n,i,o):this.blurXFilter.apply(r,n,i,o)},BlurFilter.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(r){this.blurXFilter.quality=this.blurYFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(r){this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(r){this.blurYFilter.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(r){this._repeatEdgePixels=r,this.updatePadding()},enumerable:!1,configurable:!0}),BlurFilter}(Tr),filter_color_matrix_es_extendStatics=function(r,n){return(filter_color_matrix_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};var ao=function(r){function ColorMatrixFilter(){var n=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(n=r.call(this,Kr,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",i)||this).alpha=1,n}return function filter_color_matrix_es_extends(r,n){function __(){this.constructor=r}filter_color_matrix_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}(ColorMatrixFilter,r),ColorMatrixFilter.prototype._loadMatrix=function(r,n){void 0===n&&(n=!1);var i=r;n&&(this._multiply(i,this.uniforms.m,r),i=this._colorMatrix(i)),this.uniforms.m=i},ColorMatrixFilter.prototype._multiply=function(r,n,i){return r[0]=n[0]*i[0]+n[1]*i[5]+n[2]*i[10]+n[3]*i[15],r[1]=n[0]*i[1]+n[1]*i[6]+n[2]*i[11]+n[3]*i[16],r[2]=n[0]*i[2]+n[1]*i[7]+n[2]*i[12]+n[3]*i[17],r[3]=n[0]*i[3]+n[1]*i[8]+n[2]*i[13]+n[3]*i[18],r[4]=n[0]*i[4]+n[1]*i[9]+n[2]*i[14]+n[3]*i[19]+n[4],r[5]=n[5]*i[0]+n[6]*i[5]+n[7]*i[10]+n[8]*i[15],r[6]=n[5]*i[1]+n[6]*i[6]+n[7]*i[11]+n[8]*i[16],r[7]=n[5]*i[2]+n[6]*i[7]+n[7]*i[12]+n[8]*i[17],r[8]=n[5]*i[3]+n[6]*i[8]+n[7]*i[13]+n[8]*i[18],r[9]=n[5]*i[4]+n[6]*i[9]+n[7]*i[14]+n[8]*i[19]+n[9],r[10]=n[10]*i[0]+n[11]*i[5]+n[12]*i[10]+n[13]*i[15],r[11]=n[10]*i[1]+n[11]*i[6]+n[12]*i[11]+n[13]*i[16],r[12]=n[10]*i[2]+n[11]*i[7]+n[12]*i[12]+n[13]*i[17],r[13]=n[10]*i[3]+n[11]*i[8]+n[12]*i[13]+n[13]*i[18],r[14]=n[10]*i[4]+n[11]*i[9]+n[12]*i[14]+n[13]*i[19]+n[14],r[15]=n[15]*i[0]+n[16]*i[5]+n[17]*i[10]+n[18]*i[15],r[16]=n[15]*i[1]+n[16]*i[6]+n[17]*i[11]+n[18]*i[16],r[17]=n[15]*i[2]+n[16]*i[7]+n[17]*i[12]+n[18]*i[17],r[18]=n[15]*i[3]+n[16]*i[8]+n[17]*i[13]+n[18]*i[18],r[19]=n[15]*i[4]+n[16]*i[9]+n[17]*i[14]+n[18]*i[19]+n[19],r},ColorMatrixFilter.prototype._colorMatrix=function(r){var n=new Float32Array(r);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n},ColorMatrixFilter.prototype.brightness=function(r,n){var i=[r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0];this._loadMatrix(i,n)},ColorMatrixFilter.prototype.greyscale=function(r,n){var i=[r,r,r,0,0,r,r,r,0,0,r,r,r,0,0,0,0,0,1,0];this._loadMatrix(i,n)},ColorMatrixFilter.prototype.blackAndWhite=function(r){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],r)},ColorMatrixFilter.prototype.hue=function(r,n){r=(r||0)/180*Math.PI;var i=Math.cos(r),o=Math.sin(r),a=1/3,s=(0,Math.sqrt)(a),h=[i+(1-i)*a,a*(1-i)-s*o,a*(1-i)+s*o,0,0,a*(1-i)+s*o,i+a*(1-i),a*(1-i)-s*o,0,0,a*(1-i)-s*o,a*(1-i)+s*o,i+a*(1-i),0,0,0,0,0,1,0];this._loadMatrix(h,n)},ColorMatrixFilter.prototype.contrast=function(r,n){var i=(r||0)+1,o=-.5*(i-1),a=[i,0,0,0,o,0,i,0,0,o,0,0,i,0,o,0,0,0,1,0];this._loadMatrix(a,n)},ColorMatrixFilter.prototype.saturate=function(r,n){void 0===r&&(r=0);var i=2*r/3+1,o=-.5*(i-1),a=[i,o,o,0,0,o,i,o,0,0,o,o,i,0,0,0,0,0,1,0];this._loadMatrix(a,n)},ColorMatrixFilter.prototype.desaturate=function(){this.saturate(-1)},ColorMatrixFilter.prototype.negative=function(r){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],r)},ColorMatrixFilter.prototype.sepia=function(r){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],r)},ColorMatrixFilter.prototype.technicolor=function(r){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],r)},ColorMatrixFilter.prototype.polaroid=function(r){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],r)},ColorMatrixFilter.prototype.toBGR=function(r){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],r)},ColorMatrixFilter.prototype.kodachrome=function(r){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],r)},ColorMatrixFilter.prototype.browni=function(r){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],r)},ColorMatrixFilter.prototype.vintage=function(r){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],r)},ColorMatrixFilter.prototype.colorTone=function(r,n,i,o,a){var s=((i=i||16770432)>>16&255)/255,h=(i>>8&255)/255,d=(255&i)/255,f=((o=o||3375104)>>16&255)/255,p=(o>>8&255)/255,y=(255&o)/255,g=[.3,.59,.11,0,0,s,h,d,r=r||.2,0,f,p,y,n=n||.15,0,s-f,h-p,d-y,0,0];this._loadMatrix(g,a)},ColorMatrixFilter.prototype.night=function(r,n){var i=[-2*(r=r||.1),-r,0,0,0,-r,0,r,0,0,0,r,2*r,0,0,0,0,0,1,0];this._loadMatrix(i,n)},ColorMatrixFilter.prototype.predator=function(r,n){var i=[11.224130630493164*r,-4.794486999511719*r,-2.8746118545532227*r,0*r,.40342438220977783*r,-3.6330697536468506*r,9.193157196044922*r,-2.951810836791992*r,0*r,-1.316135048866272*r,-3.2184197902679443*r,-4.2375030517578125*r,7.476448059082031*r,0*r,.8044459223747253*r,0,0,0,1,0];this._loadMatrix(i,n)},ColorMatrixFilter.prototype.lsd=function(r){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],r)},ColorMatrixFilter.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(r){this.uniforms.m=r},enumerable:!1,configurable:!0}),Object.defineProperty(ColorMatrixFilter.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),ColorMatrixFilter}(Tr);ao.prototype.grayscale=ao.prototype.greyscale;var filter_displacement_es_extendStatics=function(r,n){return(filter_displacement_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};var so=function(r){function DisplacementFilter(n,i){var o=this,a=new Nt;return n.renderable=!1,(o=r.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:n._texture,filterMatrix:a,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=n,o.maskMatrix=a,null==i&&(i=20),o.scale=new Ft(i,i),o}return function filter_displacement_es_extends(r,n){function __(){this.constructor=r}filter_displacement_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}(DisplacementFilter,r),DisplacementFilter.prototype.apply=function(r,n,i,o){this.uniforms.filterMatrix=r.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var a=this.maskSprite.worldTransform,s=Math.sqrt(a.a*a.a+a.b*a.b),h=Math.sqrt(a.c*a.c+a.d*a.d);0!==s&&0!==h&&(this.uniforms.rotation[0]=a.a/s,this.uniforms.rotation[1]=a.b/s,this.uniforms.rotation[2]=a.c/h,this.uniforms.rotation[3]=a.d/h),r.applyFilter(this,n,i,o)},Object.defineProperty(DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(r){this.uniforms.mapSampler=r},enumerable:!1,configurable:!0}),DisplacementFilter}(Tr),filter_fxaa_es_extendStatics=function(r,n){return(filter_fxaa_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};var uo=function(r){function FXAAFilter(){return r.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function filter_fxaa_es_extends(r,n){function __(){this.constructor=r}filter_fxaa_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}(FXAAFilter,r),FXAAFilter}(Tr),filter_noise_es_extendStatics=function(r,n){return(filter_noise_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};var ho=function(r){function NoiseFilter(n,i){void 0===n&&(n=.5),void 0===i&&(i=Math.random());var o=r.call(this,Kr,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return o.noise=n,o.seed=i,o}return function filter_noise_es_extends(r,n){function __(){this.constructor=r}filter_noise_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}(NoiseFilter,r),Object.defineProperty(NoiseFilter.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(r){this.uniforms.uNoise=r},enumerable:!1,configurable:!0}),Object.defineProperty(NoiseFilter.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(r){this.uniforms.uSeed=r},enumerable:!1,configurable:!0}),NoiseFilter}(Tr),co=new Nt;qt.prototype._cacheAsBitmap=!1,qt.prototype._cacheData=null;var lo=function lo(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(qt.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(r){var n;this._cacheAsBitmap!==r&&(this._cacheAsBitmap=r,r?(this._cacheData||(this._cacheData=new lo),(n=this._cacheData).originalRender=this.render,n.originalRenderCanvas=this.renderCanvas,n.originalUpdateTransform=this.updateTransform,n.originalCalculateBounds=this.calculateBounds,n.originalGetLocalBounds=this.getLocalBounds,n.originalDestroy=this.destroy,n.originalContainsPoint=this.containsPoint,n.originalMask=this._mask,n.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((n=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=n.originalRender,this.renderCanvas=n.originalRenderCanvas,this.calculateBounds=n.originalCalculateBounds,this.getLocalBounds=n.originalGetLocalBounds,this.destroy=n.originalDestroy,this.updateTransform=n.originalUpdateTransform,this.containsPoint=n.originalContainsPoint,this._mask=n.originalMask,this.filterArea=n.originalFilterArea))}}}),qt.prototype._renderCached=function _renderCached(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))},qt.prototype._initCachedDisplayObject=function _initCachedDisplayObject(r){if(!this._cacheData||!this._cacheData.sprite){var n=this.alpha;this.alpha=1,r.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters){var o=this.filters[0].padding;i.pad(o)}i.ceil(st.RESOLUTION);var a=r.renderTexture.current,s=r.renderTexture.sourceFrame.clone(),h=r.projection.transform,d=Le.create({width:i.width,height:i.height}),f="cacheAsBitmap_"+uid();this._cacheData.textureCacheId=f,ye.addToCache(d.baseTexture,f),Me.addToCache(d,f);var p=this.transform.localTransform.copyTo(co).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,r.render(this,d,!0,p,!1),r.projection.transform=h,r.renderTexture.bind(a,s),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var y=new ai(d);y.transform.worldTransform=this.transform.worldTransform,y.anchor.x=-i.x/i.width,y.anchor.y=-i.y/i.height,y.alpha=n,y._bounds=this._bounds,this._cacheData.sprite=y,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=y.containsPoint.bind(y)}},qt.prototype._renderCachedCanvas=function _renderCachedCanvas(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))},qt.prototype._initCachedDisplayObjectCanvas=function _initCachedDisplayObjectCanvas(r){if(!this._cacheData||!this._cacheData.sprite){var n=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var o=r.context,a=r._projTransform;n.ceil(st.RESOLUTION);var s=Le.create({width:n.width,height:n.height}),h="cacheAsBitmap_"+uid();this._cacheData.textureCacheId=h,ye.addToCache(s.baseTexture,h),Me.addToCache(s,h);var d=co;this.transform.localTransform.copyTo(d),d.invert(),d.tx-=n.x,d.ty-=n.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,s,!0,d,!1),r.context=o,r._projTransform=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var f=new ai(s);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-n.x/n.width,f.anchor.y=-n.y/n.height,f.alpha=i,f._bounds=this._bounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=f.containsPoint.bind(f)}},qt.prototype._calculateCachedBounds=function _calculateCachedBounds(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},qt.prototype._getCachedLocalBounds=function _getCachedLocalBounds(){return this._cacheData.sprite.getLocalBounds(null)},qt.prototype._destroyCachedDisplayObject=function _destroyCachedDisplayObject(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,ye.removeFromCache(this._cacheData.textureCacheId),Me.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},qt.prototype._cacheAsBitmapDestroy=function _cacheAsBitmapDestroy(r){this.cacheAsBitmap=!1,this.destroy(r)},qt.prototype.name=null,Zt.prototype.getChildByName=function getChildByName(r,n){for(var i=0,o=this.children.length;i<o;i++)if(this.children[i].name===r)return this.children[i];if(n)for(i=0,o=this.children.length;i<o;i++){if(this.children[i].getChildByName){var a=this.children[i].getChildByName(r,!0);if(a)return a}}return null},qt.prototype.getGlobalPosition=function getGlobalPosition(r,n){return void 0===r&&(r=new Ft),void 0===n&&(n=!1),this.parent?this.parent.toGlobal(this.position,r,n):(r.x=this.position.x,r.y=this.position.y),r};var mesh_extras_es_extendStatics=function(r,n){return(mesh_extras_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};function mesh_extras_es_extends(r,n){function __(){this.constructor=r}mesh_extras_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}var fo=function(r){function PlaneGeometry(n,i,o,a){void 0===n&&(n=100),void 0===i&&(i=100),void 0===o&&(o=10),void 0===a&&(a=10);var s=r.call(this)||this;return s.segWidth=o,s.segHeight=a,s.width=n,s.height=i,s.build(),s}return mesh_extras_es_extends(PlaneGeometry,r),PlaneGeometry.prototype.build=function(){for(var r=this.segWidth*this.segHeight,n=[],i=[],o=[],a=this.segWidth-1,s=this.segHeight-1,h=this.width/a,d=this.height/s,f=0;f<r;f++){var p=f%this.segWidth,y=f/this.segWidth|0;n.push(p*h,y*d),i.push(p/a,y/s)}var g=a*s;for(f=0;f<g;f++){var _=f%a,b=f/a|0,x=b*this.segWidth+_,T=b*this.segWidth+_+1,S=(b+1)*this.segWidth+_,E=(b+1)*this.segWidth+_+1;o.push(x,T,S,T,E,S)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},PlaneGeometry}(Ri),po=function(r){function RopeGeometry(n,i,o){void 0===n&&(n=200),void 0===o&&(o=0);var a=r.call(this,new Float32Array(4*i.length),new Float32Array(4*i.length),new Uint16Array(6*(i.length-1)))||this;return a.points=i,a._width=n,a.textureScale=o,a.build(),a}return mesh_extras_es_extends(RopeGeometry,r),Object.defineProperty(RopeGeometry.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),RopeGeometry.prototype.build=function(){var r=this.points;if(r){var n=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),o=this.getIndex();if(!(r.length<1)){n.data.length/4!==r.length&&(n.data=new Float32Array(4*r.length),i.data=new Float32Array(4*r.length),o.data=new Uint16Array(6*(r.length-1)));var a=i.data,s=o.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;for(var h=0,d=r[0],f=this._width*this.textureScale,p=r.length,y=0;y<p;y++){var g=4*y;if(this.textureScale>0){var _=d.x-r[y].x,b=d.y-r[y].y,x=Math.sqrt(_*_+b*b);d=r[y],h+=x/f}else h=y/(p-1);a[g]=h,a[g+1]=0,a[g+2]=h,a[g+3]=1}var T=0;for(y=0;y<p-1;y++){g=2*y;s[T++]=g,s[T++]=g+1,s[T++]=g+2,s[T++]=g+2,s[T++]=g+1,s[T++]=g+3}i.update(),o.update(),this.updateVertices()}}},RopeGeometry.prototype.updateVertices=function(){var r=this.points;if(!(r.length<1)){for(var n,i=r[0],o=0,a=0,s=this.buffers[0].data,h=r.length,d=0;d<h;d++){var f=r[d],p=4*d;a=-((n=d<r.length-1?r[d+1]:f).x-i.x),o=n.y-i.y;var y=Math.sqrt(o*o+a*a),g=this.textureScale>0?this.textureScale*this._width/2:this._width/2;o/=y,a/=y,o*=g,a*=g,s[p]=f.x+o,s[p+1]=f.y+a,s[p+2]=f.x-o,s[p+3]=f.y-a,i=f}this.buffers[0].update()}},RopeGeometry.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},RopeGeometry}(Ri),yo=function(r){function SimpleRope(n,i,o){void 0===o&&(o=0);var a=this,s=new po(n.height,i,o),h=new Oi(n);return o>0&&(n.baseTexture.wrapMode=Q.REPEAT),(a=r.call(this,s,h)||this).autoUpdate=!0,a}return mesh_extras_es_extends(SimpleRope,r),SimpleRope.prototype._render=function(n){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),r.prototype._render.call(this,n)},SimpleRope}(Ai),mo=function(r){function SimplePlane(n,i,o){var a=this,s=new fo(n.width,n.height,i,o),h=new Oi(Me.WHITE);return(a=r.call(this,s,h)||this).texture=n,a}return mesh_extras_es_extends(SimplePlane,r),SimplePlane.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var r=this.geometry;r.width=this.shader.texture.width,r.height=this.shader.texture.height,r.build()},Object.defineProperty(SimplePlane.prototype,"texture",{get:function(){return this.shader.texture},set:function(r){this.shader.texture!==r&&(this.shader.texture=r,this._textureID=-1,r.baseTexture.valid?this.textureUpdated():r.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),SimplePlane.prototype._render=function(n){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),r.prototype._render.call(this,n)},SimplePlane}(Ai),go=function(r){function SimpleMesh(n,i,o,a,s){void 0===n&&(n=Me.EMPTY);var h=this,d=new Ri(i,o,a);d.getBuffer("aVertexPosition").static=!1;var f=new Oi(n);return(h=r.call(this,d,f,null,s)||this).autoUpdate=!0,h}return mesh_extras_es_extends(SimpleMesh,r),Object.defineProperty(SimpleMesh.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),SimpleMesh.prototype._render=function(n){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),r.prototype._render.call(this,n)},SimpleMesh}(Ai),vo=function(r){function NineSlicePlane(n,i,o,a,s){void 0===i&&(i=10),void 0===o&&(o=10),void 0===a&&(a=10),void 0===s&&(s=10);var h=r.call(this,Me.WHITE,4,4)||this;return h._origWidth=n.orig.width,h._origHeight=n.orig.height,h._width=h._origWidth,h._height=h._origHeight,h._leftWidth=i,h._rightWidth=a,h._topHeight=o,h._bottomHeight=s,h.texture=n,h}return mesh_extras_es_extends(NineSlicePlane,r),NineSlicePlane.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(NineSlicePlane.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),NineSlicePlane.prototype.updateHorizontalVertices=function(){var r=this.vertices,n=this._getMinScale();r[9]=r[11]=r[13]=r[15]=this._topHeight*n,r[17]=r[19]=r[21]=r[23]=this._height-this._bottomHeight*n,r[25]=r[27]=r[29]=r[31]=this._height},NineSlicePlane.prototype.updateVerticalVertices=function(){var r=this.vertices,n=this._getMinScale();r[2]=r[10]=r[18]=r[26]=this._leftWidth*n,r[4]=r[12]=r[20]=r[28]=this._width-this._rightWidth*n,r[6]=r[14]=r[22]=r[30]=this._width},NineSlicePlane.prototype._getMinScale=function(){var r=this._leftWidth+this._rightWidth,n=this._width>r?1:this._width/r,i=this._topHeight+this._bottomHeight,o=this._height>i?1:this._height/i;return Math.min(n,o)},Object.defineProperty(NineSlicePlane.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(r){this._leftWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(r){this._rightWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"topHeight",{get:function(){return this._topHeight},set:function(r){this._topHeight=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(r){this._bottomHeight=r,this._refresh()},enumerable:!1,configurable:!0}),NineSlicePlane.prototype._refresh=function(){var r=this.texture,n=this.geometry.buffers[1].data;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var i=1/this._origWidth,o=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=i*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-i*this._rightWidth,n[9]=n[11]=n[13]=n[15]=o*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-o*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},NineSlicePlane}(mo),sprite_animated_es_extendStatics=function(r,n){return(sprite_animated_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};var _o=function(r){function AnimatedSprite(n,i){void 0===i&&(i=!0);var o=r.call(this,n[0]instanceof Me?n[0]:n[0].texture)||this;return o._textures=null,o._durations=null,o._autoUpdate=i,o._isConnectedToTicker=!1,o.animationSpeed=1,o.loop=!0,o.updateAnchor=!1,o.onComplete=null,o.onFrameChange=null,o.onLoop=null,o._currentTime=0,o._playing=!1,o._previousFrame=null,o.textures=n,o}return function sprite_animated_es_extends(r,n){function __(){this.constructor=r}sprite_animated_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}(AnimatedSprite,r),AnimatedSprite.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(ee.shared.remove(this.update,this),this._isConnectedToTicker=!1))},AnimatedSprite.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(ee.shared.add(this.update,this,Qt.HIGH),this._isConnectedToTicker=!0))},AnimatedSprite.prototype.gotoAndStop=function(r){this.stop();var n=this.currentFrame;this._currentTime=r,n!==this.currentFrame&&this.updateTexture()},AnimatedSprite.prototype.gotoAndPlay=function(r){var n=this.currentFrame;this._currentTime=r,n!==this.currentFrame&&this.updateTexture(),this.play()},AnimatedSprite.prototype.update=function(r){var n=this.animationSpeed*r,i=this.currentFrame;if(null!==this._durations){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=n/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];var a=Math.sign(this.animationSpeed*r);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())},AnimatedSprite.prototype.updateTexture=function(){var r=this.currentFrame;this._previousFrame!==r&&(this._previousFrame=r,this._texture=this._textures[r],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},AnimatedSprite.prototype.destroy=function(n){this.stop(),r.prototype.destroy.call(this,n),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},AnimatedSprite.fromFrames=function(r){for(var n=[],i=0;i<r.length;++i)n.push(Me.from(r[i]));return new AnimatedSprite(n)},AnimatedSprite.fromImages=function(r){for(var n=[],i=0;i<r.length;++i)n.push(Me.from(r[i]));return new AnimatedSprite(n)},Object.defineProperty(AnimatedSprite.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(AnimatedSprite.prototype,"textures",{get:function(){return this._textures},set:function(r){if(r[0]instanceof Me)this._textures=r,this._durations=null;else{this._textures=[],this._durations=[];for(var n=0;n<r.length;n++)this._textures.push(r[n].texture),this._durations.push(r[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(AnimatedSprite.prototype,"currentFrame",{get:function(){var r=Math.floor(this._currentTime)%this._textures.length;return r<0&&(r+=this._textures.length),r},enumerable:!1,configurable:!0}),Object.defineProperty(AnimatedSprite.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(AnimatedSprite.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(ee.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(ee.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),AnimatedSprite}(ai),pixi_es_extendStatics=function(r,n){return(pixi_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(r,n)};function pixi_es_extends(r,n){function __(){this.constructor=r}pixi_es_extendStatics(r,n),r.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}var bo="5.0.0";function useDeprecated(){var r=this;Object.defineProperties(r,{SVG_SIZE:{get:function(){return deprecation(bo,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),r.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return deprecation(bo,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),r.Transform}},TransformBase:{get:function(){return deprecation(bo,"PIXI.TransformBase class has been removed, use PIXI.Transform"),r.Transform}},TRANSFORM_MODE:{get:function(){return deprecation(bo,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return deprecation(bo,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),r.Renderer}},CanvasRenderTarget:{get:function(){return deprecation(bo,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),r.utils.CanvasRenderTarget}},loader:{get:function(){return deprecation(bo,"PIXI.loader instance has moved to PIXI.Loader.shared"),r.Loader.shared}},FilterManager:{get:function(){return deprecation(bo,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),r.systems.FilterSystem}},CanvasTinter:{get:function(){return deprecation("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),r.canvasUtils}},GroupD8:{get:function(){return deprecation("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),r.groupD8}}}),r.accessibility={},Object.defineProperties(r.accessibility,{AccessibilityManager:{get:function(){return deprecation("5.3.0","PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"),r.AccessibilityManager}}}),r.interaction={},Object.defineProperties(r.interaction,{InteractionManager:{get:function(){return deprecation("5.3.0","PIXI.interaction.InteractionManager moved to PIXI.InteractionManager"),r.InteractionManager}},InteractionData:{get:function(){return deprecation("5.3.0","PIXI.interaction.InteractionData moved to PIXI.InteractionData"),r.InteractionData}},InteractionEvent:{get:function(){return deprecation("5.3.0","PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent"),r.InteractionEvent}}}),r.prepare={},Object.defineProperties(r.prepare,{BasePrepare:{get:function(){return deprecation("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),r.BasePrepare}},Prepare:{get:function(){return deprecation("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),r.Prepare}},CanvasPrepare:{get:function(){return deprecation("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),r.CanvasPrepare}}}),r.extract={},Object.defineProperties(r.extract,{Extract:{get:function(){return deprecation("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),r.Extract}},CanvasExtract:{get:function(){return deprecation("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),r.CanvasExtract}}}),r.extras={},Object.defineProperties(r.extras,{TilingSprite:{get:function(){return deprecation(bo,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),r.TilingSprite}},TilingSpriteRenderer:{get:function(){return deprecation(bo,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),r.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return deprecation(bo,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),r.AnimatedSprite}},BitmapText:{get:function(){return deprecation(bo,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),r.BitmapText}}}),r.TilingSprite.fromFrame=function fromFrame(n,i,o){return deprecation("5.3.0","TilingSprite.fromFrame is deprecated, use TilingSprite.from"),r.TilingSprite.from(n,{width:i,height:o})},r.TilingSprite.fromImage=function fromImage(n,i,o,a){return void 0===a&&(a={}),deprecation("5.3.0","TilingSprite.fromImage is deprecated, use TilingSprite.from"),a&&"object"!=typeof a&&(a={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),a.width=i,a.height=o,r.TilingSprite.from(n,a)},Object.defineProperties(r.utils,{getSvgSize:{get:function(){return deprecation(bo,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),r.resources.SVGResource.getSize}}}),r.mesh={},Object.defineProperties(r.mesh,{Mesh:{get:function(){return deprecation(bo,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),r.SimpleMesh}},NineSlicePlane:{get:function(){return deprecation(bo,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),r.NineSlicePlane}},Plane:{get:function(){return deprecation(bo,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),r.SimplePlane}},Rope:{get:function(){return deprecation(bo,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),r.SimpleRope}},RawMesh:{get:function(){return deprecation(bo,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),r.Mesh}},CanvasMeshRenderer:{get:function(){return deprecation(bo,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),r.CanvasMeshRenderer}},MeshRenderer:{get:function(){return deprecation(bo,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),r.MeshRenderer}}}),r.particles={},Object.defineProperties(r.particles,{ParticleContainer:{get:function(){return deprecation(bo,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),r.ParticleContainer}},ParticleRenderer:{get:function(){return deprecation(bo,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),r.ParticleRenderer}}}),r.ticker={},Object.defineProperties(r.ticker,{Ticker:{get:function(){return deprecation(bo,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),r.Ticker}},shared:{get:function(){return deprecation(bo,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),r.Ticker.shared}}}),r.loaders={},Object.defineProperties(r.loaders,{Loader:{get:function(){return deprecation(bo,"PIXI.loaders.Loader class has moved to PIXI.Loader"),r.Loader}},Resource:{get:function(){return deprecation(bo,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),r.LoaderResource}},bitmapFontParser:{get:function(){return deprecation(bo,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),r.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){deprecation(bo,"PIXI.loaders.parseBitmapFontData function has removed")}},spritesheetParser:{get:function(){return deprecation(bo,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),r.SpritesheetLoader.use}},getResourcePath:{get:function(){return deprecation(bo,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),r.SpritesheetLoader.getResourcePath}}}),r.Loader.addPixiMiddleware=function addPixiMiddleware(n){return deprecation(bo,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),r.loaders.Loader.registerPlugin({use:n()})};var eventToSignal=function(r){return"on"+r.charAt(0).toUpperCase()+r.slice(1)};Object.assign(r.Loader.prototype,{on:function(r){var n=eventToSignal(r);deprecation(bo,"PIXI.Loader#on is completely deprecated, use PIXI.Loader#"+n+".add")},once:function(r){var n=eventToSignal(r);deprecation(bo,"PIXI.Loader#once is completely deprecated, use PIXI.Loader#"+n+".once")},off:function(r){var n=eventToSignal(r);deprecation(bo,"PIXI.Loader#off is completely deprecated, use PIXI.Loader#"+n+".detach")}}),Object.defineProperty(r.extract,"WebGLExtract",{get:function(){return deprecation(bo,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),r.Extract}}),Object.defineProperty(r.prepare,"WebGLPrepare",{get:function(){return deprecation(bo,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),r.Prepare}}),r.Container.prototype._renderWebGL=function _renderWebGL(r){deprecation(bo,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(r)},r.Container.prototype.renderWebGL=function renderWebGL(r){deprecation(bo,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(r)},r.DisplayObject.prototype.renderWebGL=function renderWebGL(r){deprecation(bo,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(r)},r.Container.prototype.renderAdvancedWebGL=function renderAdvancedWebGL(r){deprecation(bo,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(r)},Object.defineProperties(r.settings,{TRANSFORM_MODE:{get:function(){return deprecation(bo,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){deprecation(bo,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var n=r.BaseTexture;n.prototype.loadSource=function loadSource(n){deprecation(bo,"PIXI.BaseTexture.loadSource method has been deprecated");var i=r.resources.autoDetectResource(n);i.internal=!0,this.setResource(i),this.update()};var i=!1;Object.defineProperties(n.prototype,{hasLoaded:{get:function(){return deprecation(bo,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){var r;return deprecation(bo,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),null===(r=this.resource)||void 0===r?void 0:r.url},set:function(r){deprecation(bo,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=r)}},source:{get:function(){return deprecation(bo,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource.source},set:function(r){deprecation(bo,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=r)}},premultiplyAlpha:{get:function(){return deprecation("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(r){deprecation("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(r)}},_id:{get:function(){return i||(deprecation("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),i=!0),this._batchLocation},set:function(r){this._batchLocation=r}}}),n.fromImage=function fromImage(r,i,o,a){deprecation(bo,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");var s={scale:a,crossorigin:i};return n.from(r,{scaleMode:o,resourceOptions:s})},n.fromCanvas=function fromCanvas(r,i){return deprecation(bo,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),n.from(r,{scaleMode:i})},n.fromSVG=function fromSVG(r,i,o,a){deprecation(bo,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");var s={scale:a,crossorigin:i};return n.from(r,{scaleMode:o,resourceOptions:s})},Object.defineProperties(r.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return deprecation("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(r){deprecation("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(r)}}}),r.Point.prototype.copy=function copy(r){return deprecation(bo,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(r)},r.ObservablePoint.prototype.copy=function copy(r){return deprecation(bo,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(r)},r.Rectangle.prototype.copy=function copy(r){return deprecation(bo,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(r)},r.Matrix.prototype.copy=function copy(r){return deprecation(bo,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(r)},r.systems.StateSystem.prototype.setState=function setState(r){return deprecation("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(r)},Object.assign(r.systems.FilterSystem.prototype,{getRenderTarget:function(r,n){return deprecation(bo,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(null,n)},returnRenderTarget:function(r){deprecation(bo,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(r)},calculateScreenSpaceMatrix:function(r){deprecation(bo,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var n=r.identity(),i=this.activeState,o=i.sourceFrame,a=i.destinationFrame;return n.translate(o.x/a.width,o.y/a.height),n.scale(a.width,a.height),n},calculateNormalizedScreenSpaceMatrix:function(r){deprecation(bo,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var n=this.activeState,i=n.sourceFrame,o=n.destinationFrame,a=r.identity();a.translate(i.x/o.width,i.y/o.height);var s=o.width/i.width,h=o.height/i.height;return a.scale(s,h),a}}),Object.defineProperties(r.RenderTexture.prototype,{sourceFrame:{get:function(){return deprecation(bo,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return deprecation(bo,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var o=function(r){function BlurXFilter(n,i,o,a){return deprecation(bo,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),r.call(this,!0,n,i,o,a)||this}return pixi_es_extends(BlurXFilter,r),BlurXFilter}(r.filters.BlurFilterPass),a=function(r){function BlurYFilter(n,i,o,a){return deprecation(bo,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),r.call(this,!1,n,i,o,a)||this}return pixi_es_extends(BlurYFilter,r),BlurYFilter}(r.filters.BlurFilterPass);Object.assign(r.filters,{BlurXFilter:o,BlurYFilter:a});var s=r.Sprite,h=r.Texture,d=r.Graphics;function spriteFrom(r,n,i,o){return deprecation(bo,"PIXI.Sprite."+r+" method is deprecated, use PIXI.Sprite.from"),s.from(n,{resourceOptions:{scale:o,crossorigin:i}})}function textureFrom(r,n,i,o){return deprecation(bo,"PIXI.Texture."+r+" method is deprecated, use PIXI.Texture.from"),h.from(n,{resourceOptions:{scale:o,crossorigin:i}})}d.prototype.generateCanvasTexture||(d.prototype.generateCanvasTexture=function generateCanvasTexture(){deprecation(bo,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(d.prototype,"graphicsData",{get:function(){return deprecation(bo,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}}),s.fromImage=spriteFrom.bind(null,"fromImage"),s.fromSVG=spriteFrom.bind(null,"fromSVG"),s.fromCanvas=spriteFrom.bind(null,"fromCanvas"),s.fromVideo=spriteFrom.bind(null,"fromVideo"),s.fromFrame=spriteFrom.bind(null,"fromFrame"),h.fromImage=textureFrom.bind(null,"fromImage"),h.fromSVG=textureFrom.bind(null,"fromSVG"),h.fromCanvas=textureFrom.bind(null,"fromCanvas"),h.fromVideo=textureFrom.bind(null,"fromVideo"),h.fromFrame=textureFrom.bind(null,"fromFrame"),Object.defineProperty(r.AbstractRenderer.prototype,"autoResize",{get:function(){return deprecation(bo,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(r){deprecation(bo,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=r}}),Object.defineProperty(r.Renderer.prototype,"textureManager",{get:function(){return deprecation(bo,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),r.utils.mixins={mixin:function(){deprecation(bo,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){deprecation(bo,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){deprecation(bo,"PIXI.utils.mixins.performMixins function is no longer available")}},Object.defineProperty(r.BitmapText.prototype,"font",{get:function(){return deprecation("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),{name:this._fontName,size:this._fontSize,tint:this._tint,align:this._align}},set:function(n){if(deprecation("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),n){var i={font:n};this._upgradeStyle(i),i.fontSize=i.fontSize||r.BitmapFont.available[i.fontName].size,this._fontName=i.fontName,this._fontSize=i.fontSize,this.dirty=!0}}})}Yr.registerPlugin("accessibility",Jt),Yr.registerPlugin("extract",ln),Yr.registerPlugin("interaction",he),Yr.registerPlugin("particle",Mn),Yr.registerPlugin("prepare",mi),Yr.registerPlugin("batch",sn),Yr.registerPlugin("tilingSprite",Ei),wn.registerPlugin(Ni),wn.registerPlugin(_i),un.registerPlugin(re),un.registerPlugin(Pn);var xo="5.3.3",To={AlphaFilter:ki,BlurFilter:oo,BlurFilterPass:io,ColorMatrixFilter:ao,DisplacementFilter:so,FXAAFilter:uo,NoiseFilter:ho}},function(r,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function defineProperties(r,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}return function(r,n,i){return n&&defineProperties(r.prototype,n),i&&defineProperties(r,i),r}}();function _classCallCheck(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}var a=function(){function MiniSignalBinding(r,n,i){void 0===n&&(n=!1),_classCallCheck(this,MiniSignalBinding),this._fn=r,this._once=n,this._thisArg=i,this._next=this._prev=this._owner=null}return o(MiniSignalBinding,[{key:"detach",value:function detach(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),MiniSignalBinding}();function _addMiniSignalBinding(r,n){return r._head?(r._tail._next=n,n._prev=r._tail,r._tail=n):(r._head=n,r._tail=n),n._owner=r,n}var s=function(){function MiniSignal(){_classCallCheck(this,MiniSignal),this._head=this._tail=void 0}return o(MiniSignal,[{key:"handlers",value:function handlers(){var r=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],n=this._head;if(r)return!!n;for(var i=[];n;)i.push(n),n=n._next;return i}},{key:"has",value:function has(r){if(!(r instanceof a))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return r._owner===this}},{key:"dispatch",value:function dispatch(){var r=this._head;if(!r)return!1;for(;r;)r._once&&this.detach(r),r._fn.apply(r._thisArg,arguments),r=r._next;return!0}},{key:"add",value:function add(r){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof r)throw new Error("MiniSignal#add(): First arg must be a Function.");return _addMiniSignalBinding(this,new a(r,!1,n))}},{key:"once",value:function once(r){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof r)throw new Error("MiniSignal#once(): First arg must be a Function.");return _addMiniSignalBinding(this,new a(r,!0,n))}},{key:"detach",value:function detach(r){if(!(r instanceof a))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return r._owner!==this||(r._prev&&(r._prev._next=r._next),r._next&&(r._next._prev=r._prev),r===this._head?(this._head=r._next,null===r._next&&(this._tail=null)):r===this._tail&&(this._tail=r._prev,this._tail._next=null),r._owner=null),this}},{key:"detachAll",value:function detachAll(){var r=this._head;if(!r)return this;for(this._head=this._tail=null;r;)r._owner=null,r=r._next;return this}}]),MiniSignal}();s.MiniSignalBinding=a,n.default=s,r.exports=n.default},,,function(r,n){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(r){"object"==typeof window&&(i=window)}r.exports=i},,,,function(r,n,i){"use strict";var o=i(31),a=i(32);function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}n.parse=urlParse,n.resolve=function urlResolve(r,n){return urlParse(r,!1,!0).resolve(n)},n.resolveObject=function urlResolveObject(r,n){return r?urlParse(r,!1,!0).resolveObject(n):n},n.format=function urlFormat(r){a.isString(r)&&(r=urlParse(r));return r instanceof Url?r.format():Url.prototype.format.call(r)},n.Url=Url;var s=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),p=["'"].concat(f),y=["%","/","?",";","#"].concat(p),g=["/","?","#"],_=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E=i(33);function urlParse(r,n,i){if(r&&a.isObject(r)&&r instanceof Url)return r;var o=new Url;return o.parse(r,n,i),o}Url.prototype.parse=function(r,n,i){if(!a.isString(r))throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var h=r.indexOf("?"),f=-1!==h&&h<r.indexOf("#")?"?":"#",w=r.split(f);w[0]=w[0].replace(/\\/g,"/");var P=r=w.join(f);if(P=P.trim(),!i&&1===r.split("#").length){var O=d.exec(P);if(O)return this.path=P,this.href=P,this.pathname=O[1],O[2]?(this.search=O[2],this.query=n?E.parse(this.search.substr(1)):this.search.substr(1)):n&&(this.search="",this.query={}),this}var R=s.exec(P);if(R){var C=(R=R[0]).toLowerCase();this.protocol=C,P=P.substr(R.length)}if(i||R||P.match(/^\/\/[^@\/]+@[^@\/]+/)){var M="//"===P.substr(0,2);!M||R&&T[R]||(P=P.substr(2),this.slashes=!0)}if(!T[R]&&(M||R&&!S[R])){for(var D,F,N=-1,U=0;U<g.length;U++){-1!==(j=P.indexOf(g[U]))&&(-1===N||j<N)&&(N=j)}-1!==(F=-1===N?P.lastIndexOf("@"):P.lastIndexOf("@",N))&&(D=P.slice(0,F),P=P.slice(F+1),this.auth=decodeURIComponent(D)),N=-1;for(U=0;U<y.length;U++){var j;-1!==(j=P.indexOf(y[U]))&&(-1===N||j<N)&&(N=j)}-1===N&&(N=P.length),this.host=P.slice(0,N),P=P.slice(N),this.parseHost(),this.hostname=this.hostname||"";var X="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!X)for(var H=this.hostname.split(/\./),W=(U=0,H.length);U<W;U++){var V=H[U];if(V&&!V.match(_)){for(var Y="",q=0,Z=V.length;q<Z;q++)V.charCodeAt(q)>127?Y+="x":Y+=V[q];if(!Y.match(_)){var $=H.slice(0,U),Q=H.slice(U+1),tt=V.match(b);tt&&($.push(tt[1]),Q.unshift(tt[2])),Q.length&&(P="/"+Q.join(".")+P),this.hostname=$.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),X||(this.hostname=o.toASCII(this.hostname));var et=this.port?":"+this.port:"",rt=this.hostname||"";this.host=rt+et,this.href+=this.host,X&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==P[0]&&(P="/"+P))}if(!x[C])for(U=0,W=p.length;U<W;U++){var nt=p[U];if(-1!==P.indexOf(nt)){var it=encodeURIComponent(nt);it===nt&&(it=escape(nt)),P=P.split(nt).join(it)}}var ot=P.indexOf("#");-1!==ot&&(this.hash=P.substr(ot),P=P.slice(0,ot));var at=P.indexOf("?");if(-1!==at?(this.search=P.substr(at),this.query=P.substr(at+1),n&&(this.query=E.parse(this.query)),P=P.slice(0,at)):n&&(this.search="",this.query={}),P&&(this.pathname=P),S[C]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){et=this.pathname||"";var st=this.search||"";this.path=et+st}return this.href=this.format(),this},Url.prototype.format=function(){var r=this.auth||"";r&&(r=(r=encodeURIComponent(r)).replace(/%3A/i,":"),r+="@");var n=this.protocol||"",i=this.pathname||"",o=this.hash||"",s=!1,h="";this.host?s=r+this.host:this.hostname&&(s=r+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(h=E.stringify(this.query));var d=this.search||h&&"?"+h||"";return n&&":"!==n.substr(-1)&&(n+=":"),this.slashes||(!n||S[n])&&!1!==s?(s="//"+(s||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):s||(s=""),o&&"#"!==o.charAt(0)&&(o="#"+o),d&&"?"!==d.charAt(0)&&(d="?"+d),n+s+(i=i.replace(/[?#]/g,(function(r){return encodeURIComponent(r)})))+(d=d.replace("#","%23"))+o},Url.prototype.resolve=function(r){return this.resolveObject(urlParse(r,!1,!0)).format()},Url.prototype.resolveObject=function(r){if(a.isString(r)){var n=new Url;n.parse(r,!1,!0),r=n}for(var i=new Url,o=Object.keys(this),s=0;s<o.length;s++){var h=o[s];i[h]=this[h]}if(i.hash=r.hash,""===r.href)return i.href=i.format(),i;if(r.slashes&&!r.protocol){for(var d=Object.keys(r),f=0;f<d.length;f++){var p=d[f];"protocol"!==p&&(i[p]=r[p])}return S[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(r.protocol&&r.protocol!==i.protocol){if(!S[r.protocol]){for(var y=Object.keys(r),g=0;g<y.length;g++){var _=y[g];i[_]=r[_]}return i.href=i.format(),i}if(i.protocol=r.protocol,r.host||T[r.protocol])i.pathname=r.pathname;else{for(var b=(r.pathname||"").split("/");b.length&&!(r.host=b.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),""!==b[0]&&b.unshift(""),b.length<2&&b.unshift(""),i.pathname=b.join("/")}if(i.search=r.search,i.query=r.query,i.host=r.host||"",i.auth=r.auth,i.hostname=r.hostname||r.host,i.port=r.port,i.pathname||i.search){var x=i.pathname||"",E=i.search||"";i.path=x+E}return i.slashes=i.slashes||r.slashes,i.href=i.format(),i}var w=i.pathname&&"/"===i.pathname.charAt(0),P=r.host||r.pathname&&"/"===r.pathname.charAt(0),O=P||w||i.host&&r.pathname,R=O,C=i.pathname&&i.pathname.split("/")||[],M=(b=r.pathname&&r.pathname.split("/")||[],i.protocol&&!S[i.protocol]);if(M&&(i.hostname="",i.port=null,i.host&&(""===C[0]?C[0]=i.host:C.unshift(i.host)),i.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(""===b[0]?b[0]=r.host:b.unshift(r.host)),r.host=null),O=O&&(""===b[0]||""===C[0])),P)i.host=r.host||""===r.host?r.host:i.host,i.hostname=r.hostname||""===r.hostname?r.hostname:i.hostname,i.search=r.search,i.query=r.query,C=b;else if(b.length)C||(C=[]),C.pop(),C=C.concat(b),i.search=r.search,i.query=r.query;else if(!a.isNullOrUndefined(r.search)){if(M)i.hostname=i.host=C.shift(),(j=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=j.shift(),i.host=i.hostname=j.shift());return i.search=r.search,i.query=r.query,a.isNull(i.pathname)&&a.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!C.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var D=C.slice(-1)[0],F=(i.host||r.host||C.length>1)&&("."===D||".."===D)||""===D,N=0,U=C.length;U>=0;U--)"."===(D=C[U])?C.splice(U,1):".."===D?(C.splice(U,1),N++):N&&(C.splice(U,1),N--);if(!O&&!R)for(;N--;N)C.unshift("..");!O||""===C[0]||C[0]&&"/"===C[0].charAt(0)||C.unshift(""),F&&"/"!==C.join("/").substr(-1)&&C.push("");var j,X=""===C[0]||C[0]&&"/"===C[0].charAt(0);M&&(i.hostname=i.host=X?"":C.length?C.shift():"",(j=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=j.shift(),i.host=i.hostname=j.shift()));return(O=O||i.host&&C.length)&&!X&&C.unshift(""),C.length?i.pathname=C.join("/"):(i.pathname=null,i.path=null),a.isNull(i.pathname)&&a.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=r.auth||i.auth,i.slashes=i.slashes||r.slashes,i.href=i.format(),i},Url.prototype.parseHost=function(){var r=this.host,n=h.exec(r);n&&(":"!==(n=n[0])&&(this.port=n.substr(1)),r=r.substr(0,r.length-n.length)),r&&(this.hostname=r)}},,function(r,n,i){"use strict";i.r(n),function(r){i.d(n,"Easing",(function(){return a})),i.d(n,"Group",(function(){return h})),i.d(n,"Interpolation",(function(){return d})),i.d(n,"Sequence",(function(){return f})),i.d(n,"Tween",(function(){return y})),i.d(n,"VERSION",(function(){return g})),i.d(n,"add",(function(){return S})),i.d(n,"getAll",(function(){return x})),i.d(n,"nextId",(function(){return _})),i.d(n,"now",(function(){return s})),i.d(n,"remove",(function(){return E})),i.d(n,"removeAll",(function(){return T})),i.d(n,"update",(function(){return w}));var o,a={Linear:{None:function(r){return r}},Quadratic:{In:function(r){return r*r},Out:function(r){return r*(2-r)},InOut:function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)}},Cubic:{In:function(r){return r*r*r},Out:function(r){return--r*r*r+1},InOut:function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)}},Quartic:{In:function(r){return r*r*r*r},Out:function(r){return 1- --r*r*r*r},InOut:function(r){return(r*=2)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)}},Quintic:{In:function(r){return r*r*r*r*r},Out:function(r){return--r*r*r*r*r+1},InOut:function(r){return(r*=2)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)}},Sinusoidal:{In:function(r){return 1-Math.cos(r*Math.PI/2)},Out:function(r){return Math.sin(r*Math.PI/2)},InOut:function(r){return.5*(1-Math.cos(Math.PI*r))}},Exponential:{In:function(r){return 0===r?0:Math.pow(1024,r-1)},Out:function(r){return 1===r?1:1-Math.pow(2,-10*r)},InOut:function(r){return 0===r?0:1===r?1:(r*=2)<1?.5*Math.pow(1024,r-1):.5*(2-Math.pow(2,-10*(r-1)))}},Circular:{In:function(r){return 1-Math.sqrt(1-r*r)},Out:function(r){return Math.sqrt(1- --r*r)},InOut:function(r){return(r*=2)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1)}},Elastic:{In:function(r){return 0===r?0:1===r?1:-Math.pow(2,10*(r-1))*Math.sin(5*(r-1.1)*Math.PI)},Out:function(r){return 0===r?0:1===r?1:Math.pow(2,-10*r)*Math.sin(5*(r-.1)*Math.PI)+1},InOut:function(r){return 0===r?0:1===r?1:(r*=2)<1?-.5*Math.pow(2,10*(r-1))*Math.sin(5*(r-1.1)*Math.PI):.5*Math.pow(2,-10*(r-1))*Math.sin(5*(r-1.1)*Math.PI)+1}},Back:{In:function(r){var n=1.70158;return r*r*((n+1)*r-n)},Out:function(r){var n=1.70158;return--r*r*((n+1)*r+n)+1},InOut:function(r){var n=2.5949095;return(r*=2)<1?r*r*((n+1)*r-n)*.5:.5*((r-=2)*r*((n+1)*r+n)+2)}},Bounce:{In:function(r){return 1-a.Bounce.Out(1-r)},Out:function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},InOut:function(r){return r<.5?.5*a.Bounce.In(2*r):.5*a.Bounce.Out(2*r-1)+.5}}},s="undefined"==typeof self&&void 0!==r&&r.hrtime?function(){var n=r.hrtime();return 1e3*n[0]+n[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},h=function(){function Group(){this._tweens={},this._tweensAddedDuringUpdate={}}return Group.prototype.getAll=function(){var r=this;return Object.keys(this._tweens).map((function(n){return r._tweens[n]}))},Group.prototype.removeAll=function(){this._tweens={}},Group.prototype.add=function(r){this._tweens[r.getId()]=r,this._tweensAddedDuringUpdate[r.getId()]=r},Group.prototype.remove=function(r){delete this._tweens[r.getId()],delete this._tweensAddedDuringUpdate[r.getId()]},Group.prototype.update=function(r,n){void 0===r&&(r=s()),void 0===n&&(n=!1);var i=Object.keys(this._tweens);if(0===i.length)return!1;for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var o=0;o<i.length;o++){var a=this._tweens[i[o]],h=!n;a&&!1===a.update(r,h)&&!n&&delete this._tweens[i[o]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},Group}(),d={Linear:function(r,n){var i=r.length-1,o=i*n,a=Math.floor(o),s=d.Utils.Linear;return n<0?s(r[0],r[1],o):n>1?s(r[i],r[i-1],i-o):s(r[a],r[a+1>i?i:a+1],o-a)},Bezier:function(r,n){for(var i=0,o=r.length-1,a=Math.pow,s=d.Utils.Bernstein,h=0;h<=o;h++)i+=a(1-n,o-h)*a(n,h)*r[h]*s(o,h);return i},CatmullRom:function(r,n){var i=r.length-1,o=i*n,a=Math.floor(o),s=d.Utils.CatmullRom;return r[0]===r[i]?(n<0&&(a=Math.floor(o=i*(1+n))),s(r[(a-1+i)%i],r[a],r[(a+1)%i],r[(a+2)%i],o-a)):n<0?r[0]-(s(r[0],r[0],r[1],r[1],-o)-r[0]):n>1?r[i]-(s(r[i],r[i],r[i-1],r[i-1],o-i)-r[i]):s(r[a?a-1:0],r[a],r[i<a+1?i:a+1],r[i<a+2?i:a+2],o-a)},Utils:{Linear:function(r,n,i){return(n-r)*i+r},Bernstein:function(r,n){var i=d.Utils.Factorial;return i(r)/i(n)/i(r-n)},Factorial:(o=[1],function(r){var n=1;if(o[r])return o[r];for(var i=r;i>1;i--)n*=i;return o[r]=n,n}),CatmullRom:function(r,n,i,o,a){var s=.5*(i-r),h=.5*(o-n),d=a*a;return(2*n-2*i+s+h)*(a*d)+(-3*n+3*i-2*s-h)*d+s*a+n}}},f=function(){function Sequence(){}return Sequence.nextId=function(){return Sequence._nextId++},Sequence._nextId=0,Sequence}(),p=new h,y=function(){function Tween(r,n){void 0===n&&(n=p),this._object=r,this._group=n,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=a.Linear.None,this._interpolationFunction=d.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=f.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return Tween.prototype.getId=function(){return this._id},Tween.prototype.isPlaying=function(){return this._isPlaying},Tween.prototype.isPaused=function(){return this._isPaused},Tween.prototype.to=function(r,n){return this._valuesEnd=Object.create(r),void 0!==n&&(this._duration=n),this},Tween.prototype.duration=function(r){return this._duration=r,this},Tween.prototype.start=function(r){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var n in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==r?"string"==typeof r?s()+parseFloat(r):r:s(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},Tween.prototype._setupProperties=function(r,n,i,o){for(var a in i){var s=r[a],h=Array.isArray(s),d=h?"array":typeof s,f=!h&&Array.isArray(i[a]);if("undefined"!==d&&"function"!==d){if(f){var p=i[a];if(0===p.length)continue;p=p.map(this._handleRelativeValue.bind(this,s)),i[a]=[s].concat(p)}if("object"!==d&&!h||!s||f)void 0===n[a]&&(n[a]=s),h||(n[a]*=1),o[a]=f?i[a].slice().reverse():n[a]||0;else{for(var y in n[a]=h?[]:{},s)n[a][y]=s[y];o[a]=h?[]:{},this._setupProperties(s,n[a],i[a],o[a])}}}},Tween.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},Tween.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},Tween.prototype.pause=function(r){return void 0===r&&(r=s()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=r,this._group&&this._group.remove(this)),this},Tween.prototype.resume=function(r){return void 0===r&&(r=s()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=r-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},Tween.prototype.stopChainedTweens=function(){for(var r=0,n=this._chainedTweens.length;r<n;r++)this._chainedTweens[r].stop();return this},Tween.prototype.group=function(r){return this._group=r,this},Tween.prototype.delay=function(r){return this._delayTime=r,this},Tween.prototype.repeat=function(r){return this._initialRepeat=r,this._repeat=r,this},Tween.prototype.repeatDelay=function(r){return this._repeatDelayTime=r,this},Tween.prototype.yoyo=function(r){return this._yoyo=r,this},Tween.prototype.easing=function(r){return this._easingFunction=r,this},Tween.prototype.interpolation=function(r){return this._interpolationFunction=r,this},Tween.prototype.chain=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return this._chainedTweens=r,this},Tween.prototype.onStart=function(r){return this._onStartCallback=r,this},Tween.prototype.onUpdate=function(r){return this._onUpdateCallback=r,this},Tween.prototype.onRepeat=function(r){return this._onRepeatCallback=r,this},Tween.prototype.onComplete=function(r){return this._onCompleteCallback=r,this},Tween.prototype.onStop=function(r){return this._onStopCallback=r,this},Tween.prototype.update=function(r,n){if(void 0===r&&(r=s()),void 0===n&&(n=!0),this._isPaused)return!0;var i,o,a=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(r>a)return!1;n&&this.start(r)}if(this._goToEnd=!1,r<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),o=(r-this._startTime)/this._duration,o=0===this._duration||o>1?1:o;var h=this._easingFunction(o);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,h),this._onUpdateCallback&&this._onUpdateCallback(this._object,o),1===o){if(this._repeat>0){for(i in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[i]||(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=r+this._repeatDelayTime:this._startTime=r+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var d=0,f=this._chainedTweens.length;d<f;d++)this._chainedTweens[d].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},Tween.prototype._updateProperties=function(r,n,i,o){for(var a in i)if(void 0!==n[a]){var s=n[a]||0,h=i[a],d=Array.isArray(r[a]),f=Array.isArray(h);!d&&f?r[a]=this._interpolationFunction(h,o):"object"==typeof h&&h?this._updateProperties(r[a],s,h,o):"number"==typeof(h=this._handleRelativeValue(s,h))&&(r[a]=s+(h-s)*o)}},Tween.prototype._handleRelativeValue=function(r,n){return"string"!=typeof n?n:"+"===n.charAt(0)||"-"===n.charAt(0)?r+parseFloat(n):parseFloat(n)},Tween.prototype._swapEndStartRepeatValues=function(r){var n=this._valuesStartRepeat[r],i=this._valuesEnd[r];this._valuesStartRepeat[r]="string"==typeof i?this._valuesStartRepeat[r]+parseFloat(i):this._valuesEnd[r],this._valuesEnd[r]=n},Tween}(),g="18.6.4",_=f.nextId,b=p,x=b.getAll.bind(b),T=b.removeAll.bind(b),S=b.add.bind(b),E=b.remove.bind(b),w=b.update.bind(b),P={Easing:a,Group:h,Interpolation:d,now:s,Sequence:f,nextId:_,Tween:y,VERSION:g,getAll:x,removeAll:T,add:S,remove:E,update:w};n.default=P}.call(this,i(12))},function(r,n,i){"use strict";r.exports=function parseURI(r,n){n=n||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},o=i.parser[n.strictMode?"strict":"loose"].exec(r),a={},s=14;s--;)a[i.key[s]]=o[s]||"";return a[i.q.name]={},a[i.key[12]].replace(i.q.parser,(function(r,n,o){n&&(a[i.q.name][n]=o)})),a}},function(r,n){var i,o,a=r.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(r){if(i===setTimeout)return setTimeout(r,0);if((i===defaultSetTimout||!i)&&setTimeout)return i=setTimeout,setTimeout(r,0);try{return i(r,0)}catch(n){try{return i.call(null,r,0)}catch(n){return i.call(this,r,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(r){i=defaultSetTimout}try{o="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(r){o=defaultClearTimeout}}();var s,h=[],d=!1,f=-1;function cleanUpNextTick(){d&&s&&(d=!1,s.length?h=s.concat(h):f=-1,h.length&&drainQueue())}function drainQueue(){if(!d){var r=runTimeout(cleanUpNextTick);d=!0;for(var n=h.length;n;){for(s=h,h=[];++f<n;)s&&s[f].run();f=-1,n=h.length}s=null,d=!1,function runClearTimeout(r){if(o===clearTimeout)return clearTimeout(r);if((o===defaultClearTimeout||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(r);try{return o(r)}catch(n){try{return o.call(null,r)}catch(n){return o.call(this,r)}}}(r)}}function Item(r,n){this.fun=r,this.array=n}function noop(){}a.nextTick=function(r){var n=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)n[i-1]=arguments[i];h.push(new Item(r,n)),1!==h.length||d||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=noop,a.addListener=noop,a.once=noop,a.off=noop,a.removeListener=noop,a.removeAllListeners=noop,a.emit=noop,a.prependListener=noop,a.prependOnceListener=noop,a.listeners=function(r){return[]},a.binding=function(r){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(r){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(r,n,i){"use strict";var o=Object.prototype.hasOwnProperty,a="~";function Events(){}function EE(r,n,i){this.fn=r,this.context=n,this.once=i||!1}function addListener(r,n,i,o,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var h=new EE(i,o||r,s),d=a?a+n:n;return r._events[d]?r._events[d].fn?r._events[d]=[r._events[d],h]:r._events[d].push(h):(r._events[d]=h,r._eventsCount++),r}function clearEvent(r,n){0==--r._eventsCount?r._events=new Events:delete r._events[n]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(a=!1)),EventEmitter.prototype.eventNames=function eventNames(){var r,n,i=[];if(0===this._eventsCount)return i;for(n in r=this._events)o.call(r,n)&&i.push(a?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(r)):i},EventEmitter.prototype.listeners=function listeners(r){var n=a?a+r:r,i=this._events[n];if(!i)return[];if(i.fn)return[i.fn];for(var o=0,s=i.length,h=new Array(s);o<s;o++)h[o]=i[o].fn;return h},EventEmitter.prototype.listenerCount=function listenerCount(r){var n=a?a+r:r,i=this._events[n];return i?i.fn?1:i.length:0},EventEmitter.prototype.emit=function emit(r,n,i,o,s,h){var d=a?a+r:r;if(!this._events[d])return!1;var f,p,y=this._events[d],g=arguments.length;if(y.fn){switch(y.once&&this.removeListener(r,y.fn,void 0,!0),g){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,n),!0;case 3:return y.fn.call(y.context,n,i),!0;case 4:return y.fn.call(y.context,n,i,o),!0;case 5:return y.fn.call(y.context,n,i,o,s),!0;case 6:return y.fn.call(y.context,n,i,o,s,h),!0}for(p=1,f=new Array(g-1);p<g;p++)f[p-1]=arguments[p];y.fn.apply(y.context,f)}else{var _,b=y.length;for(p=0;p<b;p++)switch(y[p].once&&this.removeListener(r,y[p].fn,void 0,!0),g){case 1:y[p].fn.call(y[p].context);break;case 2:y[p].fn.call(y[p].context,n);break;case 3:y[p].fn.call(y[p].context,n,i);break;case 4:y[p].fn.call(y[p].context,n,i,o);break;default:if(!f)for(_=1,f=new Array(g-1);_<g;_++)f[_-1]=arguments[_];y[p].fn.apply(y[p].context,f)}}return!0},EventEmitter.prototype.on=function on(r,n,i){return addListener(this,r,n,i,!1)},EventEmitter.prototype.once=function once(r,n,i){return addListener(this,r,n,i,!0)},EventEmitter.prototype.removeListener=function removeListener(r,n,i,o){var s=a?a+r:r;if(!this._events[s])return this;if(!n)return clearEvent(this,s),this;var h=this._events[s];if(h.fn)h.fn!==n||o&&!h.once||i&&h.context!==i||clearEvent(this,s);else{for(var d=0,f=[],p=h.length;d<p;d++)(h[d].fn!==n||o&&!h[d].once||i&&h[d].context!==i)&&f.push(h[d]);f.length?this._events[s]=1===f.length?f[0]:f:clearEvent(this,s)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(r){var n;return r?(n=a?a+r:r,this._events[n]&&clearEvent(this,n)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=a,EventEmitter.EventEmitter=EventEmitter,r.exports=EventEmitter},function(r,n,i){"use strict";function earcut(r,n,i){i=i||2;var o,a,s,h,d,f,p,y=n&&n.length,g=y?n[0]*i:r.length,_=linkedList(r,0,g,i,!0),b=[];if(!_||_.next===_.prev)return b;if(y&&(_=function eliminateHoles(r,n,i,o){var a,s,h,d=[];for(a=0,s=n.length;a<s;a++)(h=linkedList(r,n[a]*o,a<s-1?n[a+1]*o:r.length,o,!1))===h.next&&(h.steiner=!0),d.push(getLeftmost(h));for(d.sort(compareX),a=0;a<d.length;a++)eliminateHole(d[a],i),i=filterPoints(i,i.next);return i}(r,n,_,i)),r.length>80*i){o=s=r[0],a=h=r[1];for(var x=i;x<g;x+=i)(d=r[x])<o&&(o=d),(f=r[x+1])<a&&(a=f),d>s&&(s=d),f>h&&(h=f);p=0!==(p=Math.max(s-o,h-a))?1/p:0}return earcutLinked(_,b,i,o,a,p),b}function linkedList(r,n,i,o,a){var s,h;if(a===signedArea(r,n,i,o)>0)for(s=n;s<i;s+=o)h=insertNode(s,r[s],r[s+1],h);else for(s=i-o;s>=n;s-=o)h=insertNode(s,r[s],r[s+1],h);return h&&equals(h,h.next)&&(removeNode(h),h=h.next),h}function filterPoints(r,n){if(!r)return r;n||(n=r);var i,o=r;do{if(i=!1,o.steiner||!equals(o,o.next)&&0!==area(o.prev,o,o.next))o=o.next;else{if(removeNode(o),(o=n=o.prev)===o.next)break;i=!0}}while(i||o!==n);return n}function earcutLinked(r,n,i,o,a,s,h){if(r){!h&&s&&function indexCurve(r,n,i,o){var a=r;do{null===a.z&&(a.z=zOrder(a.x,a.y,n,i,o)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==r);a.prevZ.nextZ=null,a.prevZ=null,function sortLinked(r){var n,i,o,a,s,h,d,f,p=1;do{for(i=r,r=null,s=null,h=0;i;){for(h++,o=i,d=0,n=0;n<p&&(d++,o=o.nextZ);n++);for(f=p;d>0||f>0&&o;)0!==d&&(0===f||!o||i.z<=o.z)?(a=i,i=i.nextZ,d--):(a=o,o=o.nextZ,f--),s?s.nextZ=a:r=a,a.prevZ=s,s=a;i=o}s.nextZ=null,p*=2}while(h>1);return r}(a)}(r,o,a,s);for(var d,f,p=r;r.prev!==r.next;)if(d=r.prev,f=r.next,s?isEarHashed(r,o,a,s):isEar(r))n.push(d.i/i),n.push(r.i/i),n.push(f.i/i),removeNode(r),r=f.next,p=f.next;else if((r=f)===p){h?1===h?earcutLinked(r=cureLocalIntersections(filterPoints(r),n,i),n,i,o,a,s,2):2===h&&splitEarcut(r,n,i,o,a,s):earcutLinked(filterPoints(r),n,i,o,a,s,1);break}}}function isEar(r){var n=r.prev,i=r,o=r.next;if(area(n,i,o)>=0)return!1;for(var a=r.next.next;a!==r.prev;){if(pointInTriangle(n.x,n.y,i.x,i.y,o.x,o.y,a.x,a.y)&&area(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function isEarHashed(r,n,i,o){var a=r.prev,s=r,h=r.next;if(area(a,s,h)>=0)return!1;for(var d=a.x<s.x?a.x<h.x?a.x:h.x:s.x<h.x?s.x:h.x,f=a.y<s.y?a.y<h.y?a.y:h.y:s.y<h.y?s.y:h.y,p=a.x>s.x?a.x>h.x?a.x:h.x:s.x>h.x?s.x:h.x,y=a.y>s.y?a.y>h.y?a.y:h.y:s.y>h.y?s.y:h.y,g=zOrder(d,f,n,i,o),_=zOrder(p,y,n,i,o),b=r.prevZ,x=r.nextZ;b&&b.z>=g&&x&&x.z<=_;){if(b!==r.prev&&b!==r.next&&pointInTriangle(a.x,a.y,s.x,s.y,h.x,h.y,b.x,b.y)&&area(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,x!==r.prev&&x!==r.next&&pointInTriangle(a.x,a.y,s.x,s.y,h.x,h.y,x.x,x.y)&&area(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;b&&b.z>=g;){if(b!==r.prev&&b!==r.next&&pointInTriangle(a.x,a.y,s.x,s.y,h.x,h.y,b.x,b.y)&&area(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=_;){if(x!==r.prev&&x!==r.next&&pointInTriangle(a.x,a.y,s.x,s.y,h.x,h.y,x.x,x.y)&&area(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function cureLocalIntersections(r,n,i){var o=r;do{var a=o.prev,s=o.next.next;!equals(a,s)&&intersects(a,o,o.next,s)&&locallyInside(a,s)&&locallyInside(s,a)&&(n.push(a.i/i),n.push(o.i/i),n.push(s.i/i),removeNode(o),removeNode(o.next),o=r=s),o=o.next}while(o!==r);return filterPoints(o)}function splitEarcut(r,n,i,o,a,s){var h=r;do{for(var d=h.next.next;d!==h.prev;){if(h.i!==d.i&&isValidDiagonal(h,d)){var f=splitPolygon(h,d);return h=filterPoints(h,h.next),f=filterPoints(f,f.next),earcutLinked(h,n,i,o,a,s),void earcutLinked(f,n,i,o,a,s)}d=d.next}h=h.next}while(h!==r)}function compareX(r,n){return r.x-n.x}function eliminateHole(r,n){if(n=function findHoleBridge(r,n){var i,o=n,a=r.x,s=r.y,h=-1/0;do{if(s<=o.y&&s>=o.next.y&&o.next.y!==o.y){var d=o.x+(s-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(d<=a&&d>h){if(h=d,d===a){if(s===o.y)return o;if(s===o.next.y)return o.next}i=o.x<o.next.x?o:o.next}}o=o.next}while(o!==n);if(!i)return null;if(a===h)return i;var f,p=i,y=i.x,g=i.y,_=1/0;o=i;do{a>=o.x&&o.x>=y&&a!==o.x&&pointInTriangle(s<g?a:h,s,y,g,s<g?h:a,s,o.x,o.y)&&(f=Math.abs(s-o.y)/(a-o.x),locallyInside(o,r)&&(f<_||f===_&&(o.x>i.x||o.x===i.x&&sectorContainsSector(i,o)))&&(i=o,_=f)),o=o.next}while(o!==p);return i}(r,n)){var i=splitPolygon(n,r);filterPoints(n,n.next),filterPoints(i,i.next)}}function sectorContainsSector(r,n){return area(r.prev,r,n.prev)<0&&area(n.next,r,r.next)<0}function zOrder(r,n,i,o,a){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-i)*a)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-o)*a)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function getLeftmost(r){var n=r,i=r;do{(n.x<i.x||n.x===i.x&&n.y<i.y)&&(i=n),n=n.next}while(n!==r);return i}function pointInTriangle(r,n,i,o,a,s,h,d){return(a-h)*(n-d)-(r-h)*(s-d)>=0&&(r-h)*(o-d)-(i-h)*(n-d)>=0&&(i-h)*(s-d)-(a-h)*(o-d)>=0}function isValidDiagonal(r,n){return r.next.i!==n.i&&r.prev.i!==n.i&&!function intersectsPolygon(r,n){var i=r;do{if(i.i!==r.i&&i.next.i!==r.i&&i.i!==n.i&&i.next.i!==n.i&&intersects(i,i.next,r,n))return!0;i=i.next}while(i!==r);return!1}(r,n)&&(locallyInside(r,n)&&locallyInside(n,r)&&function middleInside(r,n){var i=r,o=!1,a=(r.x+n.x)/2,s=(r.y+n.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&a<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(o=!o),i=i.next}while(i!==r);return o}(r,n)&&(area(r.prev,r,n.prev)||area(r,n.prev,n))||equals(r,n)&&area(r.prev,r,r.next)>0&&area(n.prev,n,n.next)>0)}function area(r,n,i){return(n.y-r.y)*(i.x-n.x)-(n.x-r.x)*(i.y-n.y)}function equals(r,n){return r.x===n.x&&r.y===n.y}function intersects(r,n,i,o){var a=sign(area(r,n,i)),s=sign(area(r,n,o)),h=sign(area(i,o,r)),d=sign(area(i,o,n));return a!==s&&h!==d||(!(0!==a||!onSegment(r,i,n))||(!(0!==s||!onSegment(r,o,n))||(!(0!==h||!onSegment(i,r,o))||!(0!==d||!onSegment(i,n,o)))))}function onSegment(r,n,i){return n.x<=Math.max(r.x,i.x)&&n.x>=Math.min(r.x,i.x)&&n.y<=Math.max(r.y,i.y)&&n.y>=Math.min(r.y,i.y)}function sign(r){return r>0?1:r<0?-1:0}function locallyInside(r,n){return area(r.prev,r,r.next)<0?area(r,n,r.next)>=0&&area(r,r.prev,n)>=0:area(r,n,r.prev)<0||area(r,r.next,n)<0}function splitPolygon(r,n){var i=new Node(r.i,r.x,r.y),o=new Node(n.i,n.x,n.y),a=r.next,s=n.prev;return r.next=n,n.prev=r,i.next=a,a.prev=i,o.next=i,i.prev=o,s.next=o,o.prev=s,o}function insertNode(r,n,i,o){var a=new Node(r,n,i);return o?(a.next=o.next,a.prev=o,o.next.prev=a,o.next=a):(a.prev=a,a.next=a),a}function removeNode(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Node(r,n,i){this.i=r,this.x=n,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(r,n,i,o){for(var a=0,s=n,h=i-o;s<i;s+=o)a+=(r[h]-r[s])*(r[s+1]+r[h+1]),h=s;return a}r.exports=earcut,r.exports.default=earcut,earcut.deviation=function(r,n,i,o){var a=n&&n.length,s=a?n[0]*i:r.length,h=Math.abs(signedArea(r,0,s,i));if(a)for(var d=0,f=n.length;d<f;d++){var p=n[d]*i,y=d<f-1?n[d+1]*i:r.length;h-=Math.abs(signedArea(r,p,y,i))}var g=0;for(d=0;d<o.length;d+=3){var _=o[d]*i,b=o[d+1]*i,x=o[d+2]*i;g+=Math.abs((r[_]-r[x])*(r[b+1]-r[_+1])-(r[_]-r[b])*(r[x+1]-r[_+1]))}return 0===h&&0===g?0:Math.abs((g-h)/h)},earcut.flatten=function(r){for(var n=r[0][0].length,i={vertices:[],holes:[],dimensions:n},o=0,a=0;a<r.length;a++){for(var s=0;s<r[a].length;s++)for(var h=0;h<n;h++)i.vertices.push(r[a][s][h]);a>0&&(o+=r[a-1].length,i.holes.push(o))}return i}},function(r,n){r.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},,,,,,,,,function(r,n,i){(function(r,o){var a;(function(){var s="Expected a function",h="__lodash_placeholder__",d=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],f="[object Arguments]",p="[object Array]",y="[object Boolean]",g="[object Date]",_="[object Error]",b="[object Function]",x="[object GeneratorFunction]",T="[object Map]",S="[object Number]",E="[object Object]",w="[object RegExp]",P="[object Set]",O="[object String]",R="[object Symbol]",C="[object WeakMap]",M="[object ArrayBuffer]",D="[object DataView]",F="[object Float32Array]",N="[object Float64Array]",U="[object Int8Array]",j="[object Int16Array]",X="[object Int32Array]",H="[object Uint8Array]",W="[object Uint8ClampedArray]",V="[object Uint16Array]",Y="[object Uint32Array]",q=/\b__p \+= '';/g,Z=/\b(__p \+=) '' \+/g,$=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Q=/&(?:amp|lt|gt|quot|#39);/g,tt=/[&<>"']/g,et=RegExp(Q.source),rt=RegExp(tt.source),nt=/<%-([\s\S]+?)%>/g,it=/<%([\s\S]+?)%>/g,ot=/<%=([\s\S]+?)%>/g,at=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,st=/^\w*$/,ut=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ht=/[\\^$.*+?()[\]{}|]/g,ct=RegExp(ht.source),lt=/^\s+|\s+$/g,dt=/^\s+/,ft=/\s+$/,pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,yt=/\{\n\/\* \[wrapped with (.+)\] \*/,mt=/,? & /,gt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,vt=/\\(\\)?/g,_t=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,bt=/\w*$/,xt=/^[-+]0x[0-9a-f]+$/i,Tt=/^0b[01]+$/i,St=/^\[object .+?Constructor\]$/,Et=/^0o[0-7]+$/i,It=/^(?:0|[1-9]\d*)$/,wt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Pt=/($^)/,At=/['\n\r\u2028\u2029\\]/g,Ot="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Rt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ct="[\\ud800-\\udfff]",Mt="["+Rt+"]",Lt="["+Ot+"]",Dt="\\d+",Ft="[\\u2700-\\u27bf]",Bt="[a-z\\xdf-\\xf6\\xf8-\\xff]",Nt="[^\\ud800-\\udfff"+Rt+Dt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",kt="\\ud83c[\\udffb-\\udfff]",Ut="[^\\ud800-\\udfff]",jt="(?:\\ud83c[\\udde6-\\uddff]){2}",Gt="[\\ud800-\\udbff][\\udc00-\\udfff]",Xt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",zt="(?:"+Bt+"|"+Nt+")",Ht="(?:"+Xt+"|"+Nt+")",Wt="(?:"+Lt+"|"+kt+")"+"?",Vt="[\\ufe0e\\ufe0f]?"+Wt+("(?:\\u200d(?:"+[Ut,jt,Gt].join("|")+")[\\ufe0e\\ufe0f]?"+Wt+")*"),Yt="(?:"+[Ft,jt,Gt].join("|")+")"+Vt,qt="(?:"+[Ut+Lt+"?",Lt,jt,Gt,Ct].join("|")+")",Kt=RegExp("['’]","g"),Zt=RegExp(Lt,"g"),$t=RegExp(kt+"(?="+kt+")|"+qt+Vt,"g"),Qt=RegExp([Xt+"?"+Bt+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Mt,Xt,"$"].join("|")+")",Ht+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Mt,Xt+zt,"$"].join("|")+")",Xt+"?"+zt+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Xt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dt,Yt].join("|"),"g"),Jt=RegExp("[\\u200d\\ud800-\\udfff"+Ot+"\\ufe0e\\ufe0f]"),te=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ee=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],re=-1,ne={};ne[F]=ne[N]=ne[U]=ne[j]=ne[X]=ne[H]=ne["[object Uint8ClampedArray]"]=ne[V]=ne[Y]=!0,ne[f]=ne[p]=ne[M]=ne[y]=ne[D]=ne[g]=ne[_]=ne[b]=ne[T]=ne[S]=ne[E]=ne[w]=ne[P]=ne[O]=ne[C]=!1;var ie={};ie[f]=ie[p]=ie[M]=ie[D]=ie[y]=ie[g]=ie[F]=ie[N]=ie[U]=ie[j]=ie[X]=ie[T]=ie[S]=ie[E]=ie[w]=ie[P]=ie[O]=ie[R]=ie[H]=ie["[object Uint8ClampedArray]"]=ie[V]=ie[Y]=!0,ie[_]=ie[b]=ie[C]=!1;var oe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ae=parseFloat,se=parseInt,ue="object"==typeof r&&r&&r.Object===Object&&r,he="object"==typeof self&&self&&self.Object===Object&&self,ce=ue||he||Function("return this")(),le=n&&!n.nodeType&&n,de=le&&"object"==typeof o&&o&&!o.nodeType&&o,fe=de&&de.exports===le,pe=fe&&ue.process,ye=function(){try{var r=de&&de.require&&de.require("util").types;return r||pe&&pe.binding&&pe.binding("util")}catch(r){}}(),me=ye&&ye.isArrayBuffer,ge=ye&&ye.isDate,ve=ye&&ye.isMap,_e=ye&&ye.isRegExp,be=ye&&ye.isSet,xe=ye&&ye.isTypedArray;function apply(r,n,i){switch(i.length){case 0:return r.call(n);case 1:return r.call(n,i[0]);case 2:return r.call(n,i[0],i[1]);case 3:return r.call(n,i[0],i[1],i[2])}return r.apply(n,i)}function arrayAggregator(r,n,i,o){for(var a=-1,s=null==r?0:r.length;++a<s;){var h=r[a];n(o,h,i(h),r)}return o}function arrayEach(r,n){for(var i=-1,o=null==r?0:r.length;++i<o&&!1!==n(r[i],i,r););return r}function arrayEachRight(r,n){for(var i=null==r?0:r.length;i--&&!1!==n(r[i],i,r););return r}function arrayEvery(r,n){for(var i=-1,o=null==r?0:r.length;++i<o;)if(!n(r[i],i,r))return!1;return!0}function arrayFilter(r,n){for(var i=-1,o=null==r?0:r.length,a=0,s=[];++i<o;){var h=r[i];n(h,i,r)&&(s[a++]=h)}return s}function arrayIncludes(r,n){return!!(null==r?0:r.length)&&baseIndexOf(r,n,0)>-1}function arrayIncludesWith(r,n,i){for(var o=-1,a=null==r?0:r.length;++o<a;)if(i(n,r[o]))return!0;return!1}function arrayMap(r,n){for(var i=-1,o=null==r?0:r.length,a=Array(o);++i<o;)a[i]=n(r[i],i,r);return a}function arrayPush(r,n){for(var i=-1,o=n.length,a=r.length;++i<o;)r[a+i]=n[i];return r}function arrayReduce(r,n,i,o){var a=-1,s=null==r?0:r.length;for(o&&s&&(i=r[++a]);++a<s;)i=n(i,r[a],a,r);return i}function arrayReduceRight(r,n,i,o){var a=null==r?0:r.length;for(o&&a&&(i=r[--a]);a--;)i=n(i,r[a],a,r);return i}function arraySome(r,n){for(var i=-1,o=null==r?0:r.length;++i<o;)if(n(r[i],i,r))return!0;return!1}var Te=baseProperty("length");function baseFindKey(r,n,i){var o;return i(r,(function(r,i,a){if(n(r,i,a))return o=i,!1})),o}function baseFindIndex(r,n,i,o){for(var a=r.length,s=i+(o?1:-1);o?s--:++s<a;)if(n(r[s],s,r))return s;return-1}function baseIndexOf(r,n,i){return n==n?function strictIndexOf(r,n,i){var o=i-1,a=r.length;for(;++o<a;)if(r[o]===n)return o;return-1}(r,n,i):baseFindIndex(r,baseIsNaN,i)}function baseIndexOfWith(r,n,i,o){for(var a=i-1,s=r.length;++a<s;)if(o(r[a],n))return a;return-1}function baseIsNaN(r){return r!=r}function baseMean(r,n){var i=null==r?0:r.length;return i?baseSum(r,n)/i:NaN}function baseProperty(r){return function(n){return null==n?undefined:n[r]}}function basePropertyOf(r){return function(n){return null==r?undefined:r[n]}}function baseReduce(r,n,i,o,a){return a(r,(function(r,a,s){i=o?(o=!1,r):n(i,r,a,s)})),i}function baseSum(r,n){for(var i,o=-1,a=r.length;++o<a;){var s=n(r[o]);undefined!==s&&(i=undefined===i?s:i+s)}return i}function baseTimes(r,n){for(var i=-1,o=Array(r);++i<r;)o[i]=n(i);return o}function baseUnary(r){return function(n){return r(n)}}function baseValues(r,n){return arrayMap(n,(function(n){return r[n]}))}function cacheHas(r,n){return r.has(n)}function charsStartIndex(r,n){for(var i=-1,o=r.length;++i<o&&baseIndexOf(n,r[i],0)>-1;);return i}function charsEndIndex(r,n){for(var i=r.length;i--&&baseIndexOf(n,r[i],0)>-1;);return i}function countHolders(r,n){for(var i=r.length,o=0;i--;)r[i]===n&&++o;return o}var Se=basePropertyOf({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Ee=basePropertyOf({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function escapeStringChar(r){return"\\"+oe[r]}function hasUnicode(r){return Jt.test(r)}function mapToArray(r){var n=-1,i=Array(r.size);return r.forEach((function(r,o){i[++n]=[o,r]})),i}function overArg(r,n){return function(i){return r(n(i))}}function replaceHolders(r,n){for(var i=-1,o=r.length,a=0,s=[];++i<o;){var d=r[i];d!==n&&d!==h||(r[i]=h,s[a++]=i)}return s}function setToArray(r){var n=-1,i=Array(r.size);return r.forEach((function(r){i[++n]=r})),i}function setToPairs(r){var n=-1,i=Array(r.size);return r.forEach((function(r){i[++n]=[r,r]})),i}function stringSize(r){return hasUnicode(r)?function unicodeSize(r){var n=$t.lastIndex=0;for(;$t.test(r);)++n;return n}(r):Te(r)}function stringToArray(r){return hasUnicode(r)?function unicodeToArray(r){return r.match($t)||[]}(r):function asciiToArray(r){return r.split("")}(r)}var Ie=basePropertyOf({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var we=function runInContext(r){var n,i=(r=null==r?ce:we.defaults(ce.Object(),r,we.pick(ce,ee))).Array,o=r.Date,a=r.Error,Ot=r.Function,Rt=r.Math,Ct=r.Object,Mt=r.RegExp,Lt=r.String,Dt=r.TypeError,Ft=i.prototype,Bt=Ot.prototype,Nt=Ct.prototype,kt=r["__core-js_shared__"],Ut=Bt.toString,jt=Nt.hasOwnProperty,Gt=0,Xt=(n=/[^.]+$/.exec(kt&&kt.keys&&kt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",zt=Nt.toString,Ht=Ut.call(Ct),Wt=ce._,Vt=Mt("^"+Ut.call(jt).replace(ht,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yt=fe?r.Buffer:undefined,qt=r.Symbol,$t=r.Uint8Array,Jt=Yt?Yt.allocUnsafe:undefined,oe=overArg(Ct.getPrototypeOf,Ct),ue=Ct.create,he=Nt.propertyIsEnumerable,le=Ft.splice,de=qt?qt.isConcatSpreadable:undefined,pe=qt?qt.iterator:undefined,ye=qt?qt.toStringTag:undefined,Te=function(){try{var r=getNative(Ct,"defineProperty");return r({},"",{}),r}catch(r){}}(),Pe=r.clearTimeout!==ce.clearTimeout&&r.clearTimeout,Ae=o&&o.now!==ce.Date.now&&o.now,Oe=r.setTimeout!==ce.setTimeout&&r.setTimeout,Re=Rt.ceil,Ce=Rt.floor,Me=Ct.getOwnPropertySymbols,Le=Yt?Yt.isBuffer:undefined,De=r.isFinite,Fe=Ft.join,Be=overArg(Ct.keys,Ct),Ne=Rt.max,ke=Rt.min,Ue=o.now,je=r.parseInt,Ge=Rt.random,Xe=Ft.reverse,ze=getNative(r,"DataView"),He=getNative(r,"Map"),We=getNative(r,"Promise"),Ve=getNative(r,"Set"),Ye=getNative(r,"WeakMap"),qe=getNative(Ct,"create"),Ke=Ye&&new Ye,Ze={},$e=toSource(ze),Qe=toSource(He),Je=toSource(We),tr=toSource(Ve),er=toSource(Ye),rr=qt?qt.prototype:undefined,nr=rr?rr.valueOf:undefined,ir=rr?rr.toString:undefined;function lodash(r){if(isObjectLike(r)&&!cn(r)&&!(r instanceof LazyWrapper)){if(r instanceof LodashWrapper)return r;if(jt.call(r,"__wrapped__"))return wrapperClone(r)}return new LodashWrapper(r)}var or=function(){function object(){}return function(r){if(!isObject(r))return{};if(ue)return ue(r);object.prototype=r;var n=new object;return object.prototype=undefined,n}}();function baseLodash(){}function LodashWrapper(r,n){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=undefined}function LazyWrapper(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Hash(r){var n=-1,i=null==r?0:r.length;for(this.clear();++n<i;){var o=r[n];this.set(o[0],o[1])}}function ListCache(r){var n=-1,i=null==r?0:r.length;for(this.clear();++n<i;){var o=r[n];this.set(o[0],o[1])}}function MapCache(r){var n=-1,i=null==r?0:r.length;for(this.clear();++n<i;){var o=r[n];this.set(o[0],o[1])}}function SetCache(r){var n=-1,i=null==r?0:r.length;for(this.__data__=new MapCache;++n<i;)this.add(r[n])}function Stack(r){var n=this.__data__=new ListCache(r);this.size=n.size}function arrayLikeKeys(r,n){var i=cn(r),o=!i&&hn(r),a=!i&&!o&&dn(r),s=!i&&!o&&!a&&gn(r),h=i||o||a||s,d=h?baseTimes(r.length,Lt):[],f=d.length;for(var p in r)!n&&!jt.call(r,p)||h&&("length"==p||a&&("offset"==p||"parent"==p)||s&&("buffer"==p||"byteLength"==p||"byteOffset"==p)||isIndex(p,f))||d.push(p);return d}function arraySample(r){var n=r.length;return n?r[baseRandom(0,n-1)]:undefined}function arraySampleSize(r,n){return shuffleSelf(copyArray(r),baseClamp(n,0,r.length))}function arrayShuffle(r){return shuffleSelf(copyArray(r))}function assignMergeValue(r,n,i){(undefined!==i&&!eq(r[n],i)||undefined===i&&!(n in r))&&baseAssignValue(r,n,i)}function assignValue(r,n,i){var o=r[n];jt.call(r,n)&&eq(o,i)&&(undefined!==i||n in r)||baseAssignValue(r,n,i)}function assocIndexOf(r,n){for(var i=r.length;i--;)if(eq(r[i][0],n))return i;return-1}function baseAggregator(r,n,i,o){return ar(r,(function(r,a,s){n(o,r,i(r),s)})),o}function baseAssign(r,n){return r&&copyObject(n,keys(n),r)}function baseAssignValue(r,n,i){"__proto__"==n&&Te?Te(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}function baseAt(r,n){for(var o=-1,a=n.length,s=i(a),h=null==r;++o<a;)s[o]=h?undefined:get(r,n[o]);return s}function baseClamp(r,n,i){return r==r&&(undefined!==i&&(r=r<=i?r:i),undefined!==n&&(r=r>=n?r:n)),r}function baseClone(r,n,i,o,a,s){var h,d=1&n,p=2&n,_=4&n;if(i&&(h=a?i(r,o,a,s):i(r)),undefined!==h)return h;if(!isObject(r))return r;var C=cn(r);if(C){if(h=function initCloneArray(r){var n=r.length,i=new r.constructor(n);n&&"string"==typeof r[0]&&jt.call(r,"index")&&(i.index=r.index,i.input=r.input);return i}(r),!d)return copyArray(r,h)}else{var q=vr(r),Z=q==b||q==x;if(dn(r))return cloneBuffer(r,d);if(q==E||q==f||Z&&!a){if(h=p||Z?{}:initCloneObject(r),!d)return p?function copySymbolsIn(r,n){return copyObject(r,gr(r),n)}(r,function baseAssignIn(r,n){return r&&copyObject(n,keysIn(n),r)}(h,r)):function copySymbols(r,n){return copyObject(r,mr(r),n)}(r,baseAssign(h,r))}else{if(!ie[q])return a?r:{};h=function initCloneByTag(r,n,i){var o=r.constructor;switch(n){case M:return cloneArrayBuffer(r);case y:case g:return new o(+r);case D:return function cloneDataView(r,n){var i=n?cloneArrayBuffer(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}(r,i);case F:case N:case U:case j:case X:case H:case W:case V:case Y:return cloneTypedArray(r,i);case T:return new o;case S:case O:return new o(r);case w:return function cloneRegExp(r){var n=new r.constructor(r.source,bt.exec(r));return n.lastIndex=r.lastIndex,n}(r);case P:return new o;case R:return function cloneSymbol(r){return nr?Ct(nr.call(r)):{}}(r)}}(r,q,d)}}s||(s=new Stack);var $=s.get(r);if($)return $;s.set(r,h),mn(r)?r.forEach((function(o){h.add(baseClone(o,n,i,o,r,s))})):pn(r)&&r.forEach((function(o,a){h.set(a,baseClone(o,n,i,a,r,s))}));var Q=C?undefined:(_?p?getAllKeysIn:getAllKeys:p?keysIn:keys)(r);return arrayEach(Q||r,(function(o,a){Q&&(o=r[a=o]),assignValue(h,a,baseClone(o,n,i,a,r,s))})),h}function baseConformsTo(r,n,i){var o=i.length;if(null==r)return!o;for(r=Ct(r);o--;){var a=i[o],s=n[a],h=r[a];if(undefined===h&&!(a in r)||!s(h))return!1}return!0}function baseDelay(r,n,i){if("function"!=typeof r)throw new Dt(s);return xr((function(){r.apply(undefined,i)}),n)}function baseDifference(r,n,i,o){var a=-1,s=arrayIncludes,h=!0,d=r.length,f=[],p=n.length;if(!d)return f;i&&(n=arrayMap(n,baseUnary(i))),o?(s=arrayIncludesWith,h=!1):n.length>=200&&(s=cacheHas,h=!1,n=new SetCache(n));t:for(;++a<d;){var y=r[a],g=null==i?y:i(y);if(y=o||0!==y?y:0,h&&g==g){for(var _=p;_--;)if(n[_]===g)continue t;f.push(y)}else s(n,g,o)||f.push(y)}return f}lodash.templateSettings={escape:nt,evaluate:it,interpolate:ot,variable:"",imports:{_:lodash}},lodash.prototype=baseLodash.prototype,lodash.prototype.constructor=lodash,LodashWrapper.prototype=or(baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper,LazyWrapper.prototype=or(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper,Hash.prototype.clear=function hashClear(){this.__data__=qe?qe(null):{},this.size=0},Hash.prototype.delete=function hashDelete(r){var n=this.has(r)&&delete this.__data__[r];return this.size-=n?1:0,n},Hash.prototype.get=function hashGet(r){var n=this.__data__;if(qe){var i=n[r];return"__lodash_hash_undefined__"===i?undefined:i}return jt.call(n,r)?n[r]:undefined},Hash.prototype.has=function hashHas(r){var n=this.__data__;return qe?undefined!==n[r]:jt.call(n,r)},Hash.prototype.set=function hashSet(r,n){var i=this.__data__;return this.size+=this.has(r)?0:1,i[r]=qe&&undefined===n?"__lodash_hash_undefined__":n,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[],this.size=0},ListCache.prototype.delete=function listCacheDelete(r){var n=this.__data__,i=assocIndexOf(n,r);return!(i<0)&&(i==n.length-1?n.pop():le.call(n,i,1),--this.size,!0)},ListCache.prototype.get=function listCacheGet(r){var n=this.__data__,i=assocIndexOf(n,r);return i<0?undefined:n[i][1]},ListCache.prototype.has=function listCacheHas(r){return assocIndexOf(this.__data__,r)>-1},ListCache.prototype.set=function listCacheSet(r,n){var i=this.__data__,o=assocIndexOf(i,r);return o<0?(++this.size,i.push([r,n])):i[o][1]=n,this},MapCache.prototype.clear=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(He||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(r){var n=getMapData(this,r).delete(r);return this.size-=n?1:0,n},MapCache.prototype.get=function mapCacheGet(r){return getMapData(this,r).get(r)},MapCache.prototype.has=function mapCacheHas(r){return getMapData(this,r).has(r)},MapCache.prototype.set=function mapCacheSet(r,n){var i=getMapData(this,r),o=i.size;return i.set(r,n),this.size+=i.size==o?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function setCacheAdd(r){return this.__data__.set(r,"__lodash_hash_undefined__"),this},SetCache.prototype.has=function setCacheHas(r){return this.__data__.has(r)},Stack.prototype.clear=function stackClear(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function stackDelete(r){var n=this.__data__,i=n.delete(r);return this.size=n.size,i},Stack.prototype.get=function stackGet(r){return this.__data__.get(r)},Stack.prototype.has=function stackHas(r){return this.__data__.has(r)},Stack.prototype.set=function stackSet(r,n){var i=this.__data__;if(i instanceof ListCache){var o=i.__data__;if(!He||o.length<199)return o.push([r,n]),this.size=++i.size,this;i=this.__data__=new MapCache(o)}return i.set(r,n),this.size=i.size,this};var ar=createBaseEach(baseForOwn),sr=createBaseEach(baseForOwnRight,!0);function baseEvery(r,n){var i=!0;return ar(r,(function(r,o,a){return i=!!n(r,o,a)})),i}function baseExtremum(r,n,i){for(var o=-1,a=r.length;++o<a;){var s=r[o],h=n(s);if(null!=h&&(undefined===d?h==h&&!isSymbol(h):i(h,d)))var d=h,f=s}return f}function baseFilter(r,n){var i=[];return ar(r,(function(r,o,a){n(r,o,a)&&i.push(r)})),i}function baseFlatten(r,n,i,o,a){var s=-1,h=r.length;for(i||(i=isFlattenable),a||(a=[]);++s<h;){var d=r[s];n>0&&i(d)?n>1?baseFlatten(d,n-1,i,o,a):arrayPush(a,d):o||(a[a.length]=d)}return a}var ur=createBaseFor(),hr=createBaseFor(!0);function baseForOwn(r,n){return r&&ur(r,n,keys)}function baseForOwnRight(r,n){return r&&hr(r,n,keys)}function baseFunctions(r,n){return arrayFilter(n,(function(n){return isFunction(r[n])}))}function baseGet(r,n){for(var i=0,o=(n=castPath(n,r)).length;null!=r&&i<o;)r=r[toKey(n[i++])];return i&&i==o?r:undefined}function baseGetAllKeys(r,n,i){var o=n(r);return cn(r)?o:arrayPush(o,i(r))}function baseGetTag(r){return null==r?undefined===r?"[object Undefined]":"[object Null]":ye&&ye in Ct(r)?function getRawTag(r){var n=jt.call(r,ye),i=r[ye];try{r[ye]=undefined;var o=!0}catch(r){}var a=zt.call(r);o&&(n?r[ye]=i:delete r[ye]);return a}(r):function objectToString(r){return zt.call(r)}(r)}function baseGt(r,n){return r>n}function baseHas(r,n){return null!=r&&jt.call(r,n)}function baseHasIn(r,n){return null!=r&&n in Ct(r)}function baseIntersection(r,n,o){for(var a=o?arrayIncludesWith:arrayIncludes,s=r[0].length,h=r.length,d=h,f=i(h),p=1/0,y=[];d--;){var g=r[d];d&&n&&(g=arrayMap(g,baseUnary(n))),p=ke(g.length,p),f[d]=!o&&(n||s>=120&&g.length>=120)?new SetCache(d&&g):undefined}g=r[0];var _=-1,b=f[0];t:for(;++_<s&&y.length<p;){var x=g[_],T=n?n(x):x;if(x=o||0!==x?x:0,!(b?cacheHas(b,T):a(y,T,o))){for(d=h;--d;){var S=f[d];if(!(S?cacheHas(S,T):a(r[d],T,o)))continue t}b&&b.push(T),y.push(x)}}return y}function baseInvoke(r,n,i){var o=null==(r=parent(r,n=castPath(n,r)))?r:r[toKey(last(n))];return null==o?undefined:apply(o,r,i)}function baseIsArguments(r){return isObjectLike(r)&&baseGetTag(r)==f}function baseIsEqual(r,n,i,o,a){return r===n||(null==r||null==n||!isObjectLike(r)&&!isObjectLike(n)?r!=r&&n!=n:function baseIsEqualDeep(r,n,i,o,a,s){var h=cn(r),d=cn(n),b=h?p:vr(r),x=d?p:vr(n),C=(b=b==f?E:b)==E,F=(x=x==f?E:x)==E,N=b==x;if(N&&dn(r)){if(!dn(n))return!1;h=!0,C=!1}if(N&&!C)return s||(s=new Stack),h||gn(r)?equalArrays(r,n,i,o,a,s):function equalByTag(r,n,i,o,a,s,h){switch(i){case D:if(r.byteLength!=n.byteLength||r.byteOffset!=n.byteOffset)return!1;r=r.buffer,n=n.buffer;case M:return!(r.byteLength!=n.byteLength||!s(new $t(r),new $t(n)));case y:case g:case S:return eq(+r,+n);case _:return r.name==n.name&&r.message==n.message;case w:case O:return r==n+"";case T:var d=mapToArray;case P:var f=1&o;if(d||(d=setToArray),r.size!=n.size&&!f)return!1;var p=h.get(r);if(p)return p==n;o|=2,h.set(r,n);var b=equalArrays(d(r),d(n),o,a,s,h);return h.delete(r),b;case R:if(nr)return nr.call(r)==nr.call(n)}return!1}(r,n,b,i,o,a,s);if(!(1&i)){var U=C&&jt.call(r,"__wrapped__"),j=F&&jt.call(n,"__wrapped__");if(U||j){var X=U?r.value():r,H=j?n.value():n;return s||(s=new Stack),a(X,H,i,o,s)}}if(!N)return!1;return s||(s=new Stack),function equalObjects(r,n,i,o,a,s){var h=1&i,d=getAllKeys(r),f=d.length,p=getAllKeys(n).length;if(f!=p&&!h)return!1;var y=f;for(;y--;){var g=d[y];if(!(h?g in n:jt.call(n,g)))return!1}var _=s.get(r),b=s.get(n);if(_&&b)return _==n&&b==r;var x=!0;s.set(r,n),s.set(n,r);var T=h;for(;++y<f;){var S=r[g=d[y]],E=n[g];if(o)var w=h?o(E,S,g,n,r,s):o(S,E,g,r,n,s);if(!(undefined===w?S===E||a(S,E,i,o,s):w)){x=!1;break}T||(T="constructor"==g)}if(x&&!T){var P=r.constructor,O=n.constructor;P==O||!("constructor"in r)||!("constructor"in n)||"function"==typeof P&&P instanceof P&&"function"==typeof O&&O instanceof O||(x=!1)}return s.delete(r),s.delete(n),x}(r,n,i,o,a,s)}(r,n,i,o,baseIsEqual,a))}function baseIsMatch(r,n,i,o){var a=i.length,s=a,h=!o;if(null==r)return!s;for(r=Ct(r);a--;){var d=i[a];if(h&&d[2]?d[1]!==r[d[0]]:!(d[0]in r))return!1}for(;++a<s;){var f=(d=i[a])[0],p=r[f],y=d[1];if(h&&d[2]){if(undefined===p&&!(f in r))return!1}else{var g=new Stack;if(o)var _=o(p,y,f,r,n,g);if(!(undefined===_?baseIsEqual(y,p,3,o,g):_))return!1}}return!0}function baseIsNative(r){return!(!isObject(r)||function isMasked(r){return!!Xt&&Xt in r}(r))&&(isFunction(r)?Vt:St).test(toSource(r))}function baseIteratee(r){return"function"==typeof r?r:null==r?identity:"object"==typeof r?cn(r)?baseMatchesProperty(r[0],r[1]):baseMatches(r):property(r)}function baseKeys(r){if(!isPrototype(r))return Be(r);var n=[];for(var i in Ct(r))jt.call(r,i)&&"constructor"!=i&&n.push(i);return n}function baseKeysIn(r){if(!isObject(r))return function nativeKeysIn(r){var n=[];if(null!=r)for(var i in Ct(r))n.push(i);return n}(r);var n=isPrototype(r),i=[];for(var o in r)("constructor"!=o||!n&&jt.call(r,o))&&i.push(o);return i}function baseLt(r,n){return r<n}function baseMap(r,n){var o=-1,a=isArrayLike(r)?i(r.length):[];return ar(r,(function(r,i,s){a[++o]=n(r,i,s)})),a}function baseMatches(r){var n=getMatchData(r);return 1==n.length&&n[0][2]?matchesStrictComparable(n[0][0],n[0][1]):function(i){return i===r||baseIsMatch(i,r,n)}}function baseMatchesProperty(r,n){return isKey(r)&&isStrictComparable(n)?matchesStrictComparable(toKey(r),n):function(i){var o=get(i,r);return undefined===o&&o===n?hasIn(i,r):baseIsEqual(n,o,3)}}function baseMerge(r,n,i,o,a){r!==n&&ur(n,(function(s,h){if(a||(a=new Stack),isObject(s))!function baseMergeDeep(r,n,i,o,a,s,h){var d=safeGet(r,i),f=safeGet(n,i),p=h.get(f);if(p)return void assignMergeValue(r,i,p);var y=s?s(d,f,i+"",r,n,h):undefined,g=undefined===y;if(g){var _=cn(f),b=!_&&dn(f),x=!_&&!b&&gn(f);y=f,_||b||x?cn(d)?y=d:isArrayLikeObject(d)?y=copyArray(d):b?(g=!1,y=cloneBuffer(f,!0)):x?(g=!1,y=cloneTypedArray(f,!0)):y=[]:isPlainObject(f)||hn(f)?(y=d,hn(d)?y=toPlainObject(d):isObject(d)&&!isFunction(d)||(y=initCloneObject(f))):g=!1}g&&(h.set(f,y),a(y,f,o,s,h),h.delete(f));assignMergeValue(r,i,y)}(r,n,h,i,baseMerge,o,a);else{var d=o?o(safeGet(r,h),s,h+"",r,n,a):undefined;undefined===d&&(d=s),assignMergeValue(r,h,d)}}),keysIn)}function baseNth(r,n){var i=r.length;if(i)return isIndex(n+=n<0?i:0,i)?r[n]:undefined}function baseOrderBy(r,n,i){n=n.length?arrayMap(n,(function(r){return cn(r)?function(n){return baseGet(n,1===r.length?r[0]:r)}:r})):[identity];var o=-1;return n=arrayMap(n,baseUnary(getIteratee())),function baseSortBy(r,n){var i=r.length;for(r.sort(n);i--;)r[i]=r[i].value;return r}(baseMap(r,(function(r,i,a){return{criteria:arrayMap(n,(function(n){return n(r)})),index:++o,value:r}})),(function(r,n){return function compareMultiple(r,n,i){var o=-1,a=r.criteria,s=n.criteria,h=a.length,d=i.length;for(;++o<h;){var f=compareAscending(a[o],s[o]);if(f)return o>=d?f:f*("desc"==i[o]?-1:1)}return r.index-n.index}(r,n,i)}))}function basePickBy(r,n,i){for(var o=-1,a=n.length,s={};++o<a;){var h=n[o],d=baseGet(r,h);i(d,h)&&baseSet(s,castPath(h,r),d)}return s}function basePullAll(r,n,i,o){var a=o?baseIndexOfWith:baseIndexOf,s=-1,h=n.length,d=r;for(r===n&&(n=copyArray(n)),i&&(d=arrayMap(r,baseUnary(i)));++s<h;)for(var f=0,p=n[s],y=i?i(p):p;(f=a(d,y,f,o))>-1;)d!==r&&le.call(d,f,1),le.call(r,f,1);return r}function basePullAt(r,n){for(var i=r?n.length:0,o=i-1;i--;){var a=n[i];if(i==o||a!==s){var s=a;isIndex(a)?le.call(r,a,1):baseUnset(r,a)}}return r}function baseRandom(r,n){return r+Ce(Ge()*(n-r+1))}function baseRepeat(r,n){var i="";if(!r||n<1||n>9007199254740991)return i;do{n%2&&(i+=r),(n=Ce(n/2))&&(r+=r)}while(n);return i}function baseRest(r,n){return Tr(overRest(r,n,identity),r+"")}function baseSample(r){return arraySample(values(r))}function baseSampleSize(r,n){var i=values(r);return shuffleSelf(i,baseClamp(n,0,i.length))}function baseSet(r,n,i,o){if(!isObject(r))return r;for(var a=-1,s=(n=castPath(n,r)).length,h=s-1,d=r;null!=d&&++a<s;){var f=toKey(n[a]),p=i;if("__proto__"===f||"constructor"===f||"prototype"===f)return r;if(a!=h){var y=d[f];undefined===(p=o?o(y,f,d):undefined)&&(p=isObject(y)?y:isIndex(n[a+1])?[]:{})}assignValue(d,f,p),d=d[f]}return r}var cr=Ke?function(r,n){return Ke.set(r,n),r}:identity,lr=Te?function(r,n){return Te(r,"toString",{configurable:!0,enumerable:!1,value:constant(n),writable:!0})}:identity;function baseShuffle(r){return shuffleSelf(values(r))}function baseSlice(r,n,o){var a=-1,s=r.length;n<0&&(n=-n>s?0:s+n),(o=o>s?s:o)<0&&(o+=s),s=n>o?0:o-n>>>0,n>>>=0;for(var h=i(s);++a<s;)h[a]=r[a+n];return h}function baseSome(r,n){var i;return ar(r,(function(r,o,a){return!(i=n(r,o,a))})),!!i}function baseSortedIndex(r,n,i){var o=0,a=null==r?o:r.length;if("number"==typeof n&&n==n&&a<=2147483647){for(;o<a;){var s=o+a>>>1,h=r[s];null!==h&&!isSymbol(h)&&(i?h<=n:h<n)?o=s+1:a=s}return a}return baseSortedIndexBy(r,n,identity,i)}function baseSortedIndexBy(r,n,i,o){var a=0,s=null==r?0:r.length;if(0===s)return 0;for(var h=(n=i(n))!=n,d=null===n,f=isSymbol(n),p=undefined===n;a<s;){var y=Ce((a+s)/2),g=i(r[y]),_=undefined!==g,b=null===g,x=g==g,T=isSymbol(g);if(h)var S=o||x;else S=p?x&&(o||_):d?x&&_&&(o||!b):f?x&&_&&!b&&(o||!T):!b&&!T&&(o?g<=n:g<n);S?a=y+1:s=y}return ke(s,4294967294)}function baseSortedUniq(r,n){for(var i=-1,o=r.length,a=0,s=[];++i<o;){var h=r[i],d=n?n(h):h;if(!i||!eq(d,f)){var f=d;s[a++]=0===h?0:h}}return s}function baseToNumber(r){return"number"==typeof r?r:isSymbol(r)?NaN:+r}function baseToString(r){if("string"==typeof r)return r;if(cn(r))return arrayMap(r,baseToString)+"";if(isSymbol(r))return ir?ir.call(r):"";var n=r+"";return"0"==n&&1/r==-Infinity?"-0":n}function baseUniq(r,n,i){var o=-1,a=arrayIncludes,s=r.length,h=!0,d=[],f=d;if(i)h=!1,a=arrayIncludesWith;else if(s>=200){var p=n?null:pr(r);if(p)return setToArray(p);h=!1,a=cacheHas,f=new SetCache}else f=n?[]:d;t:for(;++o<s;){var y=r[o],g=n?n(y):y;if(y=i||0!==y?y:0,h&&g==g){for(var _=f.length;_--;)if(f[_]===g)continue t;n&&f.push(g),d.push(y)}else a(f,g,i)||(f!==d&&f.push(g),d.push(y))}return d}function baseUnset(r,n){return null==(r=parent(r,n=castPath(n,r)))||delete r[toKey(last(n))]}function baseUpdate(r,n,i,o){return baseSet(r,n,i(baseGet(r,n)),o)}function baseWhile(r,n,i,o){for(var a=r.length,s=o?a:-1;(o?s--:++s<a)&&n(r[s],s,r););return i?baseSlice(r,o?0:s,o?s+1:a):baseSlice(r,o?s+1:0,o?a:s)}function baseWrapperValue(r,n){var i=r;return i instanceof LazyWrapper&&(i=i.value()),arrayReduce(n,(function(r,n){return n.func.apply(n.thisArg,arrayPush([r],n.args))}),i)}function baseXor(r,n,o){var a=r.length;if(a<2)return a?baseUniq(r[0]):[];for(var s=-1,h=i(a);++s<a;)for(var d=r[s],f=-1;++f<a;)f!=s&&(h[s]=baseDifference(h[s]||d,r[f],n,o));return baseUniq(baseFlatten(h,1),n,o)}function baseZipObject(r,n,i){for(var o=-1,a=r.length,s=n.length,h={};++o<a;){var d=o<s?n[o]:undefined;i(h,r[o],d)}return h}function castArrayLikeObject(r){return isArrayLikeObject(r)?r:[]}function castFunction(r){return"function"==typeof r?r:identity}function castPath(r,n){return cn(r)?r:isKey(r,n)?[r]:Sr(toString(r))}var dr=baseRest;function castSlice(r,n,i){var o=r.length;return i=undefined===i?o:i,!n&&i>=o?r:baseSlice(r,n,i)}var fr=Pe||function(r){return ce.clearTimeout(r)};function cloneBuffer(r,n){if(n)return r.slice();var i=r.length,o=Jt?Jt(i):new r.constructor(i);return r.copy(o),o}function cloneArrayBuffer(r){var n=new r.constructor(r.byteLength);return new $t(n).set(new $t(r)),n}function cloneTypedArray(r,n){var i=n?cloneArrayBuffer(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}function compareAscending(r,n){if(r!==n){var i=undefined!==r,o=null===r,a=r==r,s=isSymbol(r),h=undefined!==n,d=null===n,f=n==n,p=isSymbol(n);if(!d&&!p&&!s&&r>n||s&&h&&f&&!d&&!p||o&&h&&f||!i&&f||!a)return 1;if(!o&&!s&&!p&&r<n||p&&i&&a&&!o&&!s||d&&i&&a||!h&&a||!f)return-1}return 0}function composeArgs(r,n,o,a){for(var s=-1,h=r.length,d=o.length,f=-1,p=n.length,y=Ne(h-d,0),g=i(p+y),_=!a;++f<p;)g[f]=n[f];for(;++s<d;)(_||s<h)&&(g[o[s]]=r[s]);for(;y--;)g[f++]=r[s++];return g}function composeArgsRight(r,n,o,a){for(var s=-1,h=r.length,d=-1,f=o.length,p=-1,y=n.length,g=Ne(h-f,0),_=i(g+y),b=!a;++s<g;)_[s]=r[s];for(var x=s;++p<y;)_[x+p]=n[p];for(;++d<f;)(b||s<h)&&(_[x+o[d]]=r[s++]);return _}function copyArray(r,n){var o=-1,a=r.length;for(n||(n=i(a));++o<a;)n[o]=r[o];return n}function copyObject(r,n,i,o){var a=!i;i||(i={});for(var s=-1,h=n.length;++s<h;){var d=n[s],f=o?o(i[d],r[d],d,i,r):undefined;undefined===f&&(f=r[d]),a?baseAssignValue(i,d,f):assignValue(i,d,f)}return i}function createAggregator(r,n){return function(i,o){var a=cn(i)?arrayAggregator:baseAggregator,s=n?n():{};return a(i,r,getIteratee(o,2),s)}}function createAssigner(r){return baseRest((function(n,i){var o=-1,a=i.length,s=a>1?i[a-1]:undefined,h=a>2?i[2]:undefined;for(s=r.length>3&&"function"==typeof s?(a--,s):undefined,h&&isIterateeCall(i[0],i[1],h)&&(s=a<3?undefined:s,a=1),n=Ct(n);++o<a;){var d=i[o];d&&r(n,d,o,s)}return n}))}function createBaseEach(r,n){return function(i,o){if(null==i)return i;if(!isArrayLike(i))return r(i,o);for(var a=i.length,s=n?a:-1,h=Ct(i);(n?s--:++s<a)&&!1!==o(h[s],s,h););return i}}function createBaseFor(r){return function(n,i,o){for(var a=-1,s=Ct(n),h=o(n),d=h.length;d--;){var f=h[r?d:++a];if(!1===i(s[f],f,s))break}return n}}function createCaseFirst(r){return function(n){var i=hasUnicode(n=toString(n))?stringToArray(n):undefined,o=i?i[0]:n.charAt(0),a=i?castSlice(i,1).join(""):n.slice(1);return o[r]()+a}}function createCompounder(r){return function(n){return arrayReduce(words(deburr(n).replace(Kt,"")),r,"")}}function createCtor(r){return function(){var n=arguments;switch(n.length){case 0:return new r;case 1:return new r(n[0]);case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[1],n[2]);case 4:return new r(n[0],n[1],n[2],n[3]);case 5:return new r(n[0],n[1],n[2],n[3],n[4]);case 6:return new r(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new r(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var i=or(r.prototype),o=r.apply(i,n);return isObject(o)?o:i}}function createFind(r){return function(n,i,o){var a=Ct(n);if(!isArrayLike(n)){var s=getIteratee(i,3);n=keys(n),i=function(r){return s(a[r],r,a)}}var h=r(n,i,o);return h>-1?a[s?n[h]:h]:undefined}}function createFlow(r){return flatRest((function(n){var i=n.length,o=i,a=LodashWrapper.prototype.thru;for(r&&n.reverse();o--;){var h=n[o];if("function"!=typeof h)throw new Dt(s);if(a&&!d&&"wrapper"==getFuncName(h))var d=new LodashWrapper([],!0)}for(o=d?o:i;++o<i;){var f=getFuncName(h=n[o]),p="wrapper"==f?yr(h):undefined;d=p&&isLaziable(p[0])&&424==p[1]&&!p[4].length&&1==p[9]?d[getFuncName(p[0])].apply(d,p[3]):1==h.length&&isLaziable(h)?d[f]():d.thru(h)}return function(){var r=arguments,o=r[0];if(d&&1==r.length&&cn(o))return d.plant(o).value();for(var a=0,s=i?n[a].apply(this,r):o;++a<i;)s=n[a].call(this,s);return s}}))}function createHybrid(r,n,o,a,s,h,d,f,p,y){var g=128&n,_=1&n,b=2&n,x=24&n,T=512&n,S=b?undefined:createCtor(r);return function wrapper(){for(var E=arguments.length,w=i(E),P=E;P--;)w[P]=arguments[P];if(x)var O=getHolder(wrapper),R=countHolders(w,O);if(a&&(w=composeArgs(w,a,s,x)),h&&(w=composeArgsRight(w,h,d,x)),E-=R,x&&E<y){var C=replaceHolders(w,O);return createRecurry(r,n,createHybrid,wrapper.placeholder,o,w,C,f,p,y-E)}var M=_?o:this,D=b?M[r]:r;return E=w.length,f?w=reorder(w,f):T&&E>1&&w.reverse(),g&&p<E&&(w.length=p),this&&this!==ce&&this instanceof wrapper&&(D=S||createCtor(D)),D.apply(M,w)}}function createInverter(r,n){return function(i,o){return function baseInverter(r,n,i,o){return baseForOwn(r,(function(r,a,s){n(o,i(r),a,s)})),o}(i,r,n(o),{})}}function createMathOperation(r,n){return function(i,o){var a;if(undefined===i&&undefined===o)return n;if(undefined!==i&&(a=i),undefined!==o){if(undefined===a)return o;"string"==typeof i||"string"==typeof o?(i=baseToString(i),o=baseToString(o)):(i=baseToNumber(i),o=baseToNumber(o)),a=r(i,o)}return a}}function createOver(r){return flatRest((function(n){return n=arrayMap(n,baseUnary(getIteratee())),baseRest((function(i){var o=this;return r(n,(function(r){return apply(r,o,i)}))}))}))}function createPadding(r,n){var i=(n=undefined===n?" ":baseToString(n)).length;if(i<2)return i?baseRepeat(n,r):n;var o=baseRepeat(n,Re(r/stringSize(n)));return hasUnicode(n)?castSlice(stringToArray(o),0,r).join(""):o.slice(0,r)}function createRange(r){return function(n,o,a){return a&&"number"!=typeof a&&isIterateeCall(n,o,a)&&(o=a=undefined),n=toFinite(n),undefined===o?(o=n,n=0):o=toFinite(o),function baseRange(r,n,o,a){for(var s=-1,h=Ne(Re((n-r)/(o||1)),0),d=i(h);h--;)d[a?h:++s]=r,r+=o;return d}(n,o,a=undefined===a?n<o?1:-1:toFinite(a),r)}}function createRelationalOperation(r){return function(n,i){return"string"==typeof n&&"string"==typeof i||(n=toNumber(n),i=toNumber(i)),r(n,i)}}function createRecurry(r,n,i,o,a,s,h,d,f,p){var y=8&n;n|=y?32:64,4&(n&=~(y?64:32))||(n&=-4);var g=[r,n,a,y?s:undefined,y?h:undefined,y?undefined:s,y?undefined:h,d,f,p],_=i.apply(undefined,g);return isLaziable(r)&&br(_,g),_.placeholder=o,setWrapToString(_,r,n)}function createRound(r){var n=Rt[r];return function(r,i){if(r=toNumber(r),(i=null==i?0:ke(toInteger(i),292))&&De(r)){var o=(toString(r)+"e").split("e");return+((o=(toString(n(o[0]+"e"+(+o[1]+i)))+"e").split("e"))[0]+"e"+(+o[1]-i))}return n(r)}}var pr=Ve&&1/setToArray(new Ve([,-0]))[1]==Infinity?function(r){return new Ve(r)}:noop;function createToPairs(r){return function(n){var i=vr(n);return i==T?mapToArray(n):i==P?setToPairs(n):function baseToPairs(r,n){return arrayMap(n,(function(n){return[n,r[n]]}))}(n,r(n))}}function createWrap(r,n,o,a,d,f,p,y){var g=2&n;if(!g&&"function"!=typeof r)throw new Dt(s);var _=a?a.length:0;if(_||(n&=-97,a=d=undefined),p=undefined===p?p:Ne(toInteger(p),0),y=undefined===y?y:toInteger(y),_-=d?d.length:0,64&n){var b=a,x=d;a=d=undefined}var T=g?undefined:yr(r),S=[r,n,o,a,d,b,x,f,p,y];if(T&&function mergeData(r,n){var i=r[1],o=n[1],a=i|o,s=a<131,d=128==o&&8==i||128==o&&256==i&&r[7].length<=n[8]||384==o&&n[7].length<=n[8]&&8==i;if(!s&&!d)return r;1&o&&(r[2]=n[2],a|=1&i?0:4);var f=n[3];if(f){var p=r[3];r[3]=p?composeArgs(p,f,n[4]):f,r[4]=p?replaceHolders(r[3],h):n[4]}(f=n[5])&&(p=r[5],r[5]=p?composeArgsRight(p,f,n[6]):f,r[6]=p?replaceHolders(r[5],h):n[6]);(f=n[7])&&(r[7]=f);128&o&&(r[8]=null==r[8]?n[8]:ke(r[8],n[8]));null==r[9]&&(r[9]=n[9]);return r[0]=n[0],r[1]=a,r}(S,T),r=S[0],n=S[1],o=S[2],a=S[3],d=S[4],!(y=S[9]=undefined===S[9]?g?0:r.length:Ne(S[9]-_,0))&&24&n&&(n&=-25),n&&1!=n)E=8==n||16==n?function createCurry(r,n,o){var a=createCtor(r);return function wrapper(){for(var s=arguments.length,h=i(s),d=s,f=getHolder(wrapper);d--;)h[d]=arguments[d];var p=s<3&&h[0]!==f&&h[s-1]!==f?[]:replaceHolders(h,f);return(s-=p.length)<o?createRecurry(r,n,createHybrid,wrapper.placeholder,void 0,h,p,void 0,void 0,o-s):apply(this&&this!==ce&&this instanceof wrapper?a:r,this,h)}}(r,n,y):32!=n&&33!=n||d.length?createHybrid.apply(undefined,S):function createPartial(r,n,o,a){var s=1&n,h=createCtor(r);return function wrapper(){for(var n=-1,d=arguments.length,f=-1,p=a.length,y=i(p+d),g=this&&this!==ce&&this instanceof wrapper?h:r;++f<p;)y[f]=a[f];for(;d--;)y[f++]=arguments[++n];return apply(g,s?o:this,y)}}(r,n,o,a);else var E=function createBind(r,n,i){var o=1&n,a=createCtor(r);return function wrapper(){return(this&&this!==ce&&this instanceof wrapper?a:r).apply(o?i:this,arguments)}}(r,n,o);return setWrapToString((T?cr:br)(E,S),r,n)}function customDefaultsAssignIn(r,n,i,o){return undefined===r||eq(r,Nt[i])&&!jt.call(o,i)?n:r}function customDefaultsMerge(r,n,i,o,a,s){return isObject(r)&&isObject(n)&&(s.set(n,r),baseMerge(r,n,undefined,customDefaultsMerge,s),s.delete(n)),r}function customOmitClone(r){return isPlainObject(r)?undefined:r}function equalArrays(r,n,i,o,a,s){var h=1&i,d=r.length,f=n.length;if(d!=f&&!(h&&f>d))return!1;var p=s.get(r),y=s.get(n);if(p&&y)return p==n&&y==r;var g=-1,_=!0,b=2&i?new SetCache:undefined;for(s.set(r,n),s.set(n,r);++g<d;){var x=r[g],T=n[g];if(o)var S=h?o(T,x,g,n,r,s):o(x,T,g,r,n,s);if(undefined!==S){if(S)continue;_=!1;break}if(b){if(!arraySome(n,(function(r,n){if(!cacheHas(b,n)&&(x===r||a(x,r,i,o,s)))return b.push(n)}))){_=!1;break}}else if(x!==T&&!a(x,T,i,o,s)){_=!1;break}}return s.delete(r),s.delete(n),_}function flatRest(r){return Tr(overRest(r,undefined,flatten),r+"")}function getAllKeys(r){return baseGetAllKeys(r,keys,mr)}function getAllKeysIn(r){return baseGetAllKeys(r,keysIn,gr)}var yr=Ke?function(r){return Ke.get(r)}:noop;function getFuncName(r){for(var n=r.name+"",i=Ze[n],o=jt.call(Ze,n)?i.length:0;o--;){var a=i[o],s=a.func;if(null==s||s==r)return a.name}return n}function getHolder(r){return(jt.call(lodash,"placeholder")?lodash:r).placeholder}function getIteratee(){var r=lodash.iteratee||iteratee;return r=r===iteratee?baseIteratee:r,arguments.length?r(arguments[0],arguments[1]):r}function getMapData(r,n){var i=r.__data__;return function isKeyable(r){var n=typeof r;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r}(n)?i["string"==typeof n?"string":"hash"]:i.map}function getMatchData(r){for(var n=keys(r),i=n.length;i--;){var o=n[i],a=r[o];n[i]=[o,a,isStrictComparable(a)]}return n}function getNative(r,n){var i=function getValue(r,n){return null==r?void 0:r[n]}(r,n);return baseIsNative(i)?i:undefined}var mr=Me?function(r){return null==r?[]:(r=Ct(r),arrayFilter(Me(r),(function(n){return he.call(r,n)})))}:stubArray,gr=Me?function(r){for(var n=[];r;)arrayPush(n,mr(r)),r=oe(r);return n}:stubArray,vr=baseGetTag;function hasPath(r,n,i){for(var o=-1,a=(n=castPath(n,r)).length,s=!1;++o<a;){var h=toKey(n[o]);if(!(s=null!=r&&i(r,h)))break;r=r[h]}return s||++o!=a?s:!!(a=null==r?0:r.length)&&isLength(a)&&isIndex(h,a)&&(cn(r)||hn(r))}function initCloneObject(r){return"function"!=typeof r.constructor||isPrototype(r)?{}:or(oe(r))}function isFlattenable(r){return cn(r)||hn(r)||!!(de&&r&&r[de])}function isIndex(r,n){var i=typeof r;return!!(n=null==n?9007199254740991:n)&&("number"==i||"symbol"!=i&&It.test(r))&&r>-1&&r%1==0&&r<n}function isIterateeCall(r,n,i){if(!isObject(i))return!1;var o=typeof n;return!!("number"==o?isArrayLike(i)&&isIndex(n,i.length):"string"==o&&n in i)&&eq(i[n],r)}function isKey(r,n){if(cn(r))return!1;var i=typeof r;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=r&&!isSymbol(r))||(st.test(r)||!at.test(r)||null!=n&&r in Ct(n))}function isLaziable(r){var n=getFuncName(r),i=lodash[n];if("function"!=typeof i||!(n in LazyWrapper.prototype))return!1;if(r===i)return!0;var o=yr(i);return!!o&&r===o[0]}(ze&&vr(new ze(new ArrayBuffer(1)))!=D||He&&vr(new He)!=T||We&&"[object Promise]"!=vr(We.resolve())||Ve&&vr(new Ve)!=P||Ye&&vr(new Ye)!=C)&&(vr=function(r){var n=baseGetTag(r),i=n==E?r.constructor:undefined,o=i?toSource(i):"";if(o)switch(o){case $e:return D;case Qe:return T;case Je:return"[object Promise]";case tr:return P;case er:return C}return n});var _r=kt?isFunction:stubFalse;function isPrototype(r){var n=r&&r.constructor;return r===("function"==typeof n&&n.prototype||Nt)}function isStrictComparable(r){return r==r&&!isObject(r)}function matchesStrictComparable(r,n){return function(i){return null!=i&&(i[r]===n&&(undefined!==n||r in Ct(i)))}}function overRest(r,n,o){return n=Ne(undefined===n?r.length-1:n,0),function(){for(var a=arguments,s=-1,h=Ne(a.length-n,0),d=i(h);++s<h;)d[s]=a[n+s];s=-1;for(var f=i(n+1);++s<n;)f[s]=a[s];return f[n]=o(d),apply(r,this,f)}}function parent(r,n){return n.length<2?r:baseGet(r,baseSlice(n,0,-1))}function reorder(r,n){for(var i=r.length,o=ke(n.length,i),a=copyArray(r);o--;){var s=n[o];r[o]=isIndex(s,i)?a[s]:undefined}return r}function safeGet(r,n){if(("constructor"!==n||"function"!=typeof r[n])&&"__proto__"!=n)return r[n]}var br=shortOut(cr),xr=Oe||function(r,n){return ce.setTimeout(r,n)},Tr=shortOut(lr);function setWrapToString(r,n,i){var o=n+"";return Tr(r,function insertWrapDetails(r,n){var i=n.length;if(!i)return r;var o=i-1;return n[o]=(i>1?"& ":"")+n[o],n=n.join(i>2?", ":" "),r.replace(pt,"{\n/* [wrapped with "+n+"] */\n")}(o,function updateWrapDetails(r,n){return arrayEach(d,(function(i){var o="_."+i[0];n&i[1]&&!arrayIncludes(r,o)&&r.push(o)})),r.sort()}(function getWrapDetails(r){var n=r.match(yt);return n?n[1].split(mt):[]}(o),i)))}function shortOut(r){var n=0,i=0;return function(){var o=Ue(),a=16-(o-i);if(i=o,a>0){if(++n>=800)return arguments[0]}else n=0;return r.apply(undefined,arguments)}}function shuffleSelf(r,n){var i=-1,o=r.length,a=o-1;for(n=undefined===n?o:n;++i<n;){var s=baseRandom(i,a),h=r[s];r[s]=r[i],r[i]=h}return r.length=n,r}var Sr=function memoizeCapped(r){var n=memoize(r,(function(r){return 500===i.size&&i.clear(),r})),i=n.cache;return n}((function(r){var n=[];return 46===r.charCodeAt(0)&&n.push(""),r.replace(ut,(function(r,i,o,a){n.push(o?a.replace(vt,"$1"):i||r)})),n}));function toKey(r){if("string"==typeof r||isSymbol(r))return r;var n=r+"";return"0"==n&&1/r==-Infinity?"-0":n}function toSource(r){if(null!=r){try{return Ut.call(r)}catch(r){}try{return r+""}catch(r){}}return""}function wrapperClone(r){if(r instanceof LazyWrapper)return r.clone();var n=new LodashWrapper(r.__wrapped__,r.__chain__);return n.__actions__=copyArray(r.__actions__),n.__index__=r.__index__,n.__values__=r.__values__,n}var Er=baseRest((function(r,n){return isArrayLikeObject(r)?baseDifference(r,baseFlatten(n,1,isArrayLikeObject,!0)):[]})),Ir=baseRest((function(r,n){var i=last(n);return isArrayLikeObject(i)&&(i=undefined),isArrayLikeObject(r)?baseDifference(r,baseFlatten(n,1,isArrayLikeObject,!0),getIteratee(i,2)):[]})),wr=baseRest((function(r,n){var i=last(n);return isArrayLikeObject(i)&&(i=undefined),isArrayLikeObject(r)?baseDifference(r,baseFlatten(n,1,isArrayLikeObject,!0),undefined,i):[]}));function findIndex(r,n,i){var o=null==r?0:r.length;if(!o)return-1;var a=null==i?0:toInteger(i);return a<0&&(a=Ne(o+a,0)),baseFindIndex(r,getIteratee(n,3),a)}function findLastIndex(r,n,i){var o=null==r?0:r.length;if(!o)return-1;var a=o-1;return undefined!==i&&(a=toInteger(i),a=i<0?Ne(o+a,0):ke(a,o-1)),baseFindIndex(r,getIteratee(n,3),a,!0)}function flatten(r){return(null==r?0:r.length)?baseFlatten(r,1):[]}function head(r){return r&&r.length?r[0]:undefined}var Pr=baseRest((function(r){var n=arrayMap(r,castArrayLikeObject);return n.length&&n[0]===r[0]?baseIntersection(n):[]})),Ar=baseRest((function(r){var n=last(r),i=arrayMap(r,castArrayLikeObject);return n===last(i)?n=undefined:i.pop(),i.length&&i[0]===r[0]?baseIntersection(i,getIteratee(n,2)):[]})),Or=baseRest((function(r){var n=last(r),i=arrayMap(r,castArrayLikeObject);return(n="function"==typeof n?n:undefined)&&i.pop(),i.length&&i[0]===r[0]?baseIntersection(i,undefined,n):[]}));function last(r){var n=null==r?0:r.length;return n?r[n-1]:undefined}var Rr=baseRest(pullAll);function pullAll(r,n){return r&&r.length&&n&&n.length?basePullAll(r,n):r}var Cr=flatRest((function(r,n){var i=null==r?0:r.length,o=baseAt(r,n);return basePullAt(r,arrayMap(n,(function(r){return isIndex(r,i)?+r:r})).sort(compareAscending)),o}));function reverse(r){return null==r?r:Xe.call(r)}var Mr=baseRest((function(r){return baseUniq(baseFlatten(r,1,isArrayLikeObject,!0))})),Lr=baseRest((function(r){var n=last(r);return isArrayLikeObject(n)&&(n=undefined),baseUniq(baseFlatten(r,1,isArrayLikeObject,!0),getIteratee(n,2))})),Dr=baseRest((function(r){var n=last(r);return n="function"==typeof n?n:undefined,baseUniq(baseFlatten(r,1,isArrayLikeObject,!0),undefined,n)}));function unzip(r){if(!r||!r.length)return[];var n=0;return r=arrayFilter(r,(function(r){if(isArrayLikeObject(r))return n=Ne(r.length,n),!0})),baseTimes(n,(function(n){return arrayMap(r,baseProperty(n))}))}function unzipWith(r,n){if(!r||!r.length)return[];var i=unzip(r);return null==n?i:arrayMap(i,(function(r){return apply(n,undefined,r)}))}var Fr=baseRest((function(r,n){return isArrayLikeObject(r)?baseDifference(r,n):[]})),Br=baseRest((function(r){return baseXor(arrayFilter(r,isArrayLikeObject))})),Nr=baseRest((function(r){var n=last(r);return isArrayLikeObject(n)&&(n=undefined),baseXor(arrayFilter(r,isArrayLikeObject),getIteratee(n,2))})),kr=baseRest((function(r){var n=last(r);return n="function"==typeof n?n:undefined,baseXor(arrayFilter(r,isArrayLikeObject),undefined,n)})),Ur=baseRest(unzip);var jr=baseRest((function(r){var n=r.length,i=n>1?r[n-1]:undefined;return i="function"==typeof i?(r.pop(),i):undefined,unzipWith(r,i)}));function chain(r){var n=lodash(r);return n.__chain__=!0,n}function thru(r,n){return n(r)}var Gr=flatRest((function(r){var n=r.length,i=n?r[0]:0,o=this.__wrapped__,interceptor=function(n){return baseAt(n,r)};return!(n>1||this.__actions__.length)&&o instanceof LazyWrapper&&isIndex(i)?((o=o.slice(i,+i+(n?1:0))).__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(o,this.__chain__).thru((function(r){return n&&!r.length&&r.push(undefined),r}))):this.thru(interceptor)}));var Xr=createAggregator((function(r,n,i){jt.call(r,i)?++r[i]:baseAssignValue(r,i,1)}));var zr=createFind(findIndex),Hr=createFind(findLastIndex);function forEach(r,n){return(cn(r)?arrayEach:ar)(r,getIteratee(n,3))}function forEachRight(r,n){return(cn(r)?arrayEachRight:sr)(r,getIteratee(n,3))}var Wr=createAggregator((function(r,n,i){jt.call(r,i)?r[i].push(n):baseAssignValue(r,i,[n])}));var Vr=baseRest((function(r,n,o){var a=-1,s="function"==typeof n,h=isArrayLike(r)?i(r.length):[];return ar(r,(function(r){h[++a]=s?apply(n,r,o):baseInvoke(r,n,o)})),h})),Yr=createAggregator((function(r,n,i){baseAssignValue(r,i,n)}));function map(r,n){return(cn(r)?arrayMap:baseMap)(r,getIteratee(n,3))}var qr=createAggregator((function(r,n,i){r[i?0:1].push(n)}),(function(){return[[],[]]}));var Kr=baseRest((function(r,n){if(null==r)return[];var i=n.length;return i>1&&isIterateeCall(r,n[0],n[1])?n=[]:i>2&&isIterateeCall(n[0],n[1],n[2])&&(n=[n[0]]),baseOrderBy(r,baseFlatten(n,1),[])})),Zr=Ae||function(){return ce.Date.now()};function ary(r,n,i){return n=i?undefined:n,createWrap(r,128,undefined,undefined,undefined,undefined,n=r&&null==n?r.length:n)}function before(r,n){var i;if("function"!=typeof n)throw new Dt(s);return r=toInteger(r),function(){return--r>0&&(i=n.apply(this,arguments)),r<=1&&(n=undefined),i}}var $r=baseRest((function(r,n,i){var o=1;if(i.length){var a=replaceHolders(i,getHolder($r));o|=32}return createWrap(r,o,n,i,a)})),Qr=baseRest((function(r,n,i){var o=3;if(i.length){var a=replaceHolders(i,getHolder(Qr));o|=32}return createWrap(n,o,r,i,a)}));function debounce(r,n,i){var o,a,h,d,f,p,y=0,g=!1,_=!1,b=!0;if("function"!=typeof r)throw new Dt(s);function invokeFunc(n){var i=o,s=a;return o=a=undefined,y=n,d=r.apply(s,i)}function leadingEdge(r){return y=r,f=xr(timerExpired,n),g?invokeFunc(r):d}function shouldInvoke(r){var i=r-p;return undefined===p||i>=n||i<0||_&&r-y>=h}function timerExpired(){var r=Zr();if(shouldInvoke(r))return trailingEdge(r);f=xr(timerExpired,function remainingWait(r){var i=n-(r-p);return _?ke(i,h-(r-y)):i}(r))}function trailingEdge(r){return f=undefined,b&&o?invokeFunc(r):(o=a=undefined,d)}function debounced(){var r=Zr(),i=shouldInvoke(r);if(o=arguments,a=this,p=r,i){if(undefined===f)return leadingEdge(p);if(_)return fr(f),f=xr(timerExpired,n),invokeFunc(p)}return undefined===f&&(f=xr(timerExpired,n)),d}return n=toNumber(n)||0,isObject(i)&&(g=!!i.leading,h=(_="maxWait"in i)?Ne(toNumber(i.maxWait)||0,n):h,b="trailing"in i?!!i.trailing:b),debounced.cancel=function cancel(){undefined!==f&&fr(f),y=0,o=p=a=f=undefined},debounced.flush=function flush(){return undefined===f?d:trailingEdge(Zr())},debounced}var Jr=baseRest((function(r,n){return baseDelay(r,1,n)})),tn=baseRest((function(r,n,i){return baseDelay(r,toNumber(n)||0,i)}));function memoize(r,n){if("function"!=typeof r||null!=n&&"function"!=typeof n)throw new Dt(s);var memoized=function(){var i=arguments,o=n?n.apply(this,i):i[0],a=memoized.cache;if(a.has(o))return a.get(o);var s=r.apply(this,i);return memoized.cache=a.set(o,s)||a,s};return memoized.cache=new(memoize.Cache||MapCache),memoized}function negate(r){if("function"!=typeof r)throw new Dt(s);return function(){var n=arguments;switch(n.length){case 0:return!r.call(this);case 1:return!r.call(this,n[0]);case 2:return!r.call(this,n[0],n[1]);case 3:return!r.call(this,n[0],n[1],n[2])}return!r.apply(this,n)}}memoize.Cache=MapCache;var en=dr((function(r,n){var i=(n=1==n.length&&cn(n[0])?arrayMap(n[0],baseUnary(getIteratee())):arrayMap(baseFlatten(n,1),baseUnary(getIteratee()))).length;return baseRest((function(o){for(var a=-1,s=ke(o.length,i);++a<s;)o[a]=n[a].call(this,o[a]);return apply(r,this,o)}))})),rn=baseRest((function(r,n){return createWrap(r,32,undefined,n,replaceHolders(n,getHolder(rn)))})),nn=baseRest((function(r,n){return createWrap(r,64,undefined,n,replaceHolders(n,getHolder(nn)))})),an=flatRest((function(r,n){return createWrap(r,256,undefined,undefined,undefined,n)}));function eq(r,n){return r===n||r!=r&&n!=n}var sn=createRelationalOperation(baseGt),un=createRelationalOperation((function(r,n){return r>=n})),hn=baseIsArguments(function(){return arguments}())?baseIsArguments:function(r){return isObjectLike(r)&&jt.call(r,"callee")&&!he.call(r,"callee")},cn=i.isArray,ln=me?baseUnary(me):function baseIsArrayBuffer(r){return isObjectLike(r)&&baseGetTag(r)==M};function isArrayLike(r){return null!=r&&isLength(r.length)&&!isFunction(r)}function isArrayLikeObject(r){return isObjectLike(r)&&isArrayLike(r)}var dn=Le||stubFalse,fn=ge?baseUnary(ge):function baseIsDate(r){return isObjectLike(r)&&baseGetTag(r)==g};function isError(r){if(!isObjectLike(r))return!1;var n=baseGetTag(r);return n==_||"[object DOMException]"==n||"string"==typeof r.message&&"string"==typeof r.name&&!isPlainObject(r)}function isFunction(r){if(!isObject(r))return!1;var n=baseGetTag(r);return n==b||n==x||"[object AsyncFunction]"==n||"[object Proxy]"==n}function isInteger(r){return"number"==typeof r&&r==toInteger(r)}function isLength(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=9007199254740991}function isObject(r){var n=typeof r;return null!=r&&("object"==n||"function"==n)}function isObjectLike(r){return null!=r&&"object"==typeof r}var pn=ve?baseUnary(ve):function baseIsMap(r){return isObjectLike(r)&&vr(r)==T};function isNumber(r){return"number"==typeof r||isObjectLike(r)&&baseGetTag(r)==S}function isPlainObject(r){if(!isObjectLike(r)||baseGetTag(r)!=E)return!1;var n=oe(r);if(null===n)return!0;var i=jt.call(n,"constructor")&&n.constructor;return"function"==typeof i&&i instanceof i&&Ut.call(i)==Ht}var yn=_e?baseUnary(_e):function baseIsRegExp(r){return isObjectLike(r)&&baseGetTag(r)==w};var mn=be?baseUnary(be):function baseIsSet(r){return isObjectLike(r)&&vr(r)==P};function isString(r){return"string"==typeof r||!cn(r)&&isObjectLike(r)&&baseGetTag(r)==O}function isSymbol(r){return"symbol"==typeof r||isObjectLike(r)&&baseGetTag(r)==R}var gn=xe?baseUnary(xe):function baseIsTypedArray(r){return isObjectLike(r)&&isLength(r.length)&&!!ne[baseGetTag(r)]};var vn=createRelationalOperation(baseLt),_n=createRelationalOperation((function(r,n){return r<=n}));function toArray(r){if(!r)return[];if(isArrayLike(r))return isString(r)?stringToArray(r):copyArray(r);if(pe&&r[pe])return function iteratorToArray(r){for(var n,i=[];!(n=r.next()).done;)i.push(n.value);return i}(r[pe]());var n=vr(r);return(n==T?mapToArray:n==P?setToArray:values)(r)}function toFinite(r){return r?Infinity===(r=toNumber(r))||-Infinity===r?17976931348623157e292*(r<0?-1:1):r==r?r:0:0===r?r:0}function toInteger(r){var n=toFinite(r),i=n%1;return n==n?i?n-i:n:0}function toLength(r){return r?baseClamp(toInteger(r),0,4294967295):0}function toNumber(r){if("number"==typeof r)return r;if(isSymbol(r))return NaN;if(isObject(r)){var n="function"==typeof r.valueOf?r.valueOf():r;r=isObject(n)?n+"":n}if("string"!=typeof r)return 0===r?r:+r;r=r.replace(lt,"");var i=Tt.test(r);return i||Et.test(r)?se(r.slice(2),i?2:8):xt.test(r)?NaN:+r}function toPlainObject(r){return copyObject(r,keysIn(r))}function toString(r){return null==r?"":baseToString(r)}var bn=createAssigner((function(r,n){if(isPrototype(n)||isArrayLike(n))copyObject(n,keys(n),r);else for(var i in n)jt.call(n,i)&&assignValue(r,i,n[i])})),xn=createAssigner((function(r,n){copyObject(n,keysIn(n),r)})),Tn=createAssigner((function(r,n,i,o){copyObject(n,keysIn(n),r,o)})),Sn=createAssigner((function(r,n,i,o){copyObject(n,keys(n),r,o)})),En=flatRest(baseAt);var In=baseRest((function(r,n){r=Ct(r);var i=-1,o=n.length,a=o>2?n[2]:undefined;for(a&&isIterateeCall(n[0],n[1],a)&&(o=1);++i<o;)for(var s=n[i],h=keysIn(s),d=-1,f=h.length;++d<f;){var p=h[d],y=r[p];(undefined===y||eq(y,Nt[p])&&!jt.call(r,p))&&(r[p]=s[p])}return r})),wn=baseRest((function(r){return r.push(undefined,customDefaultsMerge),apply(Cn,undefined,r)}));function get(r,n,i){var o=null==r?undefined:baseGet(r,n);return undefined===o?i:o}function hasIn(r,n){return null!=r&&hasPath(r,n,baseHasIn)}var Pn=createInverter((function(r,n,i){null!=n&&"function"!=typeof n.toString&&(n=zt.call(n)),r[n]=i}),constant(identity)),An=createInverter((function(r,n,i){null!=n&&"function"!=typeof n.toString&&(n=zt.call(n)),jt.call(r,n)?r[n].push(i):r[n]=[i]}),getIteratee),On=baseRest(baseInvoke);function keys(r){return isArrayLike(r)?arrayLikeKeys(r):baseKeys(r)}function keysIn(r){return isArrayLike(r)?arrayLikeKeys(r,!0):baseKeysIn(r)}var Rn=createAssigner((function(r,n,i){baseMerge(r,n,i)})),Cn=createAssigner((function(r,n,i,o){baseMerge(r,n,i,o)})),Mn=flatRest((function(r,n){var i={};if(null==r)return i;var o=!1;n=arrayMap(n,(function(n){return n=castPath(n,r),o||(o=n.length>1),n})),copyObject(r,getAllKeysIn(r),i),o&&(i=baseClone(i,7,customOmitClone));for(var a=n.length;a--;)baseUnset(i,n[a]);return i}));var Ln=flatRest((function(r,n){return null==r?{}:function basePick(r,n){return basePickBy(r,n,(function(n,i){return hasIn(r,i)}))}(r,n)}));function pickBy(r,n){if(null==r)return{};var i=arrayMap(getAllKeysIn(r),(function(r){return[r]}));return n=getIteratee(n),basePickBy(r,i,(function(r,i){return n(r,i[0])}))}var Dn=createToPairs(keys),Fn=createToPairs(keysIn);function values(r){return null==r?[]:baseValues(r,keys(r))}var Bn=createCompounder((function(r,n,i){return n=n.toLowerCase(),r+(i?capitalize(n):n)}));function capitalize(r){return zn(toString(r).toLowerCase())}function deburr(r){return(r=toString(r))&&r.replace(wt,Se).replace(Zt,"")}var Nn=createCompounder((function(r,n,i){return r+(i?"-":"")+n.toLowerCase()})),kn=createCompounder((function(r,n,i){return r+(i?" ":"")+n.toLowerCase()})),Un=createCaseFirst("toLowerCase");var jn=createCompounder((function(r,n,i){return r+(i?"_":"")+n.toLowerCase()}));var Gn=createCompounder((function(r,n,i){return r+(i?" ":"")+zn(n)}));var Xn=createCompounder((function(r,n,i){return r+(i?" ":"")+n.toUpperCase()})),zn=createCaseFirst("toUpperCase");function words(r,n,i){return r=toString(r),undefined===(n=i?undefined:n)?function hasUnicodeWord(r){return te.test(r)}(r)?function unicodeWords(r){return r.match(Qt)||[]}(r):function asciiWords(r){return r.match(gt)||[]}(r):r.match(n)||[]}var Hn=baseRest((function(r,n){try{return apply(r,undefined,n)}catch(r){return isError(r)?r:new a(r)}})),Wn=flatRest((function(r,n){return arrayEach(n,(function(n){n=toKey(n),baseAssignValue(r,n,$r(r[n],r))})),r}));function constant(r){return function(){return r}}var Vn=createFlow(),Yn=createFlow(!0);function identity(r){return r}function iteratee(r){return baseIteratee("function"==typeof r?r:baseClone(r,1))}var qn=baseRest((function(r,n){return function(i){return baseInvoke(i,r,n)}})),Kn=baseRest((function(r,n){return function(i){return baseInvoke(r,i,n)}}));function mixin(r,n,i){var o=keys(n),a=baseFunctions(n,o);null!=i||isObject(n)&&(a.length||!o.length)||(i=n,n=r,r=this,a=baseFunctions(n,keys(n)));var s=!(isObject(i)&&"chain"in i&&!i.chain),h=isFunction(r);return arrayEach(a,(function(i){var o=n[i];r[i]=o,h&&(r.prototype[i]=function(){var n=this.__chain__;if(s||n){var i=r(this.__wrapped__),a=i.__actions__=copyArray(this.__actions__);return a.push({func:o,args:arguments,thisArg:r}),i.__chain__=n,i}return o.apply(r,arrayPush([this.value()],arguments))})})),r}function noop(){}var Zn=createOver(arrayMap),$n=createOver(arrayEvery),Qn=createOver(arraySome);function property(r){return isKey(r)?baseProperty(toKey(r)):function basePropertyDeep(r){return function(n){return baseGet(n,r)}}(r)}var Jn=createRange(),ti=createRange(!0);function stubArray(){return[]}function stubFalse(){return!1}var ei=createMathOperation((function(r,n){return r+n}),0),ri=createRound("ceil"),ni=createMathOperation((function(r,n){return r/n}),1),ii=createRound("floor");var oi,ai=createMathOperation((function(r,n){return r*n}),1),si=createRound("round"),ui=createMathOperation((function(r,n){return r-n}),0);return lodash.after=function after(r,n){if("function"!=typeof n)throw new Dt(s);return r=toInteger(r),function(){if(--r<1)return n.apply(this,arguments)}},lodash.ary=ary,lodash.assign=bn,lodash.assignIn=xn,lodash.assignInWith=Tn,lodash.assignWith=Sn,lodash.at=En,lodash.before=before,lodash.bind=$r,lodash.bindAll=Wn,lodash.bindKey=Qr,lodash.castArray=function castArray(){if(!arguments.length)return[];var r=arguments[0];return cn(r)?r:[r]},lodash.chain=chain,lodash.chunk=function chunk(r,n,o){n=(o?isIterateeCall(r,n,o):undefined===n)?1:Ne(toInteger(n),0);var a=null==r?0:r.length;if(!a||n<1)return[];for(var s=0,h=0,d=i(Re(a/n));s<a;)d[h++]=baseSlice(r,s,s+=n);return d},lodash.compact=function compact(r){for(var n=-1,i=null==r?0:r.length,o=0,a=[];++n<i;){var s=r[n];s&&(a[o++]=s)}return a},lodash.concat=function concat(){var r=arguments.length;if(!r)return[];for(var n=i(r-1),o=arguments[0],a=r;a--;)n[a-1]=arguments[a];return arrayPush(cn(o)?copyArray(o):[o],baseFlatten(n,1))},lodash.cond=function cond(r){var n=null==r?0:r.length,i=getIteratee();return r=n?arrayMap(r,(function(r){if("function"!=typeof r[1])throw new Dt(s);return[i(r[0]),r[1]]})):[],baseRest((function(i){for(var o=-1;++o<n;){var a=r[o];if(apply(a[0],this,i))return apply(a[1],this,i)}}))},lodash.conforms=function conforms(r){return function baseConforms(r){var n=keys(r);return function(i){return baseConformsTo(i,r,n)}}(baseClone(r,1))},lodash.constant=constant,lodash.countBy=Xr,lodash.create=function create(r,n){var i=or(r);return null==n?i:baseAssign(i,n)},lodash.curry=function curry(r,n,i){var o=createWrap(r,8,undefined,undefined,undefined,undefined,undefined,n=i?undefined:n);return o.placeholder=curry.placeholder,o},lodash.curryRight=function curryRight(r,n,i){var o=createWrap(r,16,undefined,undefined,undefined,undefined,undefined,n=i?undefined:n);return o.placeholder=curryRight.placeholder,o},lodash.debounce=debounce,lodash.defaults=In,lodash.defaultsDeep=wn,lodash.defer=Jr,lodash.delay=tn,lodash.difference=Er,lodash.differenceBy=Ir,lodash.differenceWith=wr,lodash.drop=function drop(r,n,i){var o=null==r?0:r.length;return o?baseSlice(r,(n=i||undefined===n?1:toInteger(n))<0?0:n,o):[]},lodash.dropRight=function dropRight(r,n,i){var o=null==r?0:r.length;return o?baseSlice(r,0,(n=o-(n=i||undefined===n?1:toInteger(n)))<0?0:n):[]},lodash.dropRightWhile=function dropRightWhile(r,n){return r&&r.length?baseWhile(r,getIteratee(n,3),!0,!0):[]},lodash.dropWhile=function dropWhile(r,n){return r&&r.length?baseWhile(r,getIteratee(n,3),!0):[]},lodash.fill=function fill(r,n,i,o){var a=null==r?0:r.length;return a?(i&&"number"!=typeof i&&isIterateeCall(r,n,i)&&(i=0,o=a),function baseFill(r,n,i,o){var a=r.length;for((i=toInteger(i))<0&&(i=-i>a?0:a+i),(o=void 0===o||o>a?a:toInteger(o))<0&&(o+=a),o=i>o?0:toLength(o);i<o;)r[i++]=n;return r}(r,n,i,o)):[]},lodash.filter=function filter(r,n){return(cn(r)?arrayFilter:baseFilter)(r,getIteratee(n,3))},lodash.flatMap=function flatMap(r,n){return baseFlatten(map(r,n),1)},lodash.flatMapDeep=function flatMapDeep(r,n){return baseFlatten(map(r,n),Infinity)},lodash.flatMapDepth=function flatMapDepth(r,n,i){return i=undefined===i?1:toInteger(i),baseFlatten(map(r,n),i)},lodash.flatten=flatten,lodash.flattenDeep=function flattenDeep(r){return(null==r?0:r.length)?baseFlatten(r,Infinity):[]},lodash.flattenDepth=function flattenDepth(r,n){return(null==r?0:r.length)?baseFlatten(r,n=undefined===n?1:toInteger(n)):[]},lodash.flip=function flip(r){return createWrap(r,512)},lodash.flow=Vn,lodash.flowRight=Yn,lodash.fromPairs=function fromPairs(r){for(var n=-1,i=null==r?0:r.length,o={};++n<i;){var a=r[n];o[a[0]]=a[1]}return o},lodash.functions=function functions(r){return null==r?[]:baseFunctions(r,keys(r))},lodash.functionsIn=function functionsIn(r){return null==r?[]:baseFunctions(r,keysIn(r))},lodash.groupBy=Wr,lodash.initial=function initial(r){return(null==r?0:r.length)?baseSlice(r,0,-1):[]},lodash.intersection=Pr,lodash.intersectionBy=Ar,lodash.intersectionWith=Or,lodash.invert=Pn,lodash.invertBy=An,lodash.invokeMap=Vr,lodash.iteratee=iteratee,lodash.keyBy=Yr,lodash.keys=keys,lodash.keysIn=keysIn,lodash.map=map,lodash.mapKeys=function mapKeys(r,n){var i={};return n=getIteratee(n,3),baseForOwn(r,(function(r,o,a){baseAssignValue(i,n(r,o,a),r)})),i},lodash.mapValues=function mapValues(r,n){var i={};return n=getIteratee(n,3),baseForOwn(r,(function(r,o,a){baseAssignValue(i,o,n(r,o,a))})),i},lodash.matches=function matches(r){return baseMatches(baseClone(r,1))},lodash.matchesProperty=function matchesProperty(r,n){return baseMatchesProperty(r,baseClone(n,1))},lodash.memoize=memoize,lodash.merge=Rn,lodash.mergeWith=Cn,lodash.method=qn,lodash.methodOf=Kn,lodash.mixin=mixin,lodash.negate=negate,lodash.nthArg=function nthArg(r){return r=toInteger(r),baseRest((function(n){return baseNth(n,r)}))},lodash.omit=Mn,lodash.omitBy=function omitBy(r,n){return pickBy(r,negate(getIteratee(n)))},lodash.once=function once(r){return before(2,r)},lodash.orderBy=function orderBy(r,n,i,o){return null==r?[]:(cn(n)||(n=null==n?[]:[n]),cn(i=o?undefined:i)||(i=null==i?[]:[i]),baseOrderBy(r,n,i))},lodash.over=Zn,lodash.overArgs=en,lodash.overEvery=$n,lodash.overSome=Qn,lodash.partial=rn,lodash.partialRight=nn,lodash.partition=qr,lodash.pick=Ln,lodash.pickBy=pickBy,lodash.property=property,lodash.propertyOf=function propertyOf(r){return function(n){return null==r?undefined:baseGet(r,n)}},lodash.pull=Rr,lodash.pullAll=pullAll,lodash.pullAllBy=function pullAllBy(r,n,i){return r&&r.length&&n&&n.length?basePullAll(r,n,getIteratee(i,2)):r},lodash.pullAllWith=function pullAllWith(r,n,i){return r&&r.length&&n&&n.length?basePullAll(r,n,undefined,i):r},lodash.pullAt=Cr,lodash.range=Jn,lodash.rangeRight=ti,lodash.rearg=an,lodash.reject=function reject(r,n){return(cn(r)?arrayFilter:baseFilter)(r,negate(getIteratee(n,3)))},lodash.remove=function remove(r,n){var i=[];if(!r||!r.length)return i;var o=-1,a=[],s=r.length;for(n=getIteratee(n,3);++o<s;){var h=r[o];n(h,o,r)&&(i.push(h),a.push(o))}return basePullAt(r,a),i},lodash.rest=function rest(r,n){if("function"!=typeof r)throw new Dt(s);return baseRest(r,n=undefined===n?n:toInteger(n))},lodash.reverse=reverse,lodash.sampleSize=function sampleSize(r,n,i){return n=(i?isIterateeCall(r,n,i):undefined===n)?1:toInteger(n),(cn(r)?arraySampleSize:baseSampleSize)(r,n)},lodash.set=function set(r,n,i){return null==r?r:baseSet(r,n,i)},lodash.setWith=function setWith(r,n,i,o){return o="function"==typeof o?o:undefined,null==r?r:baseSet(r,n,i,o)},lodash.shuffle=function shuffle(r){return(cn(r)?arrayShuffle:baseShuffle)(r)},lodash.slice=function slice(r,n,i){var o=null==r?0:r.length;return o?(i&&"number"!=typeof i&&isIterateeCall(r,n,i)?(n=0,i=o):(n=null==n?0:toInteger(n),i=undefined===i?o:toInteger(i)),baseSlice(r,n,i)):[]},lodash.sortBy=Kr,lodash.sortedUniq=function sortedUniq(r){return r&&r.length?baseSortedUniq(r):[]},lodash.sortedUniqBy=function sortedUniqBy(r,n){return r&&r.length?baseSortedUniq(r,getIteratee(n,2)):[]},lodash.split=function split(r,n,i){return i&&"number"!=typeof i&&isIterateeCall(r,n,i)&&(n=i=undefined),(i=undefined===i?4294967295:i>>>0)?(r=toString(r))&&("string"==typeof n||null!=n&&!yn(n))&&!(n=baseToString(n))&&hasUnicode(r)?castSlice(stringToArray(r),0,i):r.split(n,i):[]},lodash.spread=function spread(r,n){if("function"!=typeof r)throw new Dt(s);return n=null==n?0:Ne(toInteger(n),0),baseRest((function(i){var o=i[n],a=castSlice(i,0,n);return o&&arrayPush(a,o),apply(r,this,a)}))},lodash.tail=function tail(r){var n=null==r?0:r.length;return n?baseSlice(r,1,n):[]},lodash.take=function take(r,n,i){return r&&r.length?baseSlice(r,0,(n=i||undefined===n?1:toInteger(n))<0?0:n):[]},lodash.takeRight=function takeRight(r,n,i){var o=null==r?0:r.length;return o?baseSlice(r,(n=o-(n=i||undefined===n?1:toInteger(n)))<0?0:n,o):[]},lodash.takeRightWhile=function takeRightWhile(r,n){return r&&r.length?baseWhile(r,getIteratee(n,3),!1,!0):[]},lodash.takeWhile=function takeWhile(r,n){return r&&r.length?baseWhile(r,getIteratee(n,3)):[]},lodash.tap=function tap(r,n){return n(r),r},lodash.throttle=function throttle(r,n,i){var o=!0,a=!0;if("function"!=typeof r)throw new Dt(s);return isObject(i)&&(o="leading"in i?!!i.leading:o,a="trailing"in i?!!i.trailing:a),debounce(r,n,{leading:o,maxWait:n,trailing:a})},lodash.thru=thru,lodash.toArray=toArray,lodash.toPairs=Dn,lodash.toPairsIn=Fn,lodash.toPath=function toPath(r){return cn(r)?arrayMap(r,toKey):isSymbol(r)?[r]:copyArray(Sr(toString(r)))},lodash.toPlainObject=toPlainObject,lodash.transform=function transform(r,n,i){var o=cn(r),a=o||dn(r)||gn(r);if(n=getIteratee(n,4),null==i){var s=r&&r.constructor;i=a?o?new s:[]:isObject(r)&&isFunction(s)?or(oe(r)):{}}return(a?arrayEach:baseForOwn)(r,(function(r,o,a){return n(i,r,o,a)})),i},lodash.unary=function unary(r){return ary(r,1)},lodash.union=Mr,lodash.unionBy=Lr,lodash.unionWith=Dr,lodash.uniq=function uniq(r){return r&&r.length?baseUniq(r):[]},lodash.uniqBy=function uniqBy(r,n){return r&&r.length?baseUniq(r,getIteratee(n,2)):[]},lodash.uniqWith=function uniqWith(r,n){return n="function"==typeof n?n:undefined,r&&r.length?baseUniq(r,undefined,n):[]},lodash.unset=function unset(r,n){return null==r||baseUnset(r,n)},lodash.unzip=unzip,lodash.unzipWith=unzipWith,lodash.update=function update(r,n,i){return null==r?r:baseUpdate(r,n,castFunction(i))},lodash.updateWith=function updateWith(r,n,i,o){return o="function"==typeof o?o:undefined,null==r?r:baseUpdate(r,n,castFunction(i),o)},lodash.values=values,lodash.valuesIn=function valuesIn(r){return null==r?[]:baseValues(r,keysIn(r))},lodash.without=Fr,lodash.words=words,lodash.wrap=function wrap(r,n){return rn(castFunction(n),r)},lodash.xor=Br,lodash.xorBy=Nr,lodash.xorWith=kr,lodash.zip=Ur,lodash.zipObject=function zipObject(r,n){return baseZipObject(r||[],n||[],assignValue)},lodash.zipObjectDeep=function zipObjectDeep(r,n){return baseZipObject(r||[],n||[],baseSet)},lodash.zipWith=jr,lodash.entries=Dn,lodash.entriesIn=Fn,lodash.extend=xn,lodash.extendWith=Tn,mixin(lodash,lodash),lodash.add=ei,lodash.attempt=Hn,lodash.camelCase=Bn,lodash.capitalize=capitalize,lodash.ceil=ri,lodash.clamp=function clamp(r,n,i){return undefined===i&&(i=n,n=undefined),undefined!==i&&(i=(i=toNumber(i))==i?i:0),undefined!==n&&(n=(n=toNumber(n))==n?n:0),baseClamp(toNumber(r),n,i)},lodash.clone=function clone(r){return baseClone(r,4)},lodash.cloneDeep=function cloneDeep(r){return baseClone(r,5)},lodash.cloneDeepWith=function cloneDeepWith(r,n){return baseClone(r,5,n="function"==typeof n?n:undefined)},lodash.cloneWith=function cloneWith(r,n){return baseClone(r,4,n="function"==typeof n?n:undefined)},lodash.conformsTo=function conformsTo(r,n){return null==n||baseConformsTo(r,n,keys(n))},lodash.deburr=deburr,lodash.defaultTo=function defaultTo(r,n){return null==r||r!=r?n:r},lodash.divide=ni,lodash.endsWith=function endsWith(r,n,i){r=toString(r),n=baseToString(n);var o=r.length,a=i=undefined===i?o:baseClamp(toInteger(i),0,o);return(i-=n.length)>=0&&r.slice(i,a)==n},lodash.eq=eq,lodash.escape=function escape(r){return(r=toString(r))&&rt.test(r)?r.replace(tt,Ee):r},lodash.escapeRegExp=function escapeRegExp(r){return(r=toString(r))&&ct.test(r)?r.replace(ht,"\\$&"):r},lodash.every=function every(r,n,i){var o=cn(r)?arrayEvery:baseEvery;return i&&isIterateeCall(r,n,i)&&(n=undefined),o(r,getIteratee(n,3))},lodash.find=zr,lodash.findIndex=findIndex,lodash.findKey=function findKey(r,n){return baseFindKey(r,getIteratee(n,3),baseForOwn)},lodash.findLast=Hr,lodash.findLastIndex=findLastIndex,lodash.findLastKey=function findLastKey(r,n){return baseFindKey(r,getIteratee(n,3),baseForOwnRight)},lodash.floor=ii,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=function forIn(r,n){return null==r?r:ur(r,getIteratee(n,3),keysIn)},lodash.forInRight=function forInRight(r,n){return null==r?r:hr(r,getIteratee(n,3),keysIn)},lodash.forOwn=function forOwn(r,n){return r&&baseForOwn(r,getIteratee(n,3))},lodash.forOwnRight=function forOwnRight(r,n){return r&&baseForOwnRight(r,getIteratee(n,3))},lodash.get=get,lodash.gt=sn,lodash.gte=un,lodash.has=function has(r,n){return null!=r&&hasPath(r,n,baseHas)},lodash.hasIn=hasIn,lodash.head=head,lodash.identity=identity,lodash.includes=function includes(r,n,i,o){r=isArrayLike(r)?r:values(r),i=i&&!o?toInteger(i):0;var a=r.length;return i<0&&(i=Ne(a+i,0)),isString(r)?i<=a&&r.indexOf(n,i)>-1:!!a&&baseIndexOf(r,n,i)>-1},lodash.indexOf=function indexOf(r,n,i){var o=null==r?0:r.length;if(!o)return-1;var a=null==i?0:toInteger(i);return a<0&&(a=Ne(o+a,0)),baseIndexOf(r,n,a)},lodash.inRange=function inRange(r,n,i){return n=toFinite(n),undefined===i?(i=n,n=0):i=toFinite(i),function baseInRange(r,n,i){return r>=ke(n,i)&&r<Ne(n,i)}(r=toNumber(r),n,i)},lodash.invoke=On,lodash.isArguments=hn,lodash.isArray=cn,lodash.isArrayBuffer=ln,lodash.isArrayLike=isArrayLike,lodash.isArrayLikeObject=isArrayLikeObject,lodash.isBoolean=function isBoolean(r){return!0===r||!1===r||isObjectLike(r)&&baseGetTag(r)==y},lodash.isBuffer=dn,lodash.isDate=fn,lodash.isElement=function isElement(r){return isObjectLike(r)&&1===r.nodeType&&!isPlainObject(r)},lodash.isEmpty=function isEmpty(r){if(null==r)return!0;if(isArrayLike(r)&&(cn(r)||"string"==typeof r||"function"==typeof r.splice||dn(r)||gn(r)||hn(r)))return!r.length;var n=vr(r);if(n==T||n==P)return!r.size;if(isPrototype(r))return!baseKeys(r).length;for(var i in r)if(jt.call(r,i))return!1;return!0},lodash.isEqual=function isEqual(r,n){return baseIsEqual(r,n)},lodash.isEqualWith=function isEqualWith(r,n,i){var o=(i="function"==typeof i?i:undefined)?i(r,n):undefined;return undefined===o?baseIsEqual(r,n,undefined,i):!!o},lodash.isError=isError,lodash.isFinite=function isFinite(r){return"number"==typeof r&&De(r)},lodash.isFunction=isFunction,lodash.isInteger=isInteger,lodash.isLength=isLength,lodash.isMap=pn,lodash.isMatch=function isMatch(r,n){return r===n||baseIsMatch(r,n,getMatchData(n))},lodash.isMatchWith=function isMatchWith(r,n,i){return i="function"==typeof i?i:undefined,baseIsMatch(r,n,getMatchData(n),i)},lodash.isNaN=function isNaN(r){return isNumber(r)&&r!=+r},lodash.isNative=function isNative(r){if(_r(r))throw new a("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return baseIsNative(r)},lodash.isNil=function isNil(r){return null==r},lodash.isNull=function isNull(r){return null===r},lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isObjectLike=isObjectLike,lodash.isPlainObject=isPlainObject,lodash.isRegExp=yn,lodash.isSafeInteger=function isSafeInteger(r){return isInteger(r)&&r>=-9007199254740991&&r<=9007199254740991},lodash.isSet=mn,lodash.isString=isString,lodash.isSymbol=isSymbol,lodash.isTypedArray=gn,lodash.isUndefined=function isUndefined(r){return undefined===r},lodash.isWeakMap=function isWeakMap(r){return isObjectLike(r)&&vr(r)==C},lodash.isWeakSet=function isWeakSet(r){return isObjectLike(r)&&"[object WeakSet]"==baseGetTag(r)},lodash.join=function join(r,n){return null==r?"":Fe.call(r,n)},lodash.kebabCase=Nn,lodash.last=last,lodash.lastIndexOf=function lastIndexOf(r,n,i){var o=null==r?0:r.length;if(!o)return-1;var a=o;return undefined!==i&&(a=(a=toInteger(i))<0?Ne(o+a,0):ke(a,o-1)),n==n?function strictLastIndexOf(r,n,i){for(var o=i+1;o--;)if(r[o]===n)return o;return o}(r,n,a):baseFindIndex(r,baseIsNaN,a,!0)},lodash.lowerCase=kn,lodash.lowerFirst=Un,lodash.lt=vn,lodash.lte=_n,lodash.max=function max(r){return r&&r.length?baseExtremum(r,identity,baseGt):undefined},lodash.maxBy=function maxBy(r,n){return r&&r.length?baseExtremum(r,getIteratee(n,2),baseGt):undefined},lodash.mean=function mean(r){return baseMean(r,identity)},lodash.meanBy=function meanBy(r,n){return baseMean(r,getIteratee(n,2))},lodash.min=function min(r){return r&&r.length?baseExtremum(r,identity,baseLt):undefined},lodash.minBy=function minBy(r,n){return r&&r.length?baseExtremum(r,getIteratee(n,2),baseLt):undefined},lodash.stubArray=stubArray,lodash.stubFalse=stubFalse,lodash.stubObject=function stubObject(){return{}},lodash.stubString=function stubString(){return""},lodash.stubTrue=function stubTrue(){return!0},lodash.multiply=ai,lodash.nth=function nth(r,n){return r&&r.length?baseNth(r,toInteger(n)):undefined},lodash.noConflict=function noConflict(){return ce._===this&&(ce._=Wt),this},lodash.noop=noop,lodash.now=Zr,lodash.pad=function pad(r,n,i){r=toString(r);var o=(n=toInteger(n))?stringSize(r):0;if(!n||o>=n)return r;var a=(n-o)/2;return createPadding(Ce(a),i)+r+createPadding(Re(a),i)},lodash.padEnd=function padEnd(r,n,i){r=toString(r);var o=(n=toInteger(n))?stringSize(r):0;return n&&o<n?r+createPadding(n-o,i):r},lodash.padStart=function padStart(r,n,i){r=toString(r);var o=(n=toInteger(n))?stringSize(r):0;return n&&o<n?createPadding(n-o,i)+r:r},lodash.parseInt=function parseInt(r,n,i){return i||null==n?n=0:n&&(n=+n),je(toString(r).replace(dt,""),n||0)},lodash.random=function random(r,n,i){if(i&&"boolean"!=typeof i&&isIterateeCall(r,n,i)&&(n=i=undefined),undefined===i&&("boolean"==typeof n?(i=n,n=undefined):"boolean"==typeof r&&(i=r,r=undefined)),undefined===r&&undefined===n?(r=0,n=1):(r=toFinite(r),undefined===n?(n=r,r=0):n=toFinite(n)),r>n){var o=r;r=n,n=o}if(i||r%1||n%1){var a=Ge();return ke(r+a*(n-r+ae("1e-"+((a+"").length-1))),n)}return baseRandom(r,n)},lodash.reduce=function reduce(r,n,i){var o=cn(r)?arrayReduce:baseReduce,a=arguments.length<3;return o(r,getIteratee(n,4),i,a,ar)},lodash.reduceRight=function reduceRight(r,n,i){var o=cn(r)?arrayReduceRight:baseReduce,a=arguments.length<3;return o(r,getIteratee(n,4),i,a,sr)},lodash.repeat=function repeat(r,n,i){return n=(i?isIterateeCall(r,n,i):undefined===n)?1:toInteger(n),baseRepeat(toString(r),n)},lodash.replace=function replace(){var r=arguments,n=toString(r[0]);return r.length<3?n:n.replace(r[1],r[2])},lodash.result=function result(r,n,i){var o=-1,a=(n=castPath(n,r)).length;for(a||(a=1,r=undefined);++o<a;){var s=null==r?undefined:r[toKey(n[o])];undefined===s&&(o=a,s=i),r=isFunction(s)?s.call(r):s}return r},lodash.round=si,lodash.runInContext=runInContext,lodash.sample=function sample(r){return(cn(r)?arraySample:baseSample)(r)},lodash.size=function size(r){if(null==r)return 0;if(isArrayLike(r))return isString(r)?stringSize(r):r.length;var n=vr(r);return n==T||n==P?r.size:baseKeys(r).length},lodash.snakeCase=jn,lodash.some=function some(r,n,i){var o=cn(r)?arraySome:baseSome;return i&&isIterateeCall(r,n,i)&&(n=undefined),o(r,getIteratee(n,3))},lodash.sortedIndex=function sortedIndex(r,n){return baseSortedIndex(r,n)},lodash.sortedIndexBy=function sortedIndexBy(r,n,i){return baseSortedIndexBy(r,n,getIteratee(i,2))},lodash.sortedIndexOf=function sortedIndexOf(r,n){var i=null==r?0:r.length;if(i){var o=baseSortedIndex(r,n);if(o<i&&eq(r[o],n))return o}return-1},lodash.sortedLastIndex=function sortedLastIndex(r,n){return baseSortedIndex(r,n,!0)},lodash.sortedLastIndexBy=function sortedLastIndexBy(r,n,i){return baseSortedIndexBy(r,n,getIteratee(i,2),!0)},lodash.sortedLastIndexOf=function sortedLastIndexOf(r,n){if(null==r?0:r.length){var i=baseSortedIndex(r,n,!0)-1;if(eq(r[i],n))return i}return-1},lodash.startCase=Gn,lodash.startsWith=function startsWith(r,n,i){return r=toString(r),i=null==i?0:baseClamp(toInteger(i),0,r.length),n=baseToString(n),r.slice(i,i+n.length)==n},lodash.subtract=ui,lodash.sum=function sum(r){return r&&r.length?baseSum(r,identity):0},lodash.sumBy=function sumBy(r,n){return r&&r.length?baseSum(r,getIteratee(n,2)):0},lodash.template=function template(r,n,i){var o=lodash.templateSettings;i&&isIterateeCall(r,n,i)&&(n=undefined),r=toString(r),n=Tn({},n,o,customDefaultsAssignIn);var a,s,h=Tn({},n.imports,o.imports,customDefaultsAssignIn),d=keys(h),f=baseValues(h,d),p=0,y=n.interpolate||Pt,g="__p += '",_=Mt((n.escape||Pt).source+"|"+y.source+"|"+(y===ot?_t:Pt).source+"|"+(n.evaluate||Pt).source+"|$","g"),b="//# sourceURL="+(jt.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++re+"]")+"\n";r.replace(_,(function(n,i,o,h,d,f){return o||(o=h),g+=r.slice(p,f).replace(At,escapeStringChar),i&&(a=!0,g+="' +\n__e("+i+") +\n'"),d&&(s=!0,g+="';\n"+d+";\n__p += '"),o&&(g+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),p=f+n.length,n})),g+="';\n";var x=jt.call(n,"variable")&&n.variable;x||(g="with (obj) {\n"+g+"\n}\n"),g=(s?g.replace(q,""):g).replace(Z,"$1").replace($,"$1;"),g="function("+(x||"obj")+") {\n"+(x?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+g+"return __p\n}";var T=Hn((function(){return Ot(d,b+"return "+g).apply(undefined,f)}));if(T.source=g,isError(T))throw T;return T},lodash.times=function times(r,n){if((r=toInteger(r))<1||r>9007199254740991)return[];var i=4294967295,o=ke(r,4294967295);r-=4294967295;for(var a=baseTimes(o,n=getIteratee(n));++i<r;)n(i);return a},lodash.toFinite=toFinite,lodash.toInteger=toInteger,lodash.toLength=toLength,lodash.toLower=function toLower(r){return toString(r).toLowerCase()},lodash.toNumber=toNumber,lodash.toSafeInteger=function toSafeInteger(r){return r?baseClamp(toInteger(r),-9007199254740991,9007199254740991):0===r?r:0},lodash.toString=toString,lodash.toUpper=function toUpper(r){return toString(r).toUpperCase()},lodash.trim=function trim(r,n,i){if((r=toString(r))&&(i||undefined===n))return r.replace(lt,"");if(!r||!(n=baseToString(n)))return r;var o=stringToArray(r),a=stringToArray(n);return castSlice(o,charsStartIndex(o,a),charsEndIndex(o,a)+1).join("")},lodash.trimEnd=function trimEnd(r,n,i){if((r=toString(r))&&(i||undefined===n))return r.replace(ft,"");if(!r||!(n=baseToString(n)))return r;var o=stringToArray(r);return castSlice(o,0,charsEndIndex(o,stringToArray(n))+1).join("")},lodash.trimStart=function trimStart(r,n,i){if((r=toString(r))&&(i||undefined===n))return r.replace(dt,"");if(!r||!(n=baseToString(n)))return r;var o=stringToArray(r);return castSlice(o,charsStartIndex(o,stringToArray(n))).join("")},lodash.truncate=function truncate(r,n){var i=30,o="...";if(isObject(n)){var a="separator"in n?n.separator:a;i="length"in n?toInteger(n.length):i,o="omission"in n?baseToString(n.omission):o}var s=(r=toString(r)).length;if(hasUnicode(r)){var h=stringToArray(r);s=h.length}if(i>=s)return r;var d=i-stringSize(o);if(d<1)return o;var f=h?castSlice(h,0,d).join(""):r.slice(0,d);if(undefined===a)return f+o;if(h&&(d+=f.length-d),yn(a)){if(r.slice(d).search(a)){var p,y=f;for(a.global||(a=Mt(a.source,toString(bt.exec(a))+"g")),a.lastIndex=0;p=a.exec(y);)var g=p.index;f=f.slice(0,undefined===g?d:g)}}else if(r.indexOf(baseToString(a),d)!=d){var _=f.lastIndexOf(a);_>-1&&(f=f.slice(0,_))}return f+o},lodash.unescape=function unescape(r){return(r=toString(r))&&et.test(r)?r.replace(Q,Ie):r},lodash.uniqueId=function uniqueId(r){var n=++Gt;return toString(r)+n},lodash.upperCase=Xn,lodash.upperFirst=zn,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.first=head,mixin(lodash,(oi={},baseForOwn(lodash,(function(r,n){jt.call(lodash.prototype,n)||(oi[n]=r)})),oi),{chain:!1}),lodash.VERSION="4.17.20",arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(r){lodash[r].placeholder=lodash})),arrayEach(["drop","take"],(function(r,n){LazyWrapper.prototype[r]=function(i){i=undefined===i?1:Ne(toInteger(i),0);var o=this.__filtered__&&!n?new LazyWrapper(this):this.clone();return o.__filtered__?o.__takeCount__=ke(i,o.__takeCount__):o.__views__.push({size:ke(i,4294967295),type:r+(o.__dir__<0?"Right":"")}),o},LazyWrapper.prototype[r+"Right"]=function(n){return this.reverse()[r](n).reverse()}})),arrayEach(["filter","map","takeWhile"],(function(r,n){var i=n+1,o=1==i||3==i;LazyWrapper.prototype[r]=function(r){var n=this.clone();return n.__iteratees__.push({iteratee:getIteratee(r,3),type:i}),n.__filtered__=n.__filtered__||o,n}})),arrayEach(["head","last"],(function(r,n){var i="take"+(n?"Right":"");LazyWrapper.prototype[r]=function(){return this[i](1).value()[0]}})),arrayEach(["initial","tail"],(function(r,n){var i="drop"+(n?"":"Right");LazyWrapper.prototype[r]=function(){return this.__filtered__?new LazyWrapper(this):this[i](1)}})),LazyWrapper.prototype.compact=function(){return this.filter(identity)},LazyWrapper.prototype.find=function(r){return this.filter(r).head()},LazyWrapper.prototype.findLast=function(r){return this.reverse().find(r)},LazyWrapper.prototype.invokeMap=baseRest((function(r,n){return"function"==typeof r?new LazyWrapper(this):this.map((function(i){return baseInvoke(i,r,n)}))})),LazyWrapper.prototype.reject=function(r){return this.filter(negate(getIteratee(r)))},LazyWrapper.prototype.slice=function(r,n){r=toInteger(r);var i=this;return i.__filtered__&&(r>0||n<0)?new LazyWrapper(i):(r<0?i=i.takeRight(-r):r&&(i=i.drop(r)),undefined!==n&&(i=(n=toInteger(n))<0?i.dropRight(-n):i.take(n-r)),i)},LazyWrapper.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},LazyWrapper.prototype.toArray=function(){return this.take(4294967295)},baseForOwn(LazyWrapper.prototype,(function(r,n){var i=/^(?:filter|find|map|reject)|While$/.test(n),o=/^(?:head|last)$/.test(n),a=lodash[o?"take"+("last"==n?"Right":""):n],s=o||/^find/.test(n);a&&(lodash.prototype[n]=function(){var n=this.__wrapped__,h=o?[1]:arguments,d=n instanceof LazyWrapper,f=h[0],p=d||cn(n),interceptor=function(r){var n=a.apply(lodash,arrayPush([r],h));return o&&y?n[0]:n};p&&i&&"function"==typeof f&&1!=f.length&&(d=p=!1);var y=this.__chain__,g=!!this.__actions__.length,_=s&&!y,b=d&&!g;if(!s&&p){n=b?n:new LazyWrapper(this);var x=r.apply(n,h);return x.__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(x,y)}return _&&b?r.apply(this,h):(x=this.thru(interceptor),_?o?x.value()[0]:x.value():x)})})),arrayEach(["pop","push","shift","sort","splice","unshift"],(function(r){var n=Ft[r],i=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",o=/^(?:pop|shift)$/.test(r);lodash.prototype[r]=function(){var r=arguments;if(o&&!this.__chain__){var a=this.value();return n.apply(cn(a)?a:[],r)}return this[i]((function(i){return n.apply(cn(i)?i:[],r)}))}})),baseForOwn(LazyWrapper.prototype,(function(r,n){var i=lodash[n];if(i){var o=i.name+"";jt.call(Ze,o)||(Ze[o]=[]),Ze[o].push({name:n,func:i})}})),Ze[createHybrid(undefined,2).name]=[{name:"wrapper",func:undefined}],LazyWrapper.prototype.clone=function lazyClone(){var r=new LazyWrapper(this.__wrapped__);return r.__actions__=copyArray(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=copyArray(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=copyArray(this.__views__),r},LazyWrapper.prototype.reverse=function lazyReverse(){if(this.__filtered__){var r=new LazyWrapper(this);r.__dir__=-1,r.__filtered__=!0}else(r=this.clone()).__dir__*=-1;return r},LazyWrapper.prototype.value=function lazyValue(){var r=this.__wrapped__.value(),n=this.__dir__,i=cn(r),o=n<0,a=i?r.length:0,s=function getView(r,n,i){var o=-1,a=i.length;for(;++o<a;){var s=i[o],h=s.size;switch(s.type){case"drop":r+=h;break;case"dropRight":n-=h;break;case"take":n=ke(n,r+h);break;case"takeRight":r=Ne(r,n-h)}}return{start:r,end:n}}(0,a,this.__views__),h=s.start,d=s.end,f=d-h,p=o?d:h-1,y=this.__iteratees__,g=y.length,_=0,b=ke(f,this.__takeCount__);if(!i||!o&&a==f&&b==f)return baseWrapperValue(r,this.__actions__);var x=[];t:for(;f--&&_<b;){for(var T=-1,S=r[p+=n];++T<g;){var E=y[T],w=E.iteratee,P=E.type,O=w(S);if(2==P)S=O;else if(!O){if(1==P)continue t;break t}}x[_++]=S}return x},lodash.prototype.at=Gr,lodash.prototype.chain=function wrapperChain(){return chain(this)},lodash.prototype.commit=function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)},lodash.prototype.next=function wrapperNext(){undefined===this.__values__&&(this.__values__=toArray(this.value()));var r=this.__index__>=this.__values__.length;return{done:r,value:r?undefined:this.__values__[this.__index__++]}},lodash.prototype.plant=function wrapperPlant(r){for(var n,i=this;i instanceof baseLodash;){var o=wrapperClone(i);o.__index__=0,o.__values__=undefined,n?a.__wrapped__=o:n=o;var a=o;i=i.__wrapped__}return a.__wrapped__=r,n},lodash.prototype.reverse=function wrapperReverse(){var r=this.__wrapped__;if(r instanceof LazyWrapper){var n=r;return this.__actions__.length&&(n=new LazyWrapper(this)),(n=n.reverse()).__actions__.push({func:thru,args:[reverse],thisArg:undefined}),new LodashWrapper(n,this.__chain__)}return this.thru(reverse)},lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)},lodash.prototype.first=lodash.prototype.head,pe&&(lodash.prototype[pe]=function wrapperToIterator(){return this}),lodash}();ce._=we,undefined===(a=function(){return we}.call(n,i,n,o))||(o.exports=a)}).call(this)}).call(this,i(4),i(15)(r))},,function(r,n,i){(function(o,a){var s;!function(o){var h=o.Promise,d=h&&"resolve"in h&&"reject"in h&&"all"in h&&"race"in h&&function(){var r;return new h((function(n){r=n})),"function"==typeof r}();n?(n.Promise=d?h:Promise,n.Polyfill=Promise):void 0===(s=function(){return d?h:Promise}.call(n,i,n,r))||(r.exports=s);var NOOP=function(){};function isArray(r){return"[object Array]"===Object.prototype.toString.call(r)}var f,p=void 0!==a?a:setTimeout,y=[];function asyncFlush(){for(var r=0;r<y.length;r++)y[r][0](y[r][1]);y=[],f=!1}function asyncCall(r,n){y.push([r,n]),f||(f=!0,p(asyncFlush,0))}function invokeCallback(r){var n=r.owner,i=n.state_,o=n.data_,a=r[i],s=r.then;if("function"==typeof a){i="fulfilled";try{o=a(o)}catch(r){reject(s,r)}}handleThenable(s,o)||("fulfilled"===i&&resolve(s,o),"rejected"===i&&reject(s,o))}function handleThenable(r,n){var i;try{if(r===n)throw new TypeError("A promises callback cannot return that same promise.");if(n&&("function"==typeof n||"object"==typeof n)){var o=n.then;if("function"==typeof o)return o.call(n,(function(o){i||(i=!0,n!==o?resolve(r,o):fulfill(r,o))}),(function(n){i||(i=!0,reject(r,n))})),!0}}catch(n){return i||reject(r,n),!0}return!1}function resolve(r,n){r!==n&&handleThenable(r,n)||fulfill(r,n)}function fulfill(r,n){"pending"===r.state_&&(r.state_="sealed",r.data_=n,asyncCall(publishFulfillment,r))}function reject(r,n){"pending"===r.state_&&(r.state_="sealed",r.data_=n,asyncCall(publishRejection,r))}function publish(r){var n=r.then_;r.then_=void 0;for(var i=0;i<n.length;i++)invokeCallback(n[i])}function publishFulfillment(r){r.state_="fulfilled",publish(r)}function publishRejection(r){r.state_="rejected",publish(r)}function Promise(r){if("function"!=typeof r)throw new TypeError("Promise constructor takes a function argument");if(this instanceof Promise==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function invokeResolver(r,n){function rejectPromise(r){reject(n,r)}try{r((function resolvePromise(r){resolve(n,r)}),rejectPromise)}catch(r){rejectPromise(r)}}(r,this)}Promise.prototype={constructor:Promise,state_:"pending",then_:null,data_:void 0,then:function(r,n){var i={owner:this,then:new this.constructor(NOOP),fulfilled:r,rejected:n};return"fulfilled"===this.state_||"rejected"===this.state_?asyncCall(invokeCallback,i):this.then_.push(i),i.then},catch:function(r){return this.then(null,r)}},Promise.all=function(r){if(!isArray(r))throw new TypeError("You must pass an array to Promise.all().");return new this((function(n,i){var o=[],a=0;function resolver(r){return a++,function(i){o[r]=i,--a||n(o)}}for(var s,h=0;h<r.length;h++)(s=r[h])&&"function"==typeof s.then?s.then(resolver(h),i):o[h]=s;a||n(o)}))},Promise.race=function(r){if(!isArray(r))throw new TypeError("You must pass an array to Promise.race().");return new this((function(n,i){for(var o,a=0;a<r.length;a++)(o=r[a])&&"function"==typeof o.then?o.then(n,i):n(o)}))},Promise.resolve=function(r){return r&&"object"==typeof r&&r.constructor===this?r:new this((function(n){n(r)}))},Promise.reject=function(r){return new this((function(n,i){i(r)}))}}("undefined"!=typeof window?window:void 0!==o?o:"undefined"!=typeof self?self:this)}).call(this,i(4),i(29).setImmediate)},function(r,n,i){"use strict";var o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function toObject(r){if(null==r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}r.exports=function shouldUseNative(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var n={},i=0;i<10;i++)n["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(n).map((function(r){return n[r]})).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(r){o[r]=r})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(r){return!1}}()?Object.assign:function(r,n){for(var i,h,d=toObject(r),f=1;f<arguments.length;f++){for(var p in i=Object(arguments[f]))a.call(i,p)&&(d[p]=i[p]);if(o){h=o(i);for(var y=0;y<h.length;y++)s.call(i,h[y])&&(d[h[y]]=i[h[y]])}}return d}},,function(r,n,i){(function(r){var o=void 0!==r&&r||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function Timeout(r,n){this._id=r,this._clearFn=n}n.setTimeout=function(){return new Timeout(a.call(setTimeout,o,arguments),clearTimeout)},n.setInterval=function(){return new Timeout(a.call(setInterval,o,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(r){r&&r.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(o,this._id)},n.enroll=function(r,n){clearTimeout(r._idleTimeoutId),r._idleTimeout=n},n.unenroll=function(r){clearTimeout(r._idleTimeoutId),r._idleTimeout=-1},n._unrefActive=n.active=function(r){clearTimeout(r._idleTimeoutId);var n=r._idleTimeout;n>=0&&(r._idleTimeoutId=setTimeout((function onTimeout(){r._onTimeout&&r._onTimeout()}),n))},i(30),n.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==r&&r.setImmediate||this&&this.setImmediate,n.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==r&&r.clearImmediate||this&&this.clearImmediate}).call(this,i(4))},function(r,n,i){(function(r,n){!function(r,i){"use strict";if(!r.setImmediate){var o,a=1,s={},h=!1,d=r.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(r);f=f&&f.setTimeout?f:r,"[object process]"==={}.toString.call(r.process)?function installNextTickImplementation(){o=function(r){n.nextTick((function(){runIfPresent(r)}))}}():!function canUsePostMessage(){if(r.postMessage&&!r.importScripts){var n=!0,i=r.onmessage;return r.onmessage=function(){n=!1},r.postMessage("","*"),r.onmessage=i,n}}()?r.MessageChannel?function installMessageChannelImplementation(){var r=new MessageChannel;r.port1.onmessage=function(r){runIfPresent(r.data)},o=function(n){r.port2.postMessage(n)}}():d&&"onreadystatechange"in d.createElement("script")?function installReadyStateChangeImplementation(){var r=d.documentElement;o=function(n){var i=d.createElement("script");i.onreadystatechange=function(){runIfPresent(n),i.onreadystatechange=null,r.removeChild(i),i=null},r.appendChild(i)}}():function installSetTimeoutImplementation(){o=function(r){setTimeout(runIfPresent,0,r)}}():function installPostMessageImplementation(){var n="setImmediate$"+Math.random()+"$",onGlobalMessage=function(i){i.source===r&&"string"==typeof i.data&&0===i.data.indexOf(n)&&runIfPresent(+i.data.slice(n.length))};r.addEventListener?r.addEventListener("message",onGlobalMessage,!1):r.attachEvent("onmessage",onGlobalMessage),o=function(i){r.postMessage(n+i,"*")}}(),f.setImmediate=function setImmediate(r){"function"!=typeof r&&(r=new Function(""+r));for(var n=new Array(arguments.length-1),i=0;i<n.length;i++)n[i]=arguments[i+1];var h={callback:r,args:n};return s[a]=h,o(a),a++},f.clearImmediate=clearImmediate}function clearImmediate(r){delete s[r]}function runIfPresent(r){if(h)setTimeout(runIfPresent,0,r);else{var n=s[r];if(n){h=!0;try{!function run(r){var n=r.callback,i=r.args;switch(i.length){case 0:n();break;case 1:n(i[0]);break;case 2:n(i[0],i[1]);break;case 3:n(i[0],i[1],i[2]);break;default:n.apply(void 0,i)}}(n)}finally{clearImmediate(r),h=!1}}}}}("undefined"==typeof self?void 0===r?this:r:self)}).call(this,i(4),i(12))},function(r,n,i){(function(r,o){var a;!function(s){n&&n.nodeType,r&&r.nodeType;var h="object"==typeof o&&o;h.global!==h&&h.window!==h&&h.self;var d,f=2147483647,p=/^xn--/,y=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=Math.floor,x=String.fromCharCode;function error(r){throw RangeError(_[r])}function map(r,n){for(var i=r.length,o=[];i--;)o[i]=n(r[i]);return o}function mapDomain(r,n){var i=r.split("@"),o="";return i.length>1&&(o=i[0]+"@",r=i[1]),o+map((r=r.replace(g,".")).split("."),n).join(".")}function ucs2decode(r){for(var n,i,o=[],a=0,s=r.length;a<s;)(n=r.charCodeAt(a++))>=55296&&n<=56319&&a<s?56320==(64512&(i=r.charCodeAt(a++)))?o.push(((1023&n)<<10)+(1023&i)+65536):(o.push(n),a--):o.push(n);return o}function ucs2encode(r){return map(r,(function(r){var n="";return r>65535&&(n+=x((r-=65536)>>>10&1023|55296),r=56320|1023&r),n+=x(r)})).join("")}function digitToBasic(r,n){return r+22+75*(r<26)-((0!=n)<<5)}function adapt(r,n,i){var o=0;for(r=i?b(r/700):r>>1,r+=b(r/n);r>455;o+=36)r=b(r/35);return b(o+36*r/(r+38))}function decode(r){var n,i,o,a,s,h,d,p,y,g,_,x=[],T=r.length,S=0,E=128,w=72;for((i=r.lastIndexOf("-"))<0&&(i=0),o=0;o<i;++o)r.charCodeAt(o)>=128&&error("not-basic"),x.push(r.charCodeAt(o));for(a=i>0?i+1:0;a<T;){for(s=S,h=1,d=36;a>=T&&error("invalid-input"),((p=(_=r.charCodeAt(a++))-48<10?_-22:_-65<26?_-65:_-97<26?_-97:36)>=36||p>b((f-S)/h))&&error("overflow"),S+=p*h,!(p<(y=d<=w?1:d>=w+26?26:d-w));d+=36)h>b(f/(g=36-y))&&error("overflow"),h*=g;w=adapt(S-s,n=x.length+1,0==s),b(S/n)>f-E&&error("overflow"),E+=b(S/n),S%=n,x.splice(S++,0,E)}return ucs2encode(x)}function encode(r){var n,i,o,a,s,h,d,p,y,g,_,T,S,E,w,P=[];for(T=(r=ucs2decode(r)).length,n=128,i=0,s=72,h=0;h<T;++h)(_=r[h])<128&&P.push(x(_));for(o=a=P.length,a&&P.push("-");o<T;){for(d=f,h=0;h<T;++h)(_=r[h])>=n&&_<d&&(d=_);for(d-n>b((f-i)/(S=o+1))&&error("overflow"),i+=(d-n)*S,n=d,h=0;h<T;++h)if((_=r[h])<n&&++i>f&&error("overflow"),_==n){for(p=i,y=36;!(p<(g=y<=s?1:y>=s+26?26:y-s));y+=36)w=p-g,E=36-g,P.push(x(digitToBasic(g+w%E,0))),p=b(w/E);P.push(x(digitToBasic(p,0))),s=adapt(i,S,o==a),i=0,++o}++i,++n}return P.join("")}d={version:"1.3.2",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:function toASCII(r){return mapDomain(r,(function(r){return y.test(r)?"xn--"+encode(r):r}))},toUnicode:function toUnicode(r){return mapDomain(r,(function(r){return p.test(r)?decode(r.slice(4).toLowerCase()):r}))}},void 0===(a=function(){return d}.call(n,i,n,r))||(r.exports=a)}()}).call(this,i(15)(r),i(4))},function(r,n,i){"use strict";r.exports={isString:function(r){return"string"==typeof r},isObject:function(r){return"object"==typeof r&&null!==r},isNull:function(r){return null===r},isNullOrUndefined:function(r){return null==r}}},function(r,n,i){"use strict";n.decode=n.parse=i(34),n.encode=n.stringify=i(35)},function(r,n,i){"use strict";function hasOwnProperty(r,n){return Object.prototype.hasOwnProperty.call(r,n)}r.exports=function(r,n,i,a){n=n||"&",i=i||"=";var s={};if("string"!=typeof r||0===r.length)return s;var h=/\+/g;r=r.split(n);var d=1e3;a&&"number"==typeof a.maxKeys&&(d=a.maxKeys);var f=r.length;d>0&&f>d&&(f=d);for(var p=0;p<f;++p){var y,g,_,b,x=r[p].replace(h,"%20"),T=x.indexOf(i);T>=0?(y=x.substr(0,T),g=x.substr(T+1)):(y=x,g=""),_=decodeURIComponent(y),b=decodeURIComponent(g),hasOwnProperty(s,_)?o(s[_])?s[_].push(b):s[_]=[s[_],b]:s[_]=b}return s};var o=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)}},function(r,n,i){"use strict";var stringifyPrimitive=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}};r.exports=function(r,n,i,s){return n=n||"&",i=i||"=",null===r&&(r=void 0),"object"==typeof r?map(a(r),(function(a){var s=encodeURIComponent(stringifyPrimitive(a))+i;return o(r[a])?map(r[a],(function(r){return s+encodeURIComponent(stringifyPrimitive(r))})).join(n):s+encodeURIComponent(stringifyPrimitive(r[a]))})).join(n):s?encodeURIComponent(stringifyPrimitive(s))+i+encodeURIComponent(stringifyPrimitive(r)):""};var o=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};function map(r,n){if(r.map)return r.map(n);for(var i=[],o=0;o<r.length;o++)i.push(n(r[o],o));return i}var a=Object.keys||function(r){var n=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&n.push(i);return n}},function(r,n){var i=Object.prototype.hasOwnProperty;r.exports=function baseHas(r,n){return null!=r&&i.call(r,n)}},function(r,n,i){!function(){function l(r,n){document.addEventListener?r.addEventListener("scroll",n,!1):r.attachEvent("scroll",n)}function t(r){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(r)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function u(r,n){r.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+n+";"}function z(r){var n=r.a.offsetWidth,i=n+100;return r.f.style.width=i+"px",r.c.scrollLeft=i,r.b.scrollLeft=r.b.scrollWidth+100,r.g!==n&&(r.g=n,!0)}function A(r,n){function c(){var r=i;z(r)&&r.a.parentNode&&n(r.g)}var i=r;l(r.b,c),l(r.c,c),z(r)}function B(r,n){var i=n||{};this.family=r,this.style=i.style||"normal",this.weight=i.weight||"normal",this.stretch=i.stretch||"normal"}var n=null,i=null,o=null,a=null;function J(){return null===a&&(a=!!document.fonts),a}function K(){if(null===o){var r=document.createElement("div");try{r.style.font="condensed 100px sans-serif"}catch(r){}o=""!==r.style.font}return o}function L(r,n){return[r.style,r.weight,K()?r.stretch:"","100px",n].join(" ")}B.prototype.load=function(r,o){var a=this,s=r||"BESbswy",h=0,d=o||3e3,f=(new Date).getTime();return new Promise((function(r,o){if(J()&&!function G(){if(null===i)if(J()&&/Apple/.test(window.navigator.vendor)){var r=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);i=!!r&&603>parseInt(r[1],10)}else i=!1;return i}()){var p=new Promise((function(r,n){!function e(){(new Date).getTime()-f>=d?n(Error(d+"ms timeout exceeded")):document.fonts.load(L(a,'"'+a.family+'"'),s).then((function(n){1<=n.length?r():setTimeout(e,25)}),n)}()})),y=new Promise((function(r,n){h=setTimeout((function(){n(Error(d+"ms timeout exceeded"))}),d)}));Promise.race([y,p]).then((function(){clearTimeout(h),r(a)}),o)}else!function m(r){document.body?r():document.addEventListener?document.addEventListener("DOMContentLoaded",(function c(){document.removeEventListener("DOMContentLoaded",c),r()})):document.attachEvent("onreadystatechange",(function k(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",k),r())}))}((function(){function v(){var i;(i=-1!=g&&-1!=_||-1!=g&&-1!=b||-1!=_&&-1!=b)&&((i=g!=_&&g!=b&&_!=b)||(null===n&&(i=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),n=!!i&&(536>parseInt(i[1],10)||536===parseInt(i[1],10)&&11>=parseInt(i[2],10))),i=n&&(g==x&&_==x&&b==x||g==T&&_==T&&b==T||g==S&&_==S&&b==S)),i=!i),i&&(E.parentNode&&E.parentNode.removeChild(E),clearTimeout(h),r(a))}var i=new t(s),p=new t(s),y=new t(s),g=-1,_=-1,b=-1,x=-1,T=-1,S=-1,E=document.createElement("div");E.dir="ltr",u(i,L(a,"sans-serif")),u(p,L(a,"serif")),u(y,L(a,"monospace")),E.appendChild(i.a),E.appendChild(p.a),E.appendChild(y.a),document.body.appendChild(E),x=i.a.offsetWidth,T=p.a.offsetWidth,S=y.a.offsetWidth,function I(){if((new Date).getTime()-f>=d)E.parentNode&&E.parentNode.removeChild(E),o(Error(d+"ms timeout exceeded"));else{var r=document.hidden;!0!==r&&void 0!==r||(g=i.a.offsetWidth,_=p.a.offsetWidth,b=y.a.offsetWidth,v()),h=setTimeout(I,50)}}(),A(i,(function(r){g=r,v()})),u(i,L(a,'"'+a.family+'",sans-serif')),A(p,(function(r){_=r,v()})),u(p,L(a,'"'+a.family+'",serif')),A(y,(function(r){b=r,v()})),u(y,L(a,'"'+a.family+'",monospace'))}))}))},r.exports=B}()}]]);